<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>正则表达式环视的理解</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
<link href="https://bobobo80.com/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html" rel="canonical" />
  <!-- Feed -->
  <link href="https://bobobo80.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
    title="On the wing 展翼 Full Atom Feed" />
  <link href="https://bobobo80.com/feeds/tech.atom.xml" type="application/atom+xml"
    rel="alternate" title="On the wing 展翼 Categories Atom Feed" />

  <link href="https://bobobo80.com/theme/css/style.css" type="text/css" rel="stylesheet" />


  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script>
    var siteUrl = 'https://bobobo80.com';
  </script>

  <script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>







    <meta name="description" content="最近看完了《精通正则表达式》的前面和语言无关的几章，也正好碰到了一个知乎问题，所以就强行答了一下。如何理解先行 …">

    <meta name="author" content="bobobo80">

    <meta name="tags" content="正则">




<!-- Open Graph -->
<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="On the wing 展翼"/>
<meta prefix="og: http://ogp.me/ns#" property="og:title" content="正则表达式环视的理解"/>
<meta prefix="og: http://ogp.me/ns#" property="og:description" content="最近看完了《精通正则表达式》的前面和语言无关的几章，也正好碰到了一个知乎问题，所以就强行答了一下。如何理解先行 …"/>
<meta prefix="og: http://ogp.me/ns#" property="og:locale" content="en_US"/>
<meta prefix="og: http://ogp.me/ns#" property="og:url" content="https://bobobo80.com/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html"/>
<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article"/>
<meta prefix="og: http://ogp.me/ns#" property="article:published_time" content="2017-05-08 00:00:00+08:00"/>
<meta prefix="og: http://ogp.me/ns#" property="article:modified_time" content=""/>
<meta prefix="og: http://ogp.me/ns#" property="article:author" content="https://bobobo80.com/author/bobobo80.html">
<meta prefix="og: http://ogp.me/ns#" property="article:section" content="Tech"/>
<meta prefix="og: http://ogp.me/ns#" property="article:tag" content="正则"/>
<meta prefix="og: http://ogp.me/ns#" property="og:image" content="https://bobobo80.com/images/post-bg.jpg">

<!-- Twitter Card -->

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "正则表达式环视的理解",
  "headline": "正则表达式环视的理解",
  "datePublished": "2017-05-08 00:00:00+08:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Bobobo80",
    "url": "https://bobobo80.com/author/bobobo80.html"
  },
  "image": "https://bobobo80.com/theme/images/post-bg.jpg",
  "url": "https://bobobo80.com/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html",
  "description": "最近看完了《精通正则表达式》的前面和语言无关的几章，也正好碰到了一个知乎问题，所以就强行答了一下。如何理解先行 …"
}
</script>
</head>







<body class="category-template">

<div class="nav-header">
  <nav class="nav-wrapper" aria-label="Main">
<ul>


</ul>
<ul class="nav-meta">
    <li class="nav-github"><a aria-label="Github" href="https://github.com/bobobo80" target="_blank"><i class="icon icon-github" aria-hidden="true"></i>
    <span>github</span>
    </a></li>
  <li class="nav-search" style="display: none;">
    <a title="Search">
      <i class="icon icon-search" aria-hidden="true"></i>
      <span>Search</span>
    </a>
  </li>
</ul>  </nav>

  <div class="nav-wrapper-control">
    <div class="inner">
      <a class="nav-menu" role="button"><i class="icon icon-menu" aria-hidden="true"></i>Menu</a>
      <a class="nav-search" title="Search" role="button" style="display: none;"><i class="icon icon-search" aria-hidden="true"></i></a>
    </div>
  </div>
</div>
<div class="nav-close" role="button" aria-label="Close"></div>
  <section id="wrapper" class="page-wrapper">
    <!-- Progressbar -->
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="post-header ">
      <div class="inner">
        <span class="post-info">
          <span class="post-type">Article</span>
          <span class="post-count">Tech</span>
        </span>
        <h1 class="post-title">正则表达式环视的理解</h1>
        <div class="post-meta">
          <div class="post-meta-avatars">


            <figure class="post-meta-avatar avatar">
              <a class="author-avatar" href="https://bobobo80.com/author/bobobo80.html">
                <img class="author-profile-image" src="https://bobobo80.com/images/avatar.png" alt="bobobo80" />
              </a>
            </figure>
          </div>

          <h4 class="post-meta-author">
            bobobo80
          </h4>
          <time datetime="Mon 08 May 2017">Mon 08 May 2017</time>
        </div>
      </div>
    </header>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
          <section class="post-content">
            <p>最近看完了《精通正则表达式》的前面和语言无关的几章，也正好碰到了一个知乎问题，所以就强行答了一下。<a href="https://www.zhihu.com/question/59126490/answer/165253638">如何理解先行断言</a></p>
<p>把我的回答再总结一下。
(?=)在《精通正则表达式》书上叫“环视”，具体上说叫“顺序肯定环视”。环视不占有字符，只作为判断的条件进行匹配。</p>
<p>1，具体如下这个例子</p>
<div class="highlight"><pre><span></span><code><span class="o">^</span><span class="p">(</span>?<span class="o">=.*</span>\<span class="nv">d</span><span class="p">)(</span>?<span class="o">=.*</span><span class="p">[</span><span class="nv">A</span><span class="o">-</span><span class="nv">Z</span><span class="p">])</span>\<span class="nv">w</span><span class="p">{</span><span class="mi">8</span><span class="p">,</span><span class="mi">15</span><span class="p">}$</span>
</code></pre></div>

<p>先来刨去两个(?=)环视条件</p>
<div class="highlight"><pre><span></span><code><span class="o">^</span>\<span class="nv">w</span><span class="p">{</span><span class="mi">8</span><span class="p">,</span><span class="mi">15</span><span class="p">}$</span>
</code></pre></div>

<p>这个很好理解，即^匹配初试位置锚点，\w匹配各种文字字符（我理解就是字母数字文字等），{8，15}前面字符\w的数量8-15个，最后$是末位置锚点。整体上就是匹配一个从初始到结束为8-15位全文字字符的字符串。</p>
<p>现在加上(?=)</p>
<p>第一个(?=.<em>\d)，括号位置在^之后，表示从初始锚点这个位置开始匹配，.</em>匹配各种字符直到末位，后跟\d表示匹配数字，这时需要回溯寻找为数字的位置，如果回溯到有数字的位置，那么匹配成功。所以这个环视表达式的意思是，如果从锚点的位置后面有含数字的字符则匹配成功，满足条件，否则不满足。</p>
<p>那么第二个也是同样道理，(?=.*[A-Z])，表示如果从初始锚点位置后面存在大写字母字符，则匹配成功，满足条件。这里注意一下，环视不占有字符，所以，即使这个环视表达式在后面，也同样是在其位置^之后开始匹配检查。</p>
<p>最后把两个环视条件都加上，整个表达式的意思就是一个从初始到结束为8-15位的全文字字符且必须含有至少一个数字字符和至少一个大写字母字符的字符串。</p>
<p>2，(?=...)环视表达式如何理解</p>
<p>我个人理解就是把这个看成一个条件表达式，是整体匹配成功的必须要满足的条件。</p>
<p>(?=...)为顺序肯定环视，其他三个环视意思类似。这个表达式从括号的所在的匹配位置开始进行匹配判断，并且不占用匹配字符，即，括号后面的匹配位置不变。</p>
<p>看完这本正则书后，虽然很多特定的匹配符号和字符没有完全能够记住，但是从比较深层次的角度来理解正则表达式的匹配过程，了解正则逐字符的匹配过程，回溯等过程。感觉这样对于思考和分析整个正则表达式的细节非常有帮助。</p>
          </section>


          <section class="post-footer" >
            <div class="post-share">
              <span class="post-info-label">Share</span>
              <a title="Twitter" aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=正则表达式环视的理解&amp;url=https://bobobo80.com/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="icon icon-twitter" aria-hidden="true"></i><span class="hidden">Twitter</span>
              </a>
              <a title="Facebook" aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://bobobo80.com/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="icon icon-facebook" aria-hidden="true"></i><span class="hidden">Facebook</span>
              </a>
              <a title="LinkedIn" aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://bobobo80.com/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html&amp;title=正则表达式环视的理解" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;">
                <i class="icon icon-linkedin" aria-hidden="true"></i><span class="hidden">LinkedIn</span>
              </a>
              <a title="Email" aria-label="Email" class="email" href="mailto:?subject=正则表达式环视的理解&amp;body=https://bobobo80.com/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html">
                <i class="icon icon-mail" aria-hidden="true"></i><span class="hidden">Email</span>
              </a>
              <div class="clear"></div>
            </div>

            <aside class="post-tags">
<a href="https://bobobo80.com/tag/zheng-ze.html">正则</a>            </aside>

            <div class="clear"></div>


          </section>


          <div id="sssc-iframe-container"
            data-host="https://comment.bobobo80.com"
            data-slug="/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html"
            data-url="https://bobobo80.com/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html"
            data-title="正则表达式环视的理解">
          </div>
          <script async src="https://comment.bobobo80.com/dist/js/sssc.js"></script>

          <aside class="post-nav">
            <div class="clear"></div>
          </aside>

        </div>
      </article>
    </main>
    <div class="nav-footer">
      <nav class="nav-wrapper" aria-label="Footer">
        <span class="nav-copy">On the wing 展翼 &copy; 2023
        </span>
        <span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> &bull; Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> &bull;
          <a class="menu-item js-theme" href="#" data-system="System theme" data-dark="Dark theme" data-light="Light theme">
            <span class="theme-icon"></span><span class="theme-text">System theme</span>
          </a>
        </span>
      </nav>
    </div>

  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  <script type="text/javascript" src="https://bobobo80.com/theme/js/jquery.fitvids.js"></script>
  <script type="text/javascript" src="https://bobobo80.com/theme/js/script.js"></script>

    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NVEBH5JMJB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-NVEBH5JMJB', { 'anonymize_ip': true });
    </script>

  <!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->

<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    var mdSelector=".highlight pre";
    var rstSelector=".highlight pre";
    var selector=mdSelector;
    // Format code blocks and add line numbers
    function codestyling() {
      $(selector).each(function(i, e) {
        // Code highlight
        hljs.highlightElement(e);
        // No lines for plain text blocks
        if (!$(this).hasClass('language-text')) {
          var code = $(this);
          // Calculate amount of lines
          var lines = code.html().split(/\n(?!$)/g).length;
          var numbers = [];
          if (lines > 1) {
            lines++;
          }
          for (i = 1; i < lines; i++) {
            numbers += '<span class="line" aria-hidden="true">' + i + '</span>';
          }
          code.parent().append('<div class="lines">' + numbers + '</div>');
        }
      });
    }

    // Format code blocks only
    function codestylingWithoutLineNumbers() {
      $(selector).each(function(i, e) {
        // Code highlight
        hljs.highlightElement(e);
      });
    }

    codestylingWithoutLineNumbers();
    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>

</html>