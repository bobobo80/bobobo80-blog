<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>On the wing å±•ç¿¼ - Tech</title><link href="https://bobobo80.com/" rel="alternate"></link><link href="https://bobobo80.com/feeds/tech.atom.xml" rel="self"></link><id>https://bobobo80.com/</id><updated>2024-06-27T00:00:00+08:00</updated><entry><title>ä¸€ä¸ªç®€å•çš„è¯„è®ºç³»ç»Ÿ</title><link href="https://bobobo80.com/2024/yi-ge-jian-dan-de-ping-lun-xi-tong.html" rel="alternate"></link><published>2024-06-27T00:00:00+08:00</published><updated>2024-06-27T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2024-06-27:/2024/yi-ge-jian-dan-de-ping-lun-xi-tong.html</id><summary type="html">&lt;p&gt;åœ¨è®¾ç½®å¥½&lt;a href="https://bobobo80.com/2021/pelicanji-cheng-disqus.html"&gt;pelicançš„disqus&lt;/a&gt;åï¼Œä¸€ä¸ªå°å°çš„ç§å­å°±åŸ‹åœ¨å¿ƒé‡Œäº†ã€‚åº”è¯¥è‡ªå·±æä¸€ä¸ªè¯„è®ºç³»ç»Ÿå•Šã€‚éšç€å†æ¬¡ï¼ˆç¬¬næ¬¡äº†ï¼‰æ¢å¤å†™åšå®¢ï¼Œä»¥åŠçœ‹åˆ°disqusé‚£ä¸å¿ç›´è§†çš„å¹¿å‘Šï¼Œé‚£ä¹ˆ...èº â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;åœ¨è®¾ç½®å¥½&lt;a href="https://bobobo80.com/2021/pelicanji-cheng-disqus.html"&gt;pelicançš„disqus&lt;/a&gt;åï¼Œä¸€ä¸ªå°å°çš„ç§å­å°±åŸ‹åœ¨å¿ƒé‡Œäº†ã€‚åº”è¯¥è‡ªå·±æä¸€ä¸ªè¯„è®ºç³»ç»Ÿå•Šã€‚éšç€å†æ¬¡ï¼ˆç¬¬næ¬¡äº†ï¼‰æ¢å¤å†™åšå®¢ï¼Œä»¥åŠçœ‹åˆ°disqusé‚£ä¸å¿ç›´è§†çš„å¹¿å‘Šï¼Œé‚£ä¹ˆ...èºåŠ¨çš„å¿ƒèµ·æ¥äº†ï¼æ¥å§ï¼&lt;/p&gt;
&lt;h1&gt;ç«å“&lt;/h1&gt;
&lt;p&gt;å…¶å®ä¸èƒ½ç®—ç«å“ï¼Œå› ä¸ºå½¢æˆä¸äº†ç«äº‰å…³ç³»ã€‚å¸‚é¢ä¸Šå·²ç»æœ‰ä¸å°‘äº‘äº§å“æˆ–è‡ªéƒ¨ç½²çš„è¯„è®ºç³»ç»Ÿäº†ï¼Œå¦‚æœåªæ˜¯è¦æ›¿æ¢disqusï¼Œé‚£å…¶å®è‚¯å®šæ˜¯é€‰å¦ä¸€ä¸ªå·²æœ‰äº§å“ã€‚é¦–å…ˆè‚¯å®šæ˜¯è‡ªéƒ¨ç½²äº†ï¼Œâ€œè‡ªä¸»å¯æ§â€ã€‚è¿™é‡Œé¢å¥½åƒæ¯”è¾ƒæœ‰åçš„æ˜¯goå®ç°çš„&lt;a href="https://remark42.com"&gt;remark42&lt;/a&gt;å’Œpythonå®ç°çš„&lt;a href="https://isso-comments.de"&gt;Isso&lt;/a&gt;ï¼ŒåŒæ—¶æˆ‘è§‰å¾—ä¸é”™çš„è¿˜æœ‰&lt;a href="https://artalk.js.org"&gt;artalk&lt;/a&gt;ç•Œé¢å¾ˆå¥½çœ‹ã€‚
ä¸è¿‡è¿™äº›é¡¹ç›®éƒ½æ¯”è¾ƒå¤æ‚äº†ï¼Œè‡ªå·±é€ è½®å­æ¯”è¾ƒå›°éš¾ï¼Œæˆ‘çš„éœ€æ±‚ä¹Ÿåªæ˜¯ä¸ªç•™è¨€æ¿ï¼Œåæ­£ä¹Ÿæ²¡æœ‰äººè¯„è®ºå•Šã€‚åæ¥æˆ‘åˆå‘ç°äº†&lt;a href="https://cusdis.com"&gt;cusdis&lt;/a&gt;è¿™ä¸ªå…¶å®æ˜¯æ»¡è¶³æˆ‘çš„éœ€æ±‚çš„ï¼Œç®€å•æœ‰æ•ˆã€‚ä½œè€…Randyè¿˜æ˜¯æ’­å®¢ä»£ç ä¹‹å¤–çš„ä¸»æ’­ã€‚cusdisç°åœ¨è¿˜æä¾›äº‘æœåŠ¡ã€‚cusdisæ˜¯ä½¿ç”¨nextjså’Œsvetleå®ç°å‰åç«¯çš„ï¼Œéƒ½æ˜¯æˆ‘ä¸ä¼šçš„ã€‚
ä¸ç®¡æ€æ ·ï¼ŒğŸ›è¿˜æ˜¯è¦é€ çš„ï¼Œä¸€æ–¹é¢æ˜¯å®ç°éœ€æ±‚ï¼Œå¦ä¸€æ–¹é¢æ˜¯é€šè¿‡è¿™ä¸ªç®€å•çš„é¡¹ç›®éªŒè¯è‡ªå·±çš„ä¸€äº›æŠ€æœ¯æ ˆæƒ³æ³•ã€‚&lt;/p&gt;
&lt;h1&gt;åŠŸèƒ½å–èˆ&lt;/h1&gt;
&lt;p&gt;ç¬¬ä¸€æ­¥å…ˆå†™PRDæ˜¯ä¸æ˜¯ï¼Ÿæœ€åŸºæœ¬åŠŸèƒ½è¦æœ‰ï¼Œå†…åµŒåˆ°ç›®æ ‡é¡µé¢ï¼Œæ ¹æ®å†…åµŒé¡µé¢çš„urlï¼Œæ˜¾ç¤ºä¸åŒçš„è¯„è®ºï¼Œç„¶åè®¿é—®è€…å¯ä»¥æäº¤è¯„è®ºã€‚
è¿™é‡Œé¢ï¼Œç”¨æˆ·ç™»é™†æ€æ˜¯æ¯”è¾ƒä¸å¥½å¤„ç†ï¼Œæˆ–è€…è®©é€»è¾‘å¤æ‚çš„éƒ¨åˆ†ï¼ŒåŒæ—¶åœ¨è¯„è®ºè¿™ä¸ªåœºæ™¯ï¼Œæˆ‘è§‰å¾—éœ€æ±‚ä¹Ÿä¸æ˜¯é‚£ä¹ˆé‡è¦ï¼Œæ‰€ä»¥é¦–å…ˆå»æ‰ï¼Œä¸€å¾‹åŒ¿åè¯„è®ºï¼Œå¯ä»¥ä»»æ„å¡«å†™ç”¨æˆ·åå’Œé‚®ç®±ï¼Œé åå°å®¡æ ¸æ¥ç¡®ä¿åƒåœ¾è¯„è®ºã€‚è¿™ç‚¹æ˜¯å’Œcusdisä¸€æ ·çš„ï¼Œä¸è¿‡æˆ‘çœ‹ä½œè€…çš„dbç»“æ„æ˜¯æœ‰ä¸€äº›user providerå­—æ®µçš„ï¼Œå¯èƒ½æ˜¯æƒ³åç»­æ”¯æŒè¿™ä¸ªåŠŸèƒ½ã€‚
è¿˜æœ‰ä¸€ä¸ªåœ°æ–¹å¯ä»¥ç®€åŒ–ï¼Œå°±æ˜¯å¤šç«™ç‚¹æ”¯æŒã€‚ç›®å‰çš„è¿™äº›ç³»ç»Ÿéƒ½æ”¯æŒå¤šä¸ªç«™ç‚¹ï¼Œå°±æ˜¯ä½ éƒ¨ç½²å¥½è¯„è®ºç³»ç»Ÿï¼Œå¯ä»¥æ”¯æŒç»™å¤šä¸ªä¸åŒç½‘ç«™æ¥ä½¿ç”¨ï¼Œæˆ‘ä¸ç¡®å®šä»–ä»¬çš„ç®¡ç†å‘˜ç”¨æˆ·ç³»ç»Ÿæ˜¯å¦ä¹Ÿæ”¯æŒä¸åŒç«™ç‚¹ä¸åŒç®¡ç†å‘˜ã€‚æ€»ä¹‹ï¼Œè¿™ä¸ªåœ°æ–¹æ˜¯å¯ä»¥ç®€åŒ–çš„ï¼Œå°±åªæœ‰ä¸€ä¸ªç®¡ç†å‘˜ï¼Œåªæœ‰ä¸€ä¸ªç«™ç‚¹ï¼ˆå½“ç„¶å¯ä»¥é€šè¿‡å®Œæ•´urlæ¥åŒºåˆ†ä¸åŒçš„ç«™ç‚¹ï¼‰ã€‚
è‡³äºåƒåœ¾è¿‡æ»¤ï¼Œé‚®ä»¶æˆ–æ¶ˆæ¯é€šçŸ¥ï¼Œè¿™äº›åˆšå¼€å§‹ä¹Ÿæ˜¯æ²¡æœ‰çš„ï¼Œåé¢çœ‹éœ€æ±‚äº†ã€‚æˆ‘çœ‹akismetå¹¶ä¸ä¾¿å®œå•Šï¼Œä»¥åè°ƒç”¨AI chatæ¥å£æ€ä¹ˆæ ·ï¼Ÿ&lt;/p&gt;
&lt;h1&gt;æŠ€æœ¯æ ˆ&lt;/h1&gt;
&lt;p&gt;ä¹‹å‰è¯´äº†ï¼ŒæŠ€æœ¯éªŒè¯ä¹Ÿæ˜¯é‡è¦çš„ä¸€æ–¹é¢ã€‚æˆ‘æƒ³éªŒè¯ä¸€å¥—go+sqlite+htmxæ­å»ºå°å‹æœåŠ¡çš„æµç¨‹ã€‚è¿™é‡Œé¢goè™½ç„¶ä¸Šç­ç”¨ï¼Œä½†æ˜¯ä¸å†™httpæœåŠ¡ï¼Œormä¹Ÿä¸ç”¨çš„å¤§ä¼—åº“ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾ˆä¸ä¸€æ ·çš„ã€‚sqliteï¼Œä¹Ÿæ²¡ç”¨è¿‡ã€‚htmxï¼Œå°±æ›´æ²¡ç”¨è¿‡äº†ã€‚&lt;/p&gt;
&lt;h2&gt;gin&lt;/h2&gt;
&lt;p&gt;httpæ¡†æ¶goæœ‰ä¸å°‘ï¼Œè¿™ä¸ªå…ˆé€‰ä¸ªå¤§ä¼—çš„ï¼Œå› ä¸ºè¿™æ–¹é¢æˆ‘è§‰å¾—å…ˆæ²¡æœ‰å¤ªå¤§ä»·å€¼æ¥æŠ˜è…¾ï¼Œæ‰¾ä¸€ä¸ªå‡ºäº†é—®é¢˜å¥½è§£å†³çš„ï¼Œæ’ä»¶ä¸­é—´ä»¶ä¹Ÿä¼šæ¯”è¾ƒä¸°å¯Œã€‚&lt;/p&gt;
&lt;h2&gt;entgo&lt;/h2&gt;
&lt;p&gt;dbè¿æ¥æ–¹é¢ï¼Œæˆ‘è§‰å¾—å°é¡¹ç›®æœ‰ä¸¤ä¸ªæç«¯æ–¹å‘ï¼Œè¦ä¹ˆè£¸å†™sqlæˆ–æ¥è¿‘è£¸å†™sqlï¼Œè¦ä¹ˆç”¨ä¸€ä¸ªå¤§è€Œå…¨çš„æ¡†æ¶ã€‚åŸå› æ˜¯è¦ä¹ˆé¡¹ç›®ç®€å•ï¼Œå‡ å¥sqlèƒ½å®Œæˆéœ€æ±‚ï¼Œé‚£ä¹ˆè£¸å†™sqlå°±å¯ä»¥ç®€åŒ–ä»£ç ç»“æ„ï¼Œç®€åŒ–é€»è¾‘ã€‚è€Œä¸ºä»€ä¹ˆæœ‰å¤§è€Œå…¨çš„ormå‘¢ï¼ŸåŒæ ·æ˜¯å°é¡¹ç›®éœ€æ±‚ç®€å•ï¼Œormå¯ä»¥æä¾›å¿«é€Ÿçš„å®ç°åŠŸèƒ½ï¼Œä¸å¿…å…³å¿ƒdbç±»å‹/è¿ç§»ç­‰ï¼Œä¸ç”¨å»å…³å¿ƒä¸€äº›ormçš„é—®é¢˜ï¼Œæ€§èƒ½å•Š/å¤æ‚æŸ¥è¯¢/è‡ªç”±åº¦ç­‰ã€‚
æˆ‘æš‚æ—¶é€‰æ‹©ormæ–¹æ¡ˆï¼Œå› ä¸ºæˆ‘çš„æ—¶é—´ä¸å¤šï¼Œå¿«é€Ÿå®ç°åŠŸèƒ½è¿˜æ˜¯é¦–è¦ç›®æ ‡ã€‚è¿™é‡Œé€‰æ‹©&lt;a href="https://entgo.io/zh/"&gt;entgo orm&lt;/a&gt;ï¼Œå¯èƒ½ä¸å¦‚gormç”¨çš„äººå¤šï¼ˆä»aiä»£ç è¡¥å…¨ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œåˆ°äº†ormçš„æ—¶å€™ï¼Œç»å¸¸å¡«å……çš„ä¸å¯¹ï¼‰ï¼Œä¸è¿‡æˆ‘è§‰å¾—æ¯”è¾ƒå¥½ç”¨ï¼Œå‡½æ•°è°ƒç”¨é£æ ¼æˆ‘è§‰å¾—æŒºå¥½çš„ã€‚
dbè¿™å—æˆ‘è§‰å¾—è¿˜æ˜¯å¯ä»¥å†ç ”ç©¶ä¸€ä¸‹åˆé€‚çš„è§£å†³æ–¹æ¡ˆçš„ï¼Œå› ä¸ºç›®æ ‡æ˜¯åªé¢å‘sqliteï¼Œæ‰€ä»¥å¦‚æœæœ‰æ›´æœ‰é’ˆå¯¹æ€§çš„åº“ï¼Œé‚£æ˜¯æœ€å¥½çš„ã€‚&lt;/p&gt;
&lt;h2&gt;sqlite&lt;/h2&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆæ˜¯sqliteå‘¢ï¼Ÿå…¶å®æˆ‘ä¹Ÿä¸ç†Ÿæ‚‰ï¼Œå·¥ä½œä¸­ä¸€ç›´æ˜¯mysqlï¼Œç„¶åå…¶å®æœ€è¿‘postgresqlä¹Ÿå¾ˆç«ã€‚ä½†æ˜¯å¯¹äºå°å‹webåº”ç”¨æ¥è¯´ï¼Œæˆ‘è§‰å¾—sqliteè¿˜æ˜¯æœ‰å¾ˆå¤§ä¾¿æ·æ€§çš„ï¼Œå¯¹äºä¸ªäººé¡¹ç›®æ¥è¯´ï¼Œsqliteå¯ä»¥è®©å¤æ‚æ€§é™ä½ï¼Œç„¶åæœ€åçš„äº§å“ä¹Ÿä¼šå¾ˆç®€æ´ã€‚ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰å¬è¯´è¿‡&lt;a href="https://pocketbase.io"&gt;pocketbase&lt;/a&gt;ï¼Œç›¸å½“äºsqliteç‰ˆçš„&lt;a href="https://supabase.com"&gt;supabase&lt;/a&gt;ï¼Œç®—æ˜¯ä¸€ç§headless cmsã€‚é…åˆgoï¼Œç¼–è¯‘å‡ºä¸€ä¸ªæ–‡ä»¶ä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œéå¸¸ç®€æ´ã€‚åŠ ä¸Šsqliteï¼Œä¸€ä¸ªdbä¸€ä¸ªbinï¼Œä¸¤ä¸ªæ–‡ä»¶ç›´æ¥å¸¦èµ°ã€‚
sqliteç”Ÿæ€è¿˜æœ‰ä¸å°‘æœ‰è¶£çš„é¡¹ç›®ï¼Œæ¯”å¦‚è¿™ä¸ªlitestreamï¼Œåˆ©ç”¨sqliteçš„walæ¨¡å¼ï¼ŒæŠŠå¢é‡æ•°æ®å¤‡ä»½åˆ°s3ï¼Œæ¥å®ç°å‡†å®æ—¶å¢é‡å¤‡ä»½ã€‚æˆ‘ä¹Ÿæ‰“ç®—æŠŠè¿™ä¸ªé›†æˆè¿›æˆ‘çš„æŠ€æœ¯æ ˆé‡Œã€‚
è¿˜æœ‰çœ‹èµ·æ¥å·²ç»å®ç°åˆ†å¸ƒå¼åŠŸèƒ½çš„&lt;a href="https://turso.tech/libsql"&gt;libsql&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2&gt;htmx&lt;/h2&gt;
&lt;p&gt;å‰ç«¯æˆ‘reactå’Œvueæˆ‘éƒ½è¿‡è¿‡ä¸€édocçš„tutorialï¼Œä½†æ˜¯æ„Ÿè§‰ç¦»å®é™…ä½¿ç”¨è¿˜å·®å¾ˆè¿œã€‚è€ŒåŒæ—¶ï¼Œå¦‚æœè¦åšä¸ªé¡µé¢ï¼Œæˆ‘è§‰å¾—å…³é”®å¥½åƒæ˜¯åœ¨cssï¼Œè¿™æ–¹é¢çœŸæ˜¯éš¾çš„ä¸€æ‰¹ã€‚å¥½åœ¨ç°åœ¨aiä¹Ÿå¯ä»¥åœ¨è¿™æ–¹é¢æœ‰æ‰€å¸®åŠ©äº†ï¼Œtailwindcssåœ¨åˆ›å»ºæ—¶æœ‰æƒ³åˆ°aiè®©å®ƒçš„æµè¡Œåº¦å†ä¸Šä¸€ä¸ªå°é˜¶å—ï¼Ÿ
æ—¢ç„¶å‰ç«¯å­¦ä¸ä¼šï¼Œé‚£å°±ç”¨åç«¯çš„æ–¹å¼æ¥ã€‚ä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ï¼Œ&lt;a href="https://htmx.org"&gt;htmx&lt;/a&gt;è¿™ä¸ªåº“ç«äº†ï¼Œä»æˆ‘çš„ä½“éªŒæ¥è¯´ï¼Œä½¿ç”¨ä½“éªŒçœŸçš„ä¸é”™ã€‚å’Œä¼ ç»Ÿçš„åç«¯æ¨¡ç‰ˆå·¥ä½œæµè¿˜æ˜¯ç•¥æœ‰ç‚¹åŒºåˆ«ï¼Œä½†æ˜¯å¾ˆæ¥è¿‘ã€‚ä¸€æ—¦ä½ é€‚åº”äº†è¿™å¥—å·¥ä½œæ¨¡å¼ï¼Œä¼šå¾ˆé¡ºç•…ã€‚å½“ç„¶äº†ï¼Œå®ƒä¹Ÿæ˜¯â€œåèŒƒå¼â€çš„ï¼Œåœ¨local firstçš„å½“ä¸‹ï¼Œå®ƒæ˜¯ä¸€ç‚¹ä¹Ÿä¸localï¼Œè¿æ˜¾ç¤ºéšè—è¿™è¿™ç§åŠŸèƒ½ä¹Ÿæ²¡æœ‰ï¼ˆè‡³å°‘æˆ‘æ²¡æ‰¾åˆ°ï¼‰ã€‚ä¸ºäº†ç‚¹å‡»replyæ˜¾ç¤ºå›å¤æ¡†ï¼Œæˆ‘åˆå¼•å…¥äº†&lt;a href="https://alpinejs.dev"&gt;alpinejs&lt;/a&gt;ï¼Œæ˜¯çš„ï¼Œåˆæ˜¯ä¸€ä¸ªä¸å†™jsçš„åº“ã€‚å®ƒä»¬ä¸¤ä¸ªè¿˜æ˜¯æŒºæ­é…çš„ï¼Œä¸€ä¸ªè´Ÿè´£ç½‘ç»œè¯·æ±‚ï¼Œä¸€ä¸ªè´Ÿè´£æœ¬åœ°çš„åŠ¨æ€å“åº”ã€‚ä¸€èµ·ä½¿ç”¨å¯ä»¥åœ¨ä¸å†™jsçš„æƒ…å†µä¸‹å®Œæˆé¡µé¢åŠŸèƒ½ã€‚
goæ–¹é¢è¿˜å¯ä»¥é…åˆ&lt;a href="https://github.com/a-h/templ"&gt;templ&lt;/a&gt;è¿™ä¸ªåº“ï¼Œè¿™ç›¸å½“äºç”¨goè¯­æ³•æ¥å†™htmlï¼Œæœ‰ç‚¹reactçš„æ„Ÿè§‰ï¼Œå½“ç„¶ä»…ä»…æ˜¯æ¨¡ç‰ˆæ¸²æŸ“æ–¹é¢ï¼Œä¸åŒ…å«åŠ¨æ€çš„æ•°æ®å¤„ç†ã€‚&lt;/p&gt;
&lt;h2&gt;tailwindcss &amp;amp; daisy ui&lt;/h2&gt;
&lt;p&gt;é¡µé¢uiè¿™å—æ˜¯çœŸä¸ä¼šã€‚æˆ‘ç…§ç€cusdiså¼€å§‹å†™divï¼Œæ…¢æ…¢é—®aiäº†è§£å„ä¸ªclassæ˜¯ä»€ä¹ˆæ„æ€ï¼Œç„¶åä¿®æ”¹ã€‚è¿™å—æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚&lt;/p&gt;
&lt;h1&gt;åŠŸèƒ½&lt;/h1&gt;
&lt;p&gt;ç›®å‰å°±åªæœ‰ç•™è¨€å’Œæ˜¾ç¤ºç•™è¨€å’Œå®¡æ‰¹ç•™è¨€çš„åŸºæœ¬åŠŸèƒ½ã€‚dockerfileè¿˜åœ¨è°ƒè¯•ï¼Œautotlsæˆ‘è¿˜æ²¡æœ‰æµ‹è¯•æˆåŠŸï¼Œreadmeæ²¡æœ‰å†™ï¼Œé¡µé¢é«˜åº¦è‡ªåŠ¨è°ƒæ•´è¿˜æœ‰é—®é¢˜ï¼Œè¿˜å·®å¾ˆå¤šä¸œè¥¿ã€‚æœªæ¥æƒ³é›†æˆliteatreamè‡ªåŠ¨å¤‡ä»½dbæ•°æ®ï¼Œé»‘ç™½ä¸»é¢˜ï¼Œè‡ªå®šä¹‰primary colorï¼ˆçœ‹äº†vergeçš„è¯„è®ºåŒºï¼Œæ„Ÿè§‰é‚£æ¡ç´«çº¿å¾ˆå¥½çœ‹ï¼‰ï¼Œé€šçŸ¥ï¼Œè‡ªåŠ¨åƒåœ¾è¿‡æ»¤ï¼Ÿæ›´æ–¹ä¾¿çš„åˆå§‹åŒ–ï¼Œè¯„è®ºæ•°æ¥å£ç­‰ç­‰å§ã€‚&lt;/p&gt;</content><category term="Tech"></category></entry><entry><title>ä½¿ç”¨continueæ›¿ä»£github copilot</title><link href="https://bobobo80.com/2024/shi-yong-continueti-dai-github-copilot.html" rel="alternate"></link><published>2024-06-07T00:00:00+08:00</published><updated>2024-06-07T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2024-06-07:/2024/shi-yong-continueti-dai-github-copilot.html</id><summary type="html">&lt;p&gt;æ¥äº†ï¼Œåˆè¦å‘æ–°ä¸€ç¯‡åšå®¢äº†ã€‚è¿™æ¬¡æ¥è®²ä¸€ä¸‹æœ€è¿‘ä½¿ç”¨&lt;a href="https://www.continue.dev"&gt;continue.dev&lt;/a&gt;æ›¿ä»£&lt;a href="https://github.com/features/copilot"&gt;github copilot&lt;/a&gt;çš„ä½¿ç”¨æ„Ÿå—ã€‚&lt;/p&gt;
&lt;h1&gt;èƒŒæ™¯&lt;/h1&gt;
&lt;p&gt;æœ¬æ¥æˆ‘æ˜¯è®¢é˜…çš„github copilotï¼Œæ¯æœˆ10åˆ€ã€‚è™½ç„¶æˆ‘çš„ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;æ¥äº†ï¼Œåˆè¦å‘æ–°ä¸€ç¯‡åšå®¢äº†ã€‚è¿™æ¬¡æ¥è®²ä¸€ä¸‹æœ€è¿‘ä½¿ç”¨&lt;a href="https://www.continue.dev"&gt;continue.dev&lt;/a&gt;æ›¿ä»£&lt;a href="https://github.com/features/copilot"&gt;github copilot&lt;/a&gt;çš„ä½¿ç”¨æ„Ÿå—ã€‚&lt;/p&gt;
&lt;h1&gt;èƒŒæ™¯&lt;/h1&gt;
&lt;p&gt;æœ¬æ¥æˆ‘æ˜¯è®¢é˜…çš„github copilotï¼Œæ¯æœˆ10åˆ€ã€‚è™½ç„¶æˆ‘çš„ä½¿ç”¨é¢‘ç‡å¾ˆä½ï¼Œä¸è¿‡æˆ‘è§‰å¾—è¿˜ç‰©æœ‰æ‰€å€¼ã€‚ä¸è¿‡å› ä¸ºå…¶ä»–ä¸€äº›åŸå› ï¼Œæˆ‘è¿˜è¦ä½¿ç”¨å¦ä¸€ä¸ªgithubè´¦å·ï¼Œæ‰€ä»¥å°±å¯¼è‡´å¦ä¸€ä¸ªè´¦å·æ— æ³•ä½¿ç”¨copilotï¼Œå†ä¹°ä¸€ä»½å°±æœ‰ç‚¹è´µäº†ã€‚äºæ˜¯æˆ‘çœ‹äº†ä¸€ä¸‹ä½¿ç”¨å…¶ä»–æ’ä»¶æ˜¯ä¸æ˜¯ä¹Ÿèƒ½è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚&lt;/p&gt;
&lt;h1&gt;è¯•ç”¨&lt;/h1&gt;
&lt;p&gt;æˆ‘è¯•äº†è¿™ä¹ˆå‡ æ¬¾vs codeæ’ä»¶å’Œä½¿ç”¨ai llmæ¥è¿›è¡Œä»£ç è¡¥å…¨å’Œé—®ç­”çš„æ’ä»¶ã€‚
- &lt;a href="https://www.continue.dev"&gt;continue.dev&lt;/a&gt;
- &lt;a href="https://tabby.tabbyml.com"&gt;TabbyML&lt;/a&gt;
- &lt;a href="https://github.com/rjmacarthy/twinny"&gt;twinny&lt;/a&gt;
- &lt;a href="https://github.com/srikanth235/privy"&gt;privy&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™å‡ ä¸ªåº”è¯¥æ˜¯å¼€æºçš„æ”¯æŒè‡ªå®šä¹‰apiçš„ä»£ç è¡¥å…¨å’Œé—®ç­”çš„æ’ä»¶ã€‚è¿™é‡Œé¢privyæ˜¯ä¸»æ‰“æœ¬åœ°æ¨¡å‹ï¼Œä¸è”ç½‘ã€‚è€ŒTabbyæ˜¯å›¢é˜Ÿè‡ªéƒ¨ç½²æ¨¡å‹æœåŠ¡ï¼Œè¿˜å¸¦ä¸€ä¸ªåå°ç®¡ç†ç³»ç»Ÿã€‚twinnyçœ‹æ–‡æ¡£ï¼Œå…¶ç›®çš„ä¹Ÿæ˜¯ä¸»è¦ç”¨äºè¿æ¥è‡ªå»ºollamaæ¨¡å‹ï¼Œprovideré‡Œéƒ½æ²¡æœ‰openaiï¼Œä¸è¿‡æ”¯æŒlitellmï¼Œå¯ä»¥é—´æ¥è½¬å‘ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥åŸºæœ¬åªå‰©ä¸‹ä¸€å®¶continueäº†ã€‚continueå¯ä»¥è¯´æ˜¯ä¸€ä¸ªé«˜åº¦è‡ªå®šä¹‰çš„æ’ä»¶äº†ï¼Œå³å¯æ¥å…¥å¤–éƒ¨äº‘æœåŠ¡çš„aiæ¥å£ï¼Œä¹Ÿæ”¯æŒollamaæˆ–ç±»ä¼¼æœ¬åœ°æˆ–å†…éƒ¨ç½‘ç»œçš„llm apiã€‚ä¸è¿‡ç›®å‰ä»£ç è¡¥å…¨éƒ¨åˆ†è¿˜æ˜¯betaé˜¶æ®µã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–è¿˜æœ‰ä¸€äº›æ’ä»¶ï¼Œæ¯”å¦‚bç«™ä¸Šè¯´çš„æ¯”è¾ƒå¤šçš„codegptï¼Œä¹Ÿæ˜¯æ”¯æŒæœ¬åœ°å’Œçº¿ä¸ŠæœåŠ¡ã€‚ä½†æ˜¯æ˜¯é—­æºçš„ï¼Œå°±æ²¡æœ‰è¯•ç”¨ã€‚&lt;/p&gt;
&lt;h1&gt;æœ¬åœ°ollama&lt;/h1&gt;
&lt;p&gt;å› ä¸ºæˆ‘çš„ç”µè„‘é…ç½®å¾ˆå·®ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨å…¬å¸çš„ç”µè„‘ä¹Ÿæµ‹è¯•äº†ä¸€ä¸‹æœ¬åœ°&lt;a href="https://ollama.com"&gt;ollama&lt;/a&gt;çš„æ•ˆæœï¼Œä½†æ˜¯å…¬å¸çš„MBP2019é…ç½®ä¹Ÿå¥½ä¸åˆ°å“ªå»ï¼Œæ‰€ä»¥æ•ˆæœä¹Ÿä¸æ˜¯å¾ˆå¥½ã€‚ä½¿ç”¨6.7bçš„&lt;a href="https://ollama.com/library/deepseek-coder:6.7b"&gt;deepseek coder instruct&lt;/a&gt;å›ç­”ä»£ç é—®é¢˜ï¼Œè¦4-5åˆ†é’Ÿã€‚æ›´å´©æºƒçš„æ˜¯ä½¿ç”¨1bçš„&lt;a href="https://ollama.com/library/starcoder"&gt;starcoder&lt;/a&gt;åšä»£ç è¡¥å…¨ï¼Œåˆå§‹é€Ÿåº¦æ˜¯10-20sã€‚ç„¶åä»£ç æ•²èµ·æ¥ä¹‹åå¤šå¹¶å‘ä¼šæ…¢åˆ°4ï¼Œ5åˆ†é’Ÿæ‰å‡ºç»“æœï¼Œæ ¹æœ¬æ— æ³•ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h1&gt;continueä½¿ç”¨æƒ…å†µ&lt;/h1&gt;
&lt;p&gt;åŸºæœ¬ä¸Šæ‰€æœ‰æ’ä»¶éƒ½æ˜¯åˆ†ä¸¤ä¸ªæ¥å£ï¼Œä¸€ä¸ªæ˜¯é—®ç­”çš„ï¼Œä¸€ä¸ªè¡¥å…¨ä»£ç çš„ï¼Œcontinueä¹Ÿä¸€æ ·ã€‚è¿™æ˜¯å› ä¸º&lt;a href="https://docs.continue.dev/walkthroughs/tab-autocomplete#i-want-better-completions-should-i-use-gpt-4"&gt;å¸¸è§„çš„llmæ²¡æœ‰å¯¹ä»£ç è¡¥å…¨è¿™ç§å½¢å¼åšå¾®è°ƒï¼Œå¯èƒ½æ•ˆæœå¹¶ä¸å¥½&lt;/a&gt;ï¼Œæ‰€ä»¥ä¼šå•ç‹¬è®¾ç½®ä¸€ä¸ªç»™ä»£ç è¡¥å…¨çš„ä¸“é—¨çš„æ¨¡å‹ã€‚
é—®ç­”å‹å¯ä»¥æœ‰å¤šç§æ¨¡å¼ï¼Œæ¯”å¦‚chatgptå¼çš„é—®ï¼Œæˆ–è€…åµŒå¥—ä¸€ä¸ªæ¨¡ç‰ˆï¼Œæ¥é‡æ„ä»£ç ï¼Œå†™æµ‹è¯•ï¼Œä¿®æ”¹ç­‰ã€‚è€Œä»£ç è¡¥å…¨å°±å’Œæœ€æ—©çš„copilotä¸€æ ·ï¼Œåœ¨æ•²ä»£ç åœé¡¿æ—¶ä¼šæ˜¾ç¤ºç°è‰²çš„aiç”Ÿæˆä»£ç ï¼Œå¦‚æœç¡®è®¤æ¥å—è¿™äº›è‡ªåŠ¨è¡¥å…¨ï¼Œé‚£ä¹ˆæŒ‰tabå¡«å†™äº†è¿™äº›ä»£ç äº†ã€‚ç›®å‰continueè¿˜æ˜¯åé‡é—®ç­”å¼ï¼Œå¦‚æœæ˜¯ç±»ä¼¼cursoré‚£ç§æ¡†é€‰ç„¶åè®©aiä¸æ–­ç”Ÿæˆä¿®æ”¹çš„æ–¹å¼ç¼–ç¨‹çš„è¯ï¼Œcontinueæ”¯æŒçš„ä¸é”™ï¼Œæ¯”å¦‚é€‰ä¸­ä½ éœ€è¦ä¿®æ”¹çš„é‚£ä¸€æ®µä»£ç ï¼Œç„¶åå‡ºå‘edité—®ç­”ï¼Œå‘aiè¯´å‡ºä½ çš„è¦æ±‚ï¼Œåœ¨æ”¶åˆ°aiçš„å›ç­”åï¼Œcontinueä¼šdiffæ˜¾ç¤ºaiç»“æœå’Œå½“å‰çš„åŒºåˆ«ï¼Œåƒå¤„ç†merge conflictsä¸€æ ·ï¼Œä½ å¯ä»¥ä¸€æ®µä¸€æ®µçš„é€‰æ‹©accept currentè¿˜æ˜¯incomingã€‚æç«¯çš„æƒ…å†µå°±æ˜¯ä½ å¯ä»¥ä¸æ–­åœ°é—®å’Œä¸‹æŒ‡ä»¤ï¼Œä¸æ–­ä¿®æ”¹å’Œå¡«å……ï¼Œå°±åƒäººå†™ä»£ç ä¸€æ ·ï¼Œåªä¸è¿‡æ¢æˆäº†aiã€‚å¦å¤–ï¼Œcontinueä¹Ÿæ”¯æŒæä¾›ä¸€äº›ä¸Šä¸‹æ–‡æ¥ä½œä¸ºé—®ç­”çš„ä¸Šä¸‹æ–‡ï¼ˆæœ‰ç‚¹ç»•ï¼‰ï¼Œæ¯”å¦‚æä¾›æŸä¸ªä»£ç æ–‡ä»¶ï¼Œæ•´ä¸ªå·¥ç¨‹ï¼ˆåœ¨copiloté‡Œæ˜¯workspaceï¼‰ï¼Œæ–‡æ¡£ç­‰ï¼Œè¿™æ ·ä¸å…‰ä½ çš„é—®é¢˜æ˜¯promptï¼Œæ’ä»¶ä¹Ÿä¼šè®²ä¸é—®é¢˜ç›¸å…³çš„ä»£ç ï¼Œæ–‡æ¡£ä¸€èµ·æä¾›ç»™æ¨¡å‹å‚è€ƒã€‚è¿™é‡Œé¢ä¸ºäº†æä¾›æ›´è´´åˆ‡çš„ä¸Šä¸‹æ–‡ï¼Œcontinueä¼šå¯¹é¡¹ç›®ä»£ç åšç´¢å¼•ï¼Œå°±æ˜¯å…ˆembeddingæœ¬åœ°ä»£ç ï¼Œç„¶åæäº¤æ—¶ï¼Œä¼šæœç´¢ç›¸å…³åº¦é«˜çš„éƒ¨åˆ†ä½œä¸ºä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥è¿™é‡Œä¼šæœ‰åå°ä»»åŠ¡ä¸€ç›´åœ¨ç´¢å¼•ä»£ç å˜æ›´ï¼Œæˆ‘åœ¨å…¬å¸ç”µè„‘è¯•ç”¨æ—¶å‘ç°ä¼šå¯¼è‡´å¡é¡¿ï¼Œå¯èƒ½æ˜¯å…¬å¸é¡¹ç›®å¤ªå¤§äº†ï¼ŒåŒæ—¶æ€»æ˜¯åˆ‡æ¢åˆ†æ”¯ï¼ˆåˆ‡æ¢åˆ†æ”¯ä¼šå¯¼è‡´å¼€æ–°çš„ç´¢å¼•ï¼‰ï¼Œé…ç½®å·®åº”è¯¥ä¹Ÿæ˜¯ä¸€ä¸ªåŸå› ã€‚ä¸ªäººçš„å°é¡¹ç›®æ²¡æœ‰æ„Ÿè§‰åˆ°å¡é¡¿ã€‚
ä»£ç è¡¥å…¨æˆ‘è§‰å¾—ä¸€æ–¹é¢å’Œcopilotå·®ä¸å¤šï¼Œéƒ½æ˜¯åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œè¡¥å…¨çš„å†…å®¹å¯èƒ½ç¦»é¢„æœŸå·®å¾ˆå¤šï¼Œæ„Ÿè§‰ä¸Šä¸‹æ–‡çš„å¤„ç†ä¸æ˜¯å¾ˆå¥½ã€‚å¦å¤–è¯·æ±‚é‡æŒºå¤§çš„ï¼Œä¸æ˜¯å¾ˆæ¸…æ¥šè§¦å‘æœºåˆ¶ã€‚æŒ‰æ’ä»¶çš„ç»Ÿè®¡ï¼Œtokençš„ä½¿ç”¨ï¼Œè‡ªåŠ¨è¡¥å…¨å å¤§å¤´ã€‚&lt;/p&gt;
&lt;h1&gt;æ¨¡å‹&lt;/h1&gt;
&lt;p&gt;æ¨¡å‹ä¹Ÿæ˜¯åˆ†æˆé—®ç­”å’Œä»£ç è¡¥å…¨ä¸¤éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h2&gt;ä»£ç è¡¥å…¨æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;ä»£ç è¡¥å…¨ç›¸å¯¹ç‰¹æ®Šï¼Œå¸¸è§„æ¨¡å‹å¯èƒ½æ²¡æœ‰è‰¯å¥½çš„é€‚é…è®­ç»ƒï¼Œå·¥ä½œçš„å¹¶ä¸æ˜¯å¾ˆå¥½ã€‚å¤§å®¶æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯&lt;a href="https://ollama.com/library/starcoder2"&gt;starcoder&lt;/a&gt;ï¼Œ&lt;a href="https://ollama.com/library/deepseek-coder"&gt;deepseek-coder-base&lt;/a&gt;ï¼Œ&lt;a href="https://ollama.com/library/codellama"&gt;codellama&lt;/a&gt;ï¼Œä»¥åŠæ–°å‘å¸ƒçš„&lt;a href="https://mistral.ai/news/codestral/"&gt;codestral&lt;/a&gt;ï¼Œå¦å¤–å¥½åƒ&lt;a href="https://ollama.com/library/codeqwen"&gt;codeqwen-base&lt;/a&gt;ä¹Ÿæ˜¯é€‚ç”¨çš„ã€‚è¿™äº›åº”è¯¥éƒ½æ˜¯å¼€æºæ¨¡å‹ï¼Œå¯ä»¥æœ¬åœ°è¿è¡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨çº¿æœåŠ¡å•†çš„ï¼Œä¸è¿‡å¾ˆå¤šæœåŠ¡å•†æ˜¯æ²¡æœ‰è¿™äº›æ¨¡å‹çš„serverlessæœåŠ¡çš„ï¼Œå¾—æ‰¾æ‰¾ï¼Œè‡ªå·±éƒ¨ç½²å°±ä¸åˆç®—äº†ã€‚æ ¹æ®continueçš„æ¨èï¼Œæˆ‘ç”¨è¿‡&lt;a href="https://fireworks.ai"&gt;fireworks.ai&lt;/a&gt;çš„starcoder 7bï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œå¾ˆæµç•…ï¼Œä»·æ ¼æ˜¯0.2åˆ€è¾“å…¥è¾“å‡ºæ¯ç™¾ä¸‡tokenï¼Œæ˜¯å¾ˆä¾¿å®œäº†ï¼Œå³ä½¿è¡¥å…¨æ¶ˆè€—çš„æ¯”è¾ƒå¤§ï¼Œæ¶ˆè€—çš„ä¹Ÿæ˜¯æ¯”è¾ƒæ…¢çš„ã€‚deepseekå®˜æ–¹æ³¨å†Œç»™çš„creditå¤ªå°‘ï¼Œåªè¯•äº†ä¸¤å¥é—®ç­”å°±æ²¡äº†ï¼Œå¦å¤–å®˜æ–¹åªæœ‰chatå’Œcoderä¸¤ç§æ¨¡å‹ï¼Œä½ ä¹Ÿä¸çŸ¥é“ä»–æ˜¯baseæ¨¡å‹è¿˜æ˜¯instructæ¨¡å‹ã€‚ç„¶åè¿˜æœ‰èµ›åšè©è¨&lt;a href="https://developers.cloudflare.com/workers-ai/models/deepseek-coder-6.7b-base-awq/"&gt;cloudflare worker aiçš„deepseek-coder-base 6.7b&lt;/a&gt;ï¼Œå› ä¸ºæœ‰æ¯æ—¥å…è´¹é¢åº¦ï¼Œå½“å‰è¿™ä¸ªæ¨¡å‹è¿˜åœ¨betaï¼Œå…è´¹ï¼ä¸è¿‡æˆ‘åœ¨ä½¿ç”¨ä¸­ä¼šæ€»å‡ºç°å¤šè¿”å›äº†&lt;end of sentence&gt;è¿˜æ²¡æœ‰æŸ¥æ˜¯ä»€ä¹ˆåŸå› ã€‚å¦å¤–è¿˜æœ‰ï¼Œcodestralæ˜¯mistralæ–°å‡ºçš„ç‰¹åˆ«ç»™ä»£ç å¾®è°ƒçš„æ¨¡å‹å¤§å°æ˜¯22bï¼Œæˆ‘æ²¡æœ‰æ³¨å†Œmistralï¼Œè¿˜æ²¡æœ‰è¯•ç”¨ï¼Œä»·æ ¼æ˜¯1åˆ€è¾“å…¥3åˆ€è¾“å‡ºæ¯ç™¾ä¸‡tokenï¼Œæ˜¯fireworks starcoderçš„5å€å¤šäº†ã€‚æˆ‘æ²¡æœ‰é…ç½®é«˜çš„ç”µè„‘ï¼Œä»å…¶ä»–äººçš„åé¦ˆçœ‹ï¼Œæœ¬åœ°è¿è¡Œå°å°ºå¯¸çš„æ¨¡å‹åº”è¯¥é—®é¢˜ä¹Ÿä¸å¤§ï¼Œæœ¬åœ°è¿è¡Œ3bæˆ–1bçš„starcoderæˆ–deepseekåº”è¯¥éƒ½ä¸é”™ã€‚åé¢éšç€npuæ¨å¹¿ï¼Œæœ¬åœ°è¿è¡Œè¿™äº›å°æ¨¡å‹éƒ½ä¼šéå¸¸æµç•…äº†ã€‚&lt;/p&gt;
&lt;h2&gt;é—®ç­”æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;é—®ç­”æ¨¡å‹å°±å¯ä»¥ä½¿ç”¨å„ç§å¸¸è§„æ¨¡å‹äº†ï¼Œé€‰æ‹©éå¸¸å¤šã€‚æ¯”å¦‚å¾¡ä¸‰å®¶openaiæˆ–geminiï¼Œæˆ–claudçš„æ¨¡å‹ï¼Œä»è¯„æµ‹ä¸Šçœ‹gpt-4ä¾ç„¶æ˜¯æœ€å¥½çš„ï¼Ÿä¸è¿‡å¥½åƒå¯¹äºå¤æ‚é—®é¢˜ï¼Œclaud opusçš„é£è¯„æœ€å¥½ã€‚ä½ä»·çš„é€‰æ‹©æœ‰&lt;a href="https://www.together.ai"&gt;together.ai&lt;/a&gt;çš„deepseek-coder-33bå’Œphind-34bï¼Œä¹‹å‰çš„codestralä¹Ÿå¯ä»¥ã€‚å…è´¹çš„é€‰æ‹©æœ‰&lt;a href="https://groq.com"&gt;groq&lt;/a&gt;ï¼Œæœ‰é™é‡çš„llama3-70bï¼Œæ˜¯æ¯”è¾ƒé€‚åˆä»£ç é—®ç­”çš„ï¼Œè€Œä¸”å·¨å¿«ã€‚ç„¶åcloudflareåªæœ‰&lt;a href="https://developers.cloudflare.com/workers-ai/models/deepseek-coder-6.7b-instruct-awq/"&gt;6.7bçš„deepseek-coder-instruct&lt;/a&gt;ï¼Œæ¨¡å‹å¤§å°å°äº†ç‚¹ï¼Œå‡†ç¡®æ€§å·®ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;h2&gt;embeddingsæ¨¡å‹&lt;/h2&gt;
&lt;p&gt;å…¶å®è¿˜æœ‰ç¬¬ä¸‰ç§æ¨¡å‹ï¼ˆè²Œä¼¼ç°åœ¨æœ‰ç¬¬å››ç§rerankï¼‰embeddingsæ¨¡å‹ã€‚å°±æ˜¯ä½¿ç”¨ä»€ä¹ˆæ¨¡å‹æ¥è®¡ç®—ä»£ç çš„å‘é‡ï¼Œè¿™å†³å®šäº†æ˜¯å¦èƒ½å¤Ÿæä¾›æ›´ç›¸ä¼¼çš„ä¸Šä¸‹æ–‡ç»™é—®ç­”æˆ–è¡¥å…¨æ¨¡å‹ã€‚ç°åœ¨continueæœ‰ä¸‰ç§é€‰é¡¹ï¼Œtransformers.jsæ˜¯æœ¬åœ°è®¡ç®—ï¼›nomic-embed-textæ˜¯é€šè¿‡ollamaï¼›voyage-code-2æ˜¯äº‘ç«¯ä»˜è´¹å•†ä¸šæ¨¡å‹ã€‚æˆ‘åªä½¿ç”¨äº†æœ¬åœ°transformersæ¨¡å‹ï¼Œå°±å…ˆä¸åšè¯„ä»·äº†ã€‚&lt;/p&gt;
&lt;h1&gt;æœªæ¥&lt;/h1&gt;
&lt;p&gt;è¿™ä¸¤å¤©é«˜é€šï¼Œamdï¼Œinteléƒ½ä¸Šå¸‚æˆ–å‘å¸ƒäº†é«˜TOPS npuçš„cpuäº§å“ï¼Œæœªæ¥æœ¬åœ°ç®—åŠ›ä¼šè¶Šæ¥è¶Šé«˜ã€‚åƒä»£ç è¡¥å…¨å’Œembeddingsè¿™ç±»æ¨¡å‹æœ¬åœ°è¿è¡Œåº”è¯¥ä¼šéå¸¸æ™®éäº†ã€‚æˆ‘ä¹Ÿè¯¥è€ƒè™‘æ›´æ–°ä¸€ä¸‹æˆ‘çš„ç”µè„‘äº†ã€‚&lt;/p&gt;</content><category term="Tech"></category></entry><entry><title>åœ¨iPhoneä¸Šå†™åšå®¢</title><link href="https://bobobo80.com/2024/zai-iphoneshang-xie-bo-ke.html" rel="alternate"></link><published>2024-04-15T00:00:00+08:00</published><updated>2024-04-15T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2024-04-15:/2024/zai-iphoneshang-xie-bo-ke.html</id><summary type="html">&lt;p&gt;æ˜¯å› ä¸ºä½¿ç”¨äº†æ–°çš„å·¥ä½œæµæ¥å†™åšå®¢ï¼Œä»¥åŠå› ä¸ºåœ¨ä¸Šç­è·¯ä¸Šå¸¦å…¥è€³å¼è€³æœºå¯¼è‡´å‘ç‚ï¼Œæ‰€ä»¥åœæ­¢äº†åœ¨è·¯ä¸Šå¬æ’­å®¢çš„æ´»åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;æ˜¯å› ä¸ºä½¿ç”¨äº†æ–°çš„å·¥ä½œæµæ¥å†™åšå®¢ï¼Œä»¥åŠå› ä¸ºåœ¨ä¸Šç­è·¯ä¸Šå¸¦å…¥è€³å¼è€³æœºå¯¼è‡´å‘ç‚ï¼Œæ‰€ä»¥åœæ­¢äº†åœ¨è·¯ä¸Šå¬æ’­å®¢çš„æ´»åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ç›®å‰åœ¨ä¸Šç­è·¯ä¸Šå°±æ˜¯åˆ·åˆ·æ‰‹æœºï¼Œå¦‚æœæœ‰æƒ³å†™ç‚¹ä»€ä¹ˆï¼Œå°±ç”¨æ‰‹æœºæ¥ç å­—äº†ã€‚&lt;a href="https://bobobo80.com/2024/quan-yun-duan-kai-fa-huan-jing.html"&gt;ä¸Šä¸€ç¯‡åšå®¢&lt;/a&gt;å°±æ˜¯åœ¨æ‰‹æœºä¸Šå†™çš„ã€‚è™½ç„¶æ‰‹æœºä¸Šç›´æ¥ä½¿ç”¨github codespaceä¹Ÿèƒ½ç›´æ¥æ‰“å¼€ï¼Œä½†å®é™…æ“ä½œä½“éªŒå¹¶ä¸å¥½ï¼Œä¸€ä¸ªæ˜¯å±å¹•å°ï¼Œç•Œé¢æ“ä½œä¸æ–¹ä¾¿ï¼Œæ‰“å­—æ—¶ç›´æ¥ä¸€åŠå±å¹•è¢«å ç”¨ï¼Œä¹Ÿçœ‹ä¸æ¸…ã€‚ç„¶åæ²¡æœ‰æ¯”å¦‚é¼ æ ‡å³é”®ï¼Œæ‹–æ‹½ç­‰æ“ä½œã€‚æ‰€ä»¥æˆ‘å¼€å§‹æ‰¾åœ¨iosä¸Šç¼–å†™markdownçš„å·¥å…·ã€‚&lt;/p&gt;
&lt;h1&gt;markdown on iphone&lt;/h1&gt;
&lt;p&gt;æˆ‘åœ¨app storeé‡Œæœç´¢markdownï¼Œä¼šæœ‰ä¸€å †è½¯ä»¶ï¼Œä¸è¿‡å¾ˆå¤šè¦æ”¶è´¹æˆ–å†…è´­ã€‚æˆ‘æ²¡æœ‰ä¸€ä¸€å°è¯•ï¼Œåœ¨ä¸€å †appä¸­æˆ‘çœ‹åˆ°äº†&lt;a href="https://apps.apple.com/sg/app/mweb-markdown-%25E5%2586%2599%25E4%25BD%259C-%25E7%25AC%2594%25E8%25AE%25B0%25E5%2592%258C%25E5%258F%2591%25E5%25B8%2583/id1183407767?l=zh-Hans-CN"&gt;mweb&lt;/a&gt;ï¼Œä¹‹å‰å¬&lt;a href="https://talk.swift.gg/1"&gt;æ’­å®¢&lt;/a&gt;ï¼Œ&lt;a href="https://draveness.me"&gt;draveness&lt;/a&gt;æœ‰è®²åˆ°ä½¿ç”¨mwebå†™åšå®¢ï¼Œæˆ‘ç‚¹è¿›å»æŸ¥çœ‹ï¼Œå‘ç°ä½œè€…è¿˜æœ‰ä¸€æ¬¾è½»é‡çº§çš„markdownè½¯ä»¶ï¼Œ&lt;a href="https://apps.apple.com/sg/app/one-markdown/id1507139439?l=zh-Hans-CN"&gt;one markdown&lt;/a&gt;ï¼Œä¹°æ–­æˆ–è®¢é˜…æ¯”mwebä¾¿å®œå¾ˆå¤šã€‚æˆ‘æ˜¯å¾ˆè½»é‡ä½¿ç”¨çš„ï¼Œæ‰€ä»¥å°±ç›´æ¥é€‰æ‹©äº†è¿™ä¸ªè¯•è¯•ã€‚å› ä¸ºæ²¡ç”¨è¿‡å…¶ä»–appï¼Œæ‰€ä»¥æ²¡æœ‰å¯¹æ¯”ã€‚æˆ‘è¿˜æ²¡æœ‰ä»˜è´¹ï¼Œä¸»è¦çš„åŠŸèƒ½æ˜¯åœ¨è¾“å…¥æ¡†ä¸Šé¢åŠ äº†ä¸€è¡Œå¸¸ç”¨çš„å·¥å…·æŒ‰é’®æ ï¼Œå¯ä»¥å¿«é€Ÿæ’å…¥éœ€è¦çš„æ ¼å¼ã€‚ç„¶åæœ‰é¢„è§ˆåŠŸèƒ½ï¼ŒåŒæ—¶å¯ä»¥æ¥å…¥iphoneçš„æ–‡ä»¶ç³»ç»Ÿï¼Œç›´æ¥åœ¨onedriveæˆ–å…¶ä»–ç½‘ç›˜ç›®å½•ç¼–å†™ã€‚è¿™å¾ˆé‡è¦ï¼Œå› ä¸ºè¿™ä½¿å¾—å®ƒèƒ½é›†æˆè¿›gitå·¥å…·ï¼Œåœ¨gitç›®å½•é‡Œç¼–è¾‘mdæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h1&gt;Git on iphone&lt;/h1&gt;
&lt;p&gt;åœ¨iphoneä¸Šå†™åšå®¢é™¤äº†ç¼–è¾‘ï¼Œè¿˜éœ€è¦å‘å¸ƒã€‚å¥½åœ¨æˆ‘ä¹‹å‰è§£å†³äº†&lt;a href="https://bobobo80.com/2021/pelicanji-cheng-disqus.html"&gt;è‡ªåŠ¨ç”Ÿæˆå’Œå‘å¸ƒ&lt;/a&gt;ï¼Œæ‰€ä»¥ç°åœ¨è¦åšçš„å°±æ˜¯æŠŠç¼–è¾‘å¥½çš„mdæ–‡ä»¶pushåˆ°masteråˆ†æ”¯ï¼Œgithub actionä¼šè‡ªåŠ¨å®Œæˆæ–°å†…å®¹å‘å¸ƒã€‚è€Œåœ¨iphoneä½¿ç”¨gitï¼Œæ¯”è¾ƒå¸¸ç”¨çš„å·¥å…·åº”è¯¥æ˜¯&lt;a href="https://apps.apple.com/sg/app/working-copy-git-client/id896694807?l=zh-Hans-CN"&gt;working copy&lt;/a&gt;ï¼Œæ˜¯å›¾å½¢åŒ–çš„å·¥å…·ï¼Œçœ‹èµ·æ¥ç”šè‡³è‡ªå¸¦æ–‡æœ¬ç¼–è¾‘ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰markdownçš„ç‰¹æ®Šä¼˜åŒ–ã€‚è€Œè¿™ä¸ªappæ˜¯ä¹°æ–­æ”¶è´¹ï¼Œæˆ‘è¿˜åœ¨è§‚å¯Ÿæˆ‘æ˜¯å¦éœ€è¦ï¼Œåªä¸ºäº†æ‰‹æœºå†™åšå®¢è¿™ä¸ªåœºæ™¯ä¸å¤ªå€¼å¾—ã€‚ç„¶åæˆ‘æ‰¾åˆ°äº†å…è´¹çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨ç»ˆç«¯å·¥å…·ï¼Œæˆ‘æœ‰å®‰è£…&lt;a href="https://apps.apple.com/sg/app/ish-shell/id1436902243?l=zh-Hans-CN"&gt;iSH&lt;/a&gt;ï¼Œé‡Œé¢å¯ä»¥å‘½ä»¤è¡Œè¿è¡Œå„ç§å‘½ä»¤ï¼Œæ˜¯ä¸ªalpine linuxæ²™ç›’ï¼Œå†å®‰è£…gitå°±å¯ä»¥ä½¿ç”¨äº†ã€‚è¿æ¥githubéœ€è¦ishä¸­ç”Ÿæˆssh keyï¼Œç„¶ååœ¨githubè®¾ç½®public keyï¼Œå°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå®Œæ•´çš„æµç¨‹å°±æ˜¯one markdownä¸­åœ¨iSHçš„åšå®¢é¡¹ç›®pelican contentä¸­åˆ›å»ºä¸€ä¸ªæ–°mdæ–‡ä»¶ï¼Œç¼–è¾‘å¥½ä¹‹åã€‚å†åˆ°ishä¸­git add/commit/pushã€‚å°±æ˜¯å¯ä»¥å®Œæˆæ–°æ–‡ç« çš„å‘å¸ƒäº†ï¼&lt;/p&gt;</content><category term="Tech"></category></entry><entry><title>å…¨äº‘ç«¯å¼€å‘ç¯å¢ƒ</title><link href="https://bobobo80.com/2024/quan-yun-duan-kai-fa-huan-jing.html" rel="alternate"></link><published>2024-04-04T00:00:00+08:00</published><updated>2024-04-04T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2024-04-04:/2024/quan-yun-duan-kai-fa-huan-jing.html</id><summary type="html">&lt;p&gt;æˆ‘ç›®å‰åœ¨ç”¨çš„ç¬”è®°æœ¬ç”µè„‘è¿˜æ˜¯19å¹´ä¹°çš„amd ryzen 2500åŠ 8Gæ¿è½½å†…å­˜ï¼Œcpuè¿˜å¤Ÿç”¨ï¼Œä½†å¦‚æœæ—¥å¸¸å­¦ä¹ å’Œå¼€å‘çš„è¯ç»å¸¸ä¼šå†…å­˜ä¸å¤Ÿï¼ˆæ˜¯çš„cookï¼Œ8gå†…å­˜çœŸçš„ä¸å¤Ÿï¼‰ï¼Œå› ä¸ºwindowsä¸€èˆ¬è¦å¼€ä¸ªwslï¼Œä¼šæŒºå å†…å­˜çš„ã€‚æ¢ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;æˆ‘ç›®å‰åœ¨ç”¨çš„ç¬”è®°æœ¬ç”µè„‘è¿˜æ˜¯19å¹´ä¹°çš„amd ryzen 2500åŠ 8Gæ¿è½½å†…å­˜ï¼Œcpuè¿˜å¤Ÿç”¨ï¼Œä½†å¦‚æœæ—¥å¸¸å­¦ä¹ å’Œå¼€å‘çš„è¯ç»å¸¸ä¼šå†…å­˜ä¸å¤Ÿï¼ˆæ˜¯çš„cookï¼Œ8gå†…å­˜çœŸçš„ä¸å¤Ÿï¼‰ï¼Œå› ä¸ºwindowsä¸€èˆ¬è¦å¼€ä¸ªwslï¼Œä¼šæŒºå å†…å­˜çš„ã€‚æ¢æˆlinuxçš„è¯ï¼Œæœ‰ä¸¤ä¸ªç¡¬ä»¶ç›¸å…³çš„é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯æ—¶ä¸æ—¶çªç„¶å¡ä½æ­»æœºï¼Œä¸€ä¸ªæ˜¯ç›’ç›–ä¼‘çœ æˆ–å…³æœºåå¼€ç›–æ— æ³•å”¤é†’ã€‚ç„¶åä¹Ÿè¯•äº†&lt;a href="https://chromeos.google/products/chromeos-flex/"&gt;chrome os flex&lt;/a&gt;ï¼Œä¸€ä¸ªç»™échromebookçš„chrome osç³»ç»Ÿã€‚ä½†æ˜¯ç»­èˆªåˆæœ‰é—®é¢˜ï¼Œæ»¡ç”µçŠ¶æ€åªæœ‰2å°æ—¶çš„ç»­èˆªæ—¶é—´ã€‚å› ä¸ºç°åœ¨ä¹Ÿæ²¡æœ‰å¤šå°‘æ—¶é—´ç”¨ç”µè„‘ï¼Œæ‰€ä»¥è¿˜ä¸æƒ³æ¢æ–°çš„ï¼ˆä¸»è¦æ˜¯æ²¡é’±ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥å‰åœ¨å­—èŠ‚ä»¥åŠshopeeåˆæœŸï¼Œæ˜¯æœ‰ä¸ªäººçš„è¿œç¨‹å¼€å‘æœºçš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿè¯•ç€ä½¿ç”¨äº‘ç«¯çš„æ–¹æ¡ˆæ¥åšä¸ªäººå¼€å‘ã€‚&lt;/p&gt;
&lt;p&gt;è°ƒæŸ¥å‘ç°æ¯”è¾ƒå‡ºåçš„æ˜¯&lt;a href="https://www.gitpod.io"&gt;gitpod&lt;/a&gt;å’Œ&lt;a href="https://github.com/features/codespaces"&gt;github codespace&lt;/a&gt;ï¼Œè¿˜æœ‰å¯ä»¥è‡ªå·±éƒ¨ç½²çš„&lt;a href="https://coder.com"&gt;coder&lt;/a&gt;ã€‚è¿™äº›éƒ½ç®—æ˜¯åŸºäºvs codeæ”¹åŠ¨çš„é¡¹ç›®ã€‚å¦å¤–google cloudå’Œawsè¿˜æœ‰ä»–ä»¬çš„äº‘ç«¯å¼€å‘ç¯å¢ƒï¼Œä¸è¿‡æˆ‘æ²¡æœ‰å°è¯•ã€‚coderè¦è‡ªå·±éƒ¨ç½²ï¼Œåœ¨vpsä¸Šå…¶å®ä¸å¤ªåˆé€‚ï¼Œå¦‚æœæ˜¯è¿æ¥åˆ°è‡ªå·±çš„å°å¼æœºæˆ–è€…ç‰©ç†æœåŠ¡å™¨ä¸Šå¯èƒ½è¿˜æ¯”è¾ƒé€‚ç”¨ã€‚å‰©ä¸‹ä¸¤ä¸ªäº‘ç«¯çš„ï¼Œå› ä¸ºcodespaceæ˜¯githubè‡ªå®¶çš„ï¼Œå¦å¤–å…è´¹æ—¶é—´æ¯”è¾ƒé•¿ï¼Œæ‰€ä»¥å°±é€‰æ‹©äº†github codespaceã€‚&lt;/p&gt;
&lt;p&gt;ä½“éªŒä¸Šæ¥è¯´è¿˜ä¸é”™ï¼Œå»¶è¿Ÿä»€ä¹ˆçš„ä¸æ˜æ˜¾ã€‚å°±æ˜¯å¿«æ·é”®æœ‰äº›å¥½åƒå’Œlocalç‰ˆçš„ä¸ä¸€æ ·æˆ–è€…æ˜¯æµè§ˆå™¨çš„å¿«æ·é”®å†²çªã€‚æ‰“å¼€é€Ÿåº¦ä¹Ÿæ¯”è¾ƒæ»¡æ„ï¼Œå› ä¸ºå®é™…ä¸Šæ˜¯ä»–ä»¬åå°éœ€è¦æŠŠä½ çš„è¿™ä¸ªè™šæ‹Ÿæœºå¼€æœºçš„ï¼Œæœ‰ä¸ªå¯åŠ¨è¿‡ç¨‹ï¼Œå¯èƒ½æœ‰5-10sï¼Ÿæœ‰æ—¶å€™ä¼šé‡åˆ°golangçš„è¯­è¨€æœåŠ¡æ•…éšœï¼Œé«˜äº®æ˜¾ç¤ºæˆ–è€…å‡½æ•°è·³è½¬æ— æ•ˆï¼Œéœ€è¦é‡å¼€ä¸€ä¸‹ç½‘é¡µã€‚è°ƒè¯•æ–¹é¢ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼Œä¼šåˆ†é…ä¸€ä¸ªåŸŸåï¼Œç„¶åç«¯å£å¯ä»¥è®¾ç½®å…¬å¼€æˆ–éœ€è¦authéªŒè¯ã€‚æ’ä»¶ä¹Ÿéƒ½å¯ä»¥ä½¿ç”¨vs codeçš„æ’ä»¶ã€‚ç»ˆç«¯æˆ‘æ˜¯ä½¿ç”¨äº†vscodeé‡Œé¢çš„ç»ˆç«¯ï¼Œå¯ä»¥å®‰è£…fishï¼Œæˆ‘å¹³æ—¶æ˜¯ç”¨fish shellã€‚&lt;/p&gt;
&lt;p&gt;å…è´¹æ—¶é•¿æ˜¯60å°æ—¶æ¯æœˆï¼Œæœ€ä½é…ç½®2æ ¸8gï¼Œé…ç½®åŠ å€æ—¶é—´å‡åŠã€‚å¯¹äºæˆ‘å®Œå…¨å¤Ÿç”¨ï¼Œå› ä¸ºç°åœ¨æ ¹æœ¬æ²¡ä»€ä¹ˆæ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä»–å·¥å…·ï¼Œpostmanä¹Ÿæ˜¯ç”¨webç‰ˆï¼Œè€Œä¸”å› ä¸ºä¸ç”¨callæœ¬åœ°æ¥å£ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨è£…æµè§ˆå™¨æ’ä»¶äº†ã€‚ç„¶åè£…ä¸ªç»ˆç«¯å·¥å…·&lt;a href="https://hyper.is"&gt;hyper&lt;/a&gt;è¿æ¥vpsè°ƒè¯•ã€‚å°±è¿™äº›äº†ã€‚æ²¡æœ‰æœ¬åœ°vscodeï¼Œæ²¡æœ‰æœ¬åœ°go pythonç¯å¢ƒï¼Œæ²¡æœ‰wslã€‚æµè§ˆå™¨+ç»ˆç«¯å°±æ˜¯æ‰€æœ‰äº†ã€‚å“¦ï¼Œchromeå¯ä»¥ç»™codespaceå’Œpostmançš„pwaæ¨¡å¼å¼€å•ç‹¬çš„å›¾æ ‡ï¼Œæ–¹ä¾¿åœ¨ä»»åŠ¡æ åˆ‡æ¢ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ’­å®¢teahourç›®å‰çš„&lt;a href="https://teahour.fm/95"&gt;æœ€åä¸€æœŸ&lt;/a&gt;é‡Œæ˜¯å˜‰å®¾ä»‹ç»å¦‚ä½•ä½¿ç”¨chromebookåšå¼€å‘ï¼Œå…¶å®åŸç†å°±æ˜¯ä½¿ç”¨è¿œç¨‹å·¥ä½œç«™+vimå¼€å‘ã€‚ä¸è¿‡æˆ‘ä»ç„¶éœ€è¦å›¾å½¢åŒ–çš„èŠ‚ç›®ï¼Œéšç€vscodeçš„å‘å±•ï¼Œwebç‰ˆä¹Ÿæ˜¯éå¸¸å¯ç”¨çš„äº†ã€‚ç›®å‰å¸¸è§„çš„é™¤äº†å®¢æˆ·ç«¯å¼€å‘å¯èƒ½è¿˜æ˜¯æœ¬åœ°æ›´åˆé€‚ï¼Œwebå‰åç«¯è¿œç¨‹çš„å½¢å¼å·²ç»ç›¸å½“å¯ç”¨äº†ã€‚å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œä¹Ÿæ¥è¯•ä¸€è¯•å§ã€‚&lt;/p&gt;</content><category term="Tech"></category><category term="github"></category><category term="codespace"></category></entry><entry><title>éƒ¨ç½² gotosocial</title><link href="https://bobobo80.com/2023/bu-shu-gotosocial.html" rel="alternate"></link><published>2023-02-19T00:00:00+08:00</published><updated>2023-02-19T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2023-02-19:/2023/bu-shu-gotosocial.html</id><summary type="html">&lt;p&gt;è‡ªé©¬æ–¯å…‹æ”¶è´­ twitter åå¹ºè›¾å­ä¸æ–­ï¼Œæœ€è¿‘æ›´æ˜¯å°æ€äº†ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯ï¼Œè¿™ä¸‹æˆ‘å¸¸ç”¨çš„ tweetbot ä¹Ÿä¸èƒ½ç”¨äº†ã€‚æ‰€ä»¥æœ‰äº›äººå·²ç»å¼€å§‹è½¬å‘å…¶ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;è‡ªé©¬æ–¯å…‹æ”¶è´­ twitter åå¹ºè›¾å­ä¸æ–­ï¼Œæœ€è¿‘æ›´æ˜¯å°æ€äº†ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯ï¼Œè¿™ä¸‹æˆ‘å¸¸ç”¨çš„ tweetbot ä¹Ÿä¸èƒ½ç”¨äº†ã€‚æ‰€ä»¥æœ‰äº›äººå·²ç»å¼€å§‹è½¬å‘å…¶ä»–å¹³å°äº†ï¼Œå…¶ä¸­ä»¥ mastodon å’Œ nostr æœ€ä¸ºæµè¡Œï¼Œæˆ‘å¤§æ¦‚äº†è§£äº†ä¸€ä¸‹ä¸¤ä¸ªå¹³å°ï¼Œæ„Ÿè§‰ mastodon çš„æ–¹å¼ç›¸å¯¹æ›´ä¸ºåˆç†ï¼Œæ‰€ä»¥ä¹Ÿå¼€å§‹è¯•ç”¨äº†ä¸€ä¸‹ã€‚å½“ç„¶ nostr çš„ damus å®¢æˆ·ç«¯æˆ‘ä¹Ÿä¸‹è½½è¯•ç”¨äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://joinmastodon.org/"&gt;mastodon&lt;/a&gt; åªæ˜¯åŸºäº activitypub åè®®çš„ä¸€ç§æœ€ä¸ºæµè¡Œçš„å®ç°ã€‚ç›®å‰ç¤¾åŒºåº”è¯¥è¿˜æŒºæ´»è·ƒçš„ï¼Œä¸­æ–‡ç”¨æˆ·æœ‰å¾ˆå¤šã€‚ä¸è¿‡ mastodon æ˜¯ä½¿ç”¨ ruby å¼€å‘çš„ï¼Œè€Œä¸”ç®—æ˜¯é¢å‘äººæ•°è¾ƒå¤šçš„ä¸€ä¸ªå¤§å¹³å°ï¼Œæˆ‘åˆæƒ³è‡ªå·±éƒ¨ç½²ï¼Œæ‰€ä»¥åˆæ‰¾äº†æ¶ˆè€—èµ„æºç›¸å¯¹è¾ƒå°‘çš„å…¶ä»–å®ç°ï¼Œè¿™å…¶ä¸­ &lt;a href="https://github.com/superseriousbusiness/gotosocial"&gt;gotosocial&lt;/a&gt; ç®—æ˜¯ä»¥æ­¤ç›®çš„ä¸€ç§å®ç°ã€‚æˆ‘è¿™é‡Œå°±åªç®€å•è®°å½•ä¸€ä¸‹æˆ‘è‡ªå·±æ˜¯å¦‚ä½•éƒ¨ç½² gotosocial çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä¹‹å‰å·²ç»æœ‰ä¸€å¥—åŸºäº &lt;a href="https://bobobo80.com/2021/ge-ren-fu-wu-qi-zi-dong-hua-bu-shu.html"&gt;docker swarn çš„ç¯å¢ƒ&lt;/a&gt;ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ–°å¼€ä¸€ä¸ª gotosocial æ˜¯éå¸¸ç®€å•å¿«é€Ÿçš„ã€‚å®˜æ–¹æ–‡æ¡£ç»™å‡ºäº†å¦‚ä½•ä½¿ç”¨ docker éƒ¨ç½²ï¼Œæˆ‘å‚è€ƒäº† docker compose çš„ yaml æ–‡ä»¶åˆ›å»ºäº†è‡ªå·±çš„ stacks é…ç½®å®Œæˆçš„éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…ˆå»ºå¥½ volumeï¼Œå› ä¸º gotosocial ä½¿ç”¨ sqliteï¼Œè¿˜è¦å­˜å¾ˆå¤šå›¾ç‰‡æ‰€ä»¥ä¼šå ç”¨æ¯”è¾ƒå¤§çš„ç©ºé—´ï¼Œå¯ä»¥è®¾ç½®å•ç‹¬ä¸€ä¸ªæ–°çš„ç¡¬ç›˜ï¼Œå¦‚æœä½ å’Œæˆ‘ä¸€æ ·æ˜¯ä½¿ç”¨ä½é… vps çš„è¯ï¼Œå› ä¸ºæˆ‘çš„ vps åªæœ‰ 10GBï¼ŒåŠ ä¸Šç³»ç»Ÿå’Œå…¶ä»–æœåŠ¡ï¼Œå‰©ä½™çš„ç©ºé—´ä¸å¤šäº†ï¼Œæ‰€ä»¥æˆ‘åˆå•ç‹¬åŠ äº†ä¸€å—ç¡¬ç›˜ç©ºé—´ç»™ gotosocial ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æ–°å»º stacksï¼Œæˆ‘æ˜¯å‚è€ƒäº†å®˜æ–¹çš„ yamlã€‚network æ˜¯ä½¿ç”¨äº†å·²æœ‰çš„ nginx ç½‘ç»œï¼Œå› ä¸ºä¼šç”± nginx è½¬ç»™ç›¸å½“äºåœ¨ docker å†…ç½‘çš„ gotosocialï¼Œæ‰€ä»¥ gotosocial ä¹Ÿä¸é…ç½® https è¯ä¹¦ï¼Œä¸è®¾ç½® portã€‚volume ä½¿ç”¨ä¸Šä¸€æ­¥åˆ›å»ºçš„ volã€‚å‰©ä¸‹çš„å°±æ˜¯ host å’Œ db type å’Œ db path äº†ï¼Œä½¿ç”¨é»˜è®¤çš„å°±å¥½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;3.3&amp;quot;&lt;/span&gt;

&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;gotosocial&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;superseriousbusiness/gotosocial:latest&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;nginx-net&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;GTS_HOST&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;mb.bobobo80.com&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;GTS_DB_TYPE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;sqlite&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;GTS_DB_ADDRESS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/gotosocial/storage/sqlite.db&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;GTS_LETSENCRYPT_ENABLED&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;false&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;GTS_LETSENCRYPT_EMAIL_ADDRESS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="c1"&gt;## For reverse proxy setups:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="c1"&gt;# GTS_TRUSTED_PROXIES: &amp;quot;172.x.x.x&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;gotosocial_data:/gotosocial/storage&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;always&amp;quot;&lt;/span&gt;

&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;gotosocial_data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;external&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;

&lt;span class="nt"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;nginx-net&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;external&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;stack å»ºå¥½åï¼Œå¯åŠ¨æœåŠ¡ï¼Œgotosocial å°±åœ¨ docker å†…ç½‘é‡Œå¯åŠ¨èµ·æ¥äº†ã€‚ä¹‹åå°±æ˜¯ nginx çš„è®¾ç½®äº†ï¼Œä½¿ç”¨å·²æœ‰çš„ &lt;a href="https://nginxproxymanager.com/"&gt;nginx proxy manager&lt;/a&gt;ï¼ŒæŠŠ mb.bobobo80.com è½¬å‘ç»™ gotosocial çš„ 8080 ç«¯å£ï¼ˆæ˜¯ gotosocial çš„é»˜è®¤ç«¯å£ï¼‰ï¼Œå¼€å¯å¼ºåˆ¶ https å¹¶è‡ªåŠ¨ç»­æœŸç­¾åï¼Œå°±å¯ä»¥å’Œå¤–ç½‘è¿æ¥èµ·æ¥äº†ã€‚&lt;/li&gt;
&lt;li&gt;gotosocial çš„ç¬¬ä¸€ä¸ªç”¨æˆ·æ˜¯éœ€è¦ç”¨å‘½ä»¤è¡Œåˆ›å»ºçš„ï¼Œæ‰€ä»¥è¿˜è¦æŒ‰ç…§å®˜ç½‘çš„å‘½ä»¤åˆ›å»ºç¬¬ä¸€ä¸ªç”¨æˆ·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæ•´ä¸ª gotosocial å°±ç®—æ˜¯æ­å»ºå¥½äº†ã€‚å› ä¸º gotosocial æ²¡æœ‰æä¾›å‰ç«¯é¡µé¢ï¼ˆå®é™…æ˜¯æœ‰å‡ ä¸ªé¡µé¢çš„ï¼Œä½†æ˜¯ä¸èƒ½å‘æ¨ï¼‰ï¼Œæ‰€ä»¥è¦ä½¿ç”¨å…¶ä»–å®¢æˆ·ç™»å½•ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨ã€‚æˆ‘ç”¨ç½‘é¡µç‰ˆ pinafore å’Œ mastodon ios å®¢æˆ·ç«¯éƒ½å¯æ˜¯æ­£å¸¸ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå†è¯´ 2 ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚æœåŠ¡å†…å­˜å ç”¨ä¸å¤§ï¼Œæˆ‘ç°åœ¨è¿˜æ²¡æ€ä¹ˆä½¿ç”¨å†…å­˜å ç”¨åº”è¯¥å† 20-50MBï¼Œä¸è¿‡ç¡¬ç›˜å ç”¨ä¼šç›¸å¯¹å¤§ä¸€ç‚¹ï¼Œæ‰€ä»¥ä¸»è¦ç¡¬ç›˜ç©ºé—´ã€‚ç¬¬äºŒç‚¹ï¼Œç›®å‰ gotosocial è¿˜æ²¡æœ‰å¼€å‘è¿ç§»åŠŸèƒ½ï¼Œç°åœ¨è¿˜ä¸èƒ½è¿å‡ºï¼Œæ‰€ä»¥å¦‚æœå¼€å§‹è‡ªå·±çš„æœåŠ¡æ—¶è¿˜æ˜¯æƒ³å¥½åŸŸåï¼Œå› ä¸ºä¸€æ—¦å¼€å§‹å†™å†…å®¹äº†ï¼Œå‘ç°åŸŸåä¸åˆé€‚å°±æ”¹ä¸äº†äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¢è¿å…³æ³¨æˆ‘çš„ activitypub è´¦å·@me@mb.bobobo80.com&lt;/p&gt;</content><category term="Tech"></category><category term="docker"></category><category term="gotosocial"></category><category term="mastodon"></category><category term="twitter"></category><category term="portainer"></category></entry><entry><title>Backend as a service(BAAS)çš„å‡ ä¸ªé¡¹ç›®</title><link href="https://bobobo80.com/2022/backend-as-a-servicebaasde-ji-ge-xiang-mu.html" rel="alternate"></link><published>2022-03-28T00:00:00+08:00</published><updated>2022-03-28T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2022-03-28:/2022/backend-as-a-servicebaasde-ji-ge-xiang-mu.html</id><summary type="html">&lt;p&gt;åˆåœæ›´äº†ä¸€æ®µæ—¶é—´ï¼Œä¸»è¦æ˜¯æ²‰è¿· switch æ¸¸æˆï¼Œæœ‰ä¸€æ®µæ—¶é—´æ²¡æœ‰å†™ç‚¹ä»€ä¹ˆäº†ã€‚æœ€è¿‘çœ‹äº†çœ‹å¯ä»¥å¿«é€Ÿæ­å»º rest æ¥å£åˆ° db è®¿é—®çš„å‡ ç§ä¸ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;åˆåœæ›´äº†ä¸€æ®µæ—¶é—´ï¼Œä¸»è¦æ˜¯æ²‰è¿· switch æ¸¸æˆï¼Œæœ‰ä¸€æ®µæ—¶é—´æ²¡æœ‰å†™ç‚¹ä»€ä¹ˆäº†ã€‚æœ€è¿‘çœ‹äº†çœ‹å¯ä»¥å¿«é€Ÿæ­å»º rest æ¥å£åˆ° db è®¿é—®çš„å‡ ç§ä¸åŒçš„å¼€æºå·¥å…·ï¼Œè¿™ä¸ªæœ‰ç‚¹ç®—æ˜¯ lowcode æˆ–è€… BAASï¼ˆbackend as a serviceï¼‰çš„é¢†åŸŸï¼Œæ®è¯´åœ¨æœ€è¿‘ä¹Ÿå¾ˆç«å•Šï¼Ÿèµ·å› æ˜¯æˆ‘å‘ç°åœ¨åšè®°å•è¯çš„ç¨‹åºä¸­ï¼Œæˆ‘è¿˜æ˜¯å¾ˆå¸Œæœ›èƒ½å¤Ÿæœ‰ä¸€ä¸ªå¿«é€Ÿæ­å»ºå‡ºåŸºäº db è¡¨çš„å¢åˆ æ”¹æŸ¥çš„æ¥å£å¹³å°ï¼ŒåŒæ—¶ç±»ä¼¼ data admin çš„åå°ï¼Œå¯ä»¥æ–¹ä¾¿çš„é€šè¿‡ç•Œé¢æ¥æŸ¥çœ‹å’Œç›´æ¥ä¿®æ”¹ db æ•°æ®ã€‚å…¶å® django å·²ç»èƒ½å¾ˆæ¥è¿‘åœ°æä¾›ç±»ä¼¼çš„åŠŸèƒ½ï¼Œdjango admin åªéœ€è¦é€šè¿‡è®¾å®šä¸€äº›é…ç½®ï¼Œå°±å¯ä»¥è‡ªåŠ¨åœ¨åå°å¢åŠ æ•°æ®è¡¨çš„ UI,è€Œé€šè¿‡ DRFï¼ˆdjango rest frameworkï¼‰ä¹Ÿå¯ä»¥å¿«é€Ÿåœ°åˆ›å»º rest æ¥å£ã€‚ä¸è¿‡æˆ‘è¿˜æ˜¯çœ‹äº†çœ‹å…¶ä»–å‡ ä¸ªé¡¹ç›®ã€‚&lt;/p&gt;
&lt;h2&gt;directus&lt;/h2&gt;
&lt;p&gt;åŒç±»å‹çš„æ›´å‡ºåçš„é¡¹ç›®åº”è¯¥æ˜¯ strapiï¼Œä»–ä»¬å« headless cmsã€‚&lt;a href="https://github.com/directus/directus"&gt;directus&lt;/a&gt; ä»£ç æ›´ç®€å•ä¸€äº›ï¼Œæ‰€ä»¥æˆ‘è¯•ç”¨äº†ä¸€ä¸‹å¹¶ç®€å•åœ°çœ‹äº†ä¸‹ directus çš„ä»£ç ç»“æ„ã€‚å¦‚æœå®é™…ä½¿ç”¨çš„è¯ï¼Œéœ€è¦æ³¨æ„ï¼Œstrapi çš„å…è´¹éƒ¨ç½²æœ‰ role ä¸ªæ•°é™åˆ¶ï¼Œè€Œ directus æ²¡æœ‰ã€‚ä¸è¿‡è¦äºŒæ¬¡å¼€å‘çš„è¯ï¼Œæ³¨æ„ strapi æ˜¯ MIT åè®®ï¼Œè€Œ directus æ˜¯ GPL åè®®ã€‚
è¿™ç±» headless cms ç‰¹ç‚¹æ˜¯ web UI æ¯”è¾ƒå¥½çœ‹ï¼Œå¯¹æ•°æ®è¡¨çš„å­—æ®µç¼–è¾‘éå¸¸çš„å›¾å½¢åŒ–ï¼Œå¹¶ä¸”æ›´åå‘å¤–è§‚æ˜¾ç¤ºï¼Œæ¯”å¦‚æ˜¯å¯è§†åŒ–ç¼–è¾‘æ–‡æœ¬ï¼Œè¿˜æ˜¯ç®€å•çš„ textï¼Œè¿˜å¯ä»¥è®¾ç½®å›¾è¡¨ç­‰ã€‚è€Œä¸æ˜¯ç›´æ¥è®¾ç½® varchar(64)è¿™ç§ã€‚æ‰€ä»¥è¿™ç±»äº§å“åº”è¯¥æ˜¯æ›´å€¾å‘äºé¢å‘éç¨‹åºå‘˜ç¾¤ä½“æ¥æ“ä½œå’Œç¼–è¾‘åå°çš„ã€‚è¿™æ ·ä¸šåŠ¡éœ€æ±‚æ–¹å¯ä»¥ç›´æ¥åˆ›å»ºå’Œä¿®æ”¹æ‰€éœ€è¦çš„è¡¨ç»“æ„ï¼Œç„¶åæ¡†æ¶å°±æ˜¯è‡ªåŠ¨å…·å¤‡è¿™äº›è¡¨çš„ rest apiã€‚æˆ–è€…å¯ä»¥é€šè¿‡ admin çš„è§’è‰²åˆ†ç±»ï¼Œæä¾›ä¸€ä¸ªå¯ä¾›éç¨‹åºå‘˜çš„ admin åå°ï¼Œæ¥è®©è¿™äº›äººæ¥æŸ¥çœ‹å’Œç¼–è¾‘æ•°æ®ã€‚
directus æ˜¯ä¸€ä¸ªå•ä½“ä»£ç ä»“åº“ã€‚express+vue ç»„æˆã€‚åŸç†åº”è¯¥æ˜¯é€šè¿‡ knex æ¥ç”Ÿæˆ sqlï¼Œå®ç°è‡ªå®šä¹‰æ•°æ®è¡¨çš„ rest apiã€‚åŒæ—¶åœ¨åˆ›å»ºå’Œä¿®æ”¹è‡ªå®šä¹‰è¡¨çš„å­—æ®µæ—¶ï¼Œä¹Ÿä¼šç”Ÿæˆå¯¹åº”çš„ sql DDL è¯­å¥æ¥åˆ›å»ºæˆ–ä¿®æ”¹æ•°æ®è¡¨ã€‚åŒæ—¶è¿˜æœ‰è‡ªå¸¦çš„ç”¨æˆ·å’Œæƒé™ç®¡ç†ï¼Œå¯ä»¥å¯¹æ¥å£è¿›è¡Œé‰´æƒã€‚è¿˜æœ‰é™æ€æ–‡ä»¶ç®¡ç†ã€‚ç›¸å½“äº directus æ˜¯ä¸€ä¸ªåœ¨å›¾å½¢ç•Œé¢ä¸Šå®šä¹‰æ•°æ® model,ç„¶åè‡ªåŠ¨ç”Ÿæˆ rest api å’Œ admin ç®¡ç†é¡µé¢ï¼Œè¿˜é™„å¸¦ç”¨æˆ·å’Œæ–‡ä»¶ç®¡ç†çš„åŠ å¼ºç‰ˆ django adminã€‚å¯¹äºåšå®¢ï¼Œå†…å®¹ç®¡ç†å¹³å°ç±»å‹çš„ç³»ç»Ÿå¼€å‘åº”è¯¥æ˜¯éå¸¸é€‚ç”¨ï¼Œåªéœ€è¦å¼€å‘å¯¹åº”çš„å‰ç«¯å³å¯ï¼Œè¿˜é™„å¸¦äº†åå°ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;h2&gt;supabase&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/supabase/supabase"&gt;supabase&lt;/a&gt; æ˜¯å¯¹æ ‡ firebase ã€‚ä½†æ˜¯åœ¨æˆ‘çœ‹æ¥ï¼Œå’Œ headless cms è¿˜æ˜¯æœ‰ä¸€äº›ç›¸ä¼¼çš„ã€‚ä¸è¿‡å¯¹äº supabase,æˆ‘è§‰å¾—æ›´åå‘äºæœ‰ç¨‹åºèƒŒæ™¯çš„äººé€‚ç”¨ã€‚é€‚ç”¨çš„äººç¾¤ç¡®å®æ˜¯å’Œ firebase çš„ cloud storge/realtime/auth éƒ¨åˆ†è¿‘ä¼¼ã€‚
ä¸è¿‡ä»æŠ€æœ¯ä¸Šçœ‹ï¼Œsupabase å’Œ firebase åº”è¯¥è¿˜æ˜¯æœ‰å¾ˆå¤§ä¸åŒçš„ã€‚supabase æ˜¯åŸºäº postgresql æ¥åšçš„æ‰©å±•ï¼Œå…¶ä¸­åº”è¯¥æœ‰ä¸å°‘ç‰¹æ€§æ˜¯åŸºäº postgresql çš„ï¼Œæ‰€ä»¥åªèƒ½é€‚ç”¨ postgresqlã€‚
supabase ä¸æ˜¯å•ä½“åº”ç”¨ï¼Œè€Œä¸”å„ä¸ªæ¨¡å—å¥½åƒæ¥ä¸åŒçš„é¡¹ç›®ç»„æˆï¼Œä»–ä»¬çš„æ•´åˆèƒ½åŠ›è¿˜æŒºå‰å®³ã€‚è€Œä¸”ä½¿ç”¨çš„è¯­è¨€éƒ½ä¸ä¸€æ ·ã€‚lua/go/haskell/Elixir/TSã€‚ä¸çŸ¥é“æ˜¯ä¸æ˜¯æœ‰æ„ä¸ºä¹‹ã€‚
è®¾è®¡ç†å¿µä¸Šï¼Œä»–ä»¬æ˜¯å¼ºä¾èµ– postgresql çš„ã€‚æ¯”å¦‚æ•°æ®çš„éªŒè¯æ˜¯åœ¨ sql é‡Œå®šä¹‰çš„ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯ä¾èµ– db æ¥æ ¡éªŒçš„ã€‚å¦‚æœè¦æ˜¯æƒ³è¦å¤æ‚çš„ db æ“ä½œï¼Œå¯ä»¥åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ã€‚ä»–ä»¬çš„ graphql æ¨¡å—ï¼Œä¹Ÿæ˜¯è¦å‡†å¤‡å€ŸåŠ© PLpgSQL æ¥å®ç°ã€‚
ä»å®ƒæä¾› js/ts/flutter ç­‰ç­‰å®¢æˆ·ç«¯ lib æ¥çœ‹ï¼Œsupabase æ˜¯é¢å‘ç¨‹åºå¼€å‘è€…ä½¿ç”¨çš„ã€‚ä»–ä»¬çš„ admin ä¹Ÿæ˜¯æ›´åå‘å¼€å‘æ¥ä½¿ç”¨ï¼Œæ•°æ®æŸ¥çœ‹æ›´åƒæ˜¯åœ¨ä½¿ç”¨ç±»ä¼¼ mysql workbenchã€‚&lt;/p&gt;
&lt;h2&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å¦‚æœæƒ³å¿«é€Ÿåœ°æ­å»ºä¸€ä¸ªå¢åˆ æ”¹æŸ¥çš„æ¥å£ï¼Œä¸“æ³¨äºå‰ç«¯çš„å·¥ä½œï¼Œé‚£ä¹ˆè¿™ä¸¤ç§å·¥å…·éƒ½æ˜¯å¯ä»¥çš„ã€‚å¦‚æœæœ‰éœ€æ±‚ç»™ä½¿ç”¨æ–¹å¼€å‘åå°ï¼Œé‚£ä¹ˆ directus/strapi æ›´åˆé€‚ã€‚å¦‚æœæ˜¯éœ€è¦ç±»ä¼¼ realtime,æˆ–æ˜¯ç›¸å¯¹å¤æ‚çš„ sql æŸ¥è¯¢ï¼Œæˆ–æ˜¯å¯¹ db æœ‰æ›´åº•å±‚çš„æ§åˆ¶ï¼Œé‚£ä¹ˆ supabase åº”è¯¥æ›´åˆé€‚ã€‚
ä¸€ç‚¹æ„Ÿæƒ³ï¼Œè¿™äº›é¡¹ç›®å’Œåœ¨ä¸€ä¸ªå¤§å‹å…¬å¸ï¼Œåœ¨ä¸€ä¸ªæ¥å£é‡Œè¦å¡å¤§é‡é€»è¾‘çš„è¡Œä¸ºå¾ˆä¸ç›¸åŒã€‚åœ¨äº’è”ç½‘ç¨‹åºå¼€å‘ç››è¡Œçš„ä»Šå¤©ï¼Œå…¶å®è¿˜æœ‰å¤§é‡çš„é¢†åŸŸå¯ä»¥æœ‰éå¸¸ä¸åŒçš„è®¾è®¡å’Œå¼€å‘æ€è·¯ã€‚æ¯”å¦‚ï¼Œå¤–é”®ï¼Œè¿™ä¸¤ä¸ªé¡¹ç›®åº”è¯¥è¯´æ˜¯æ¯”è¾ƒä¾èµ–å¤–é”®æ¥æ„å»ºæ•°æ®è¡¨ä¹‹é—´çš„è”ç³»çš„ã€‚æ¯”å¦‚ï¼Œsupabase ä¸­ï¼Œç«Ÿç„¶æŠŠå¤§é‡çš„é€»è¾‘æ”¾åˆ° db ä¸­ï¼Œæ¯”å¦‚æ•°æ®å­—æ®µéªŒè¯ï¼Œæˆ‘ä¹‹å‰ç”šè‡³ä¸çŸ¥é“ sql è¿˜æœ‰ check è¯­å¥ï¼›æ¯”å¦‚å­˜å‚¨è¿‡ç¨‹ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯å¾ˆå¤å¤çš„ä¸€ç§æ–¹å¼äº†ï¼›æ¯”å¦‚ç”¨æˆ·éªŒè¯ï¼Œè¦ç”¨åˆ° db çš„ row level securityï¼›ä»–ä»¬è¿˜è¦åœ¨ postgresql é‡Œè®¾ç½®è‡ªå®šä¹‰çš„ function æ¥å®ç°è‡ªå®šä¹‰åŠŸèƒ½ã€‚æˆ‘æƒ³è¿™å’Œæˆ‘ä»¬å¤§éƒ¨åˆ†äººæ¥è§¦çš„â€˜åŸåˆ™â€™æ˜¯æˆªç„¶ç›¸åçš„å§ï¼Œä¸ºäº†æ•°æ®åº“æ€§èƒ½ï¼Œæˆ‘ä»¬ä¼šæ‹¦æˆªæ— æ•ˆçš„è¯·æ±‚ï¼Œç¼“å­˜è¯·æ±‚ï¼Œå°±æ˜¯ä¸ºäº†å°½é‡å‡å°‘ db çš„æ¶ˆè€—ã€‚è€Œå…¶å®ï¼Œå½“ db ä¸æ˜¯ç“¶é¢ˆçš„æ—¶å€™ï¼Œå¤§å¯ä»¥å°†ä¸€äº›å·¥ä½œäº¤ç»™ dbï¼Œæ¥å‡å°‘è‡ªå·±æœåŠ¡çš„å¼€å‘æˆæœ¬ã€‚å°±åƒæ•°æ®åº“åèŒƒå¼è®¾è®¡ä¸€æ ·ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§â€˜ååŸåˆ™â€™å®ç°ã€‚&lt;/p&gt;</content><category term="Tech"></category><category term="baas"></category><category term="nocode"></category><category term="lowcode"></category><category term="directus"></category><category term="supabase"></category><category term="postgrest"></category><category term="prest"></category></entry><entry><title>Fastapiä¸­dependencyçš„ç”Ÿå‘½å‘¨æœŸ</title><link href="https://bobobo80.com/2021/fastapizhong-dependencyde-sheng-ming-zhou-qi.html" rel="alternate"></link><published>2021-11-07T00:00:00+08:00</published><updated>2021-11-07T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2021-11-07:/2021/fastapizhong-dependencyde-sheng-ming-zhou-qi.html</id><summary type="html">&lt;h2&gt;å‘ç°é—®é¢˜&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘ä½¿ç”¨fastapiæ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªalchemysqlæ•°æ®åº“è¿æ¥æ± çš„é”™è¯¯ã€‚è¶…è¿‡äº†é»˜è®¤çš„è¿æ¥æ± é™åˆ¶ã€‚æŒ‰ç†è¯´è‡ªå·±çš„æœåŠ¡åªæœ‰ä¸€ä¸ªäººåœ¨ç”¨ï¼Œåº”è¯¥ä¸ä¼šå‡ºç°è¿™ç§é—® â€¦&lt;/p&gt;</summary><content type="html">&lt;h2&gt;å‘ç°é—®é¢˜&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘ä½¿ç”¨fastapiæ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªalchemysqlæ•°æ®åº“è¿æ¥æ± çš„é”™è¯¯ã€‚è¶…è¿‡äº†é»˜è®¤çš„è¿æ¥æ± é™åˆ¶ã€‚æŒ‰ç†è¯´è‡ªå·±çš„æœåŠ¡åªæœ‰ä¸€ä¸ªäººåœ¨ç”¨ï¼Œåº”è¯¥ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sqlalchemy.exc.TimeoutError: QueuePool limit of size 5 overflow 10 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/14/3o7r)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è”æƒ³åˆ°æœ€è¿‘çš„ä¿®æ”¹æ˜¯å¢åŠ äº†ä¸€ä¸ªæ–‡ä»¶ä¸‹è½½æ¥å£ï¼Œæ‰€ä»¥æŸ¥åˆ°äº†åŸå› ï¼Œæ˜¯è¿™ä¸ªæ¥å£å ç”¨äº†dbè¿æ¥æ± ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æœ€å¼€å§‹æ˜¯ç”¨äº†fastapiä½œè€…åœ¨fullstackæ¨¡æ¿é‡Œç»™çš„&lt;a href="https://github.com/tiangolo/full-stack-fastapi-postgresql/blob/490c554e23343eec0736b06e59b2108fdd057fdc/%7B%7Bcookiecutter.project_slug%7D%7D/backend/app/app/api/deps.py#L46"&gt;æ–¹æ³•&lt;/a&gt;å†™çš„éªŒè¯ç”¨æˆ·ç™»é™†çŠ¶æ€çš„dependencyã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ¥å£ï¼Œè°ƒç”¨äº†Depends(deps.get_current_active_user)ï¼Œæ¥éªŒè¯jwté‡Œçš„ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nd"&gt;@router&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/&lt;/span&gt;&lt;span class="si"&gt;{id}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;response_model&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;schemas&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read_item&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Session&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Depends&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;deps&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_db&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;current_user&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;User&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Depends&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;deps&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_current_active_user&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Any&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;    Get item by ID.&lt;/span&gt;
&lt;span class="sd"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;get_current_active_userå‡½æ•°åœ¨æœ€é‡Œå±‚ï¼Œä½¿ç”¨äº†get_dbï¼Œè¿™ä¸ªå‡½æ•°ä½¿ç”¨äº†Generatorï¼Œåœ¨è°ƒç”¨æ—¶è¿”å›dbè¿æ¥ï¼Œåœ¨ç»“æŸæ—¶å…³é—­dbè¿æ¥ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_db&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Generator&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;SessionLocal&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="k"&gt;yield&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;
    &lt;span class="k"&gt;finally&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;é—®é¢˜å°±å‡ºåœ¨äº†å…³é—­è¿æ¥è¿™é‡Œã€‚é‚£è¿™ä¸ªget_dbä¸¾ä¾‹ï¼Œå½“dependsè°ƒç”¨get_dbæ—¶ï¼Œä¼šè°ƒç”¨SessionLocalå¼€å¯ä¸€ä¸ªdbè¿æ¥å’Œäº‹åŠ¡ï¼Œç„¶åç›´åˆ°è¿™ä¸ªè¯·æ±‚è¿”å›responseåæ‰ä¼šè°ƒç”¨finallyåçš„closeã€‚æ‰€ä»¥å¦‚æœä¸€ä¸ªæ¥å£å†…éƒ¨ä¸å…‰åªæœ‰dbæ“ä½œï¼Œå¹¶ä¸”åœ¨è¯·æ±‚æœ€å¼€å§‹è°ƒç”¨äº†get_dbå¼€å¯äº†dbè¿æ¥ï¼ŒåŒæ—¶åé¢è¿˜æœ‰å…¶ä»–ä¸€äº›æ—¶é—´é•¿çš„æ“ä½œ(æ¯”å¦‚è¯»æ–‡ä»¶ï¼Œè¯·æ±‚å…¶ä»–apiç­‰)ï¼Œé‚£ä¹ˆè¿™ä¸ªdbè¿æ¥å°±ä¼šè¢«ä¸€ç›´å ç”¨ç€ï¼Œç›´åˆ°è¿™ä¸ªè¯·æ±‚ç»“æŸæ‰ä¼šå…³é—­ã€‚åŒæ—¶è¿™è¿˜æ˜¯ä¸€ä¸ªdbäº‹åŠ¡ï¼Œå¦‚æœåœ¨æœ€å¼€å§‹æœ‰å†™æ“ä½œæˆ–å¸¦é”è¯»æ“ä½œï¼Œè¿˜ä¼šæœ‰é•¿æ—¶é—´çš„dbé”ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åœ¨æ–‡æ¡£é‡Œæ‰¾åˆ°äº†Dependsè¿˜æœ‰ä¸ª&lt;a href="https://fastapi.tiangolo.com/tutorial/dependencies/sub-dependencies/#using-the-same-dependency-multiple-times"&gt;use_cacheç”¨æ³•&lt;/a&gt;ã€‚é»˜è®¤æ˜¯Trueï¼Œåœ¨åŒä¸€ä¸ªè¯·æ±‚é‡Œï¼Œå¦‚æœDependsè°ƒç”¨äº†åŒä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ä¼šç”¨cacheä¸­çš„å€¼ã€‚æ‰€ä»¥å½“ä¸€ä¸ªè¯·æ±‚é‡Œä¸åŒçš„åœ°æ–¹è°ƒç”¨äº†get_dbï¼Œé‚£ä¹ˆä¼šä½¿ç”¨åŒä¸€ä¸ªsessionï¼Œä¸ä¼šå†åˆ›å»ºç¬¬äºŒä¸ªdbè¿æ¥äº†ï¼Œå°±æ˜¯åœ¨åŒä¸€ä¸ªè¿æ¥å’ŒåŒä¸€ä¸ªäº‹åŠ¡é‡Œã€‚ä¸è¿‡å¦‚æœæŠŠuse_cacheè®¾ç½®ä¸ºFalseï¼Œé‚£ä¹ˆåœ¨ä¸åŒçš„åœ°æ–¹è°ƒç”¨get_dbåï¼Œä¼šåˆ›å»ºæ–°çš„dbè¿æ¥å’Œäº‹åŠ¡ã€‚ä½†æ˜¯ï¼Œå½“è°ƒç”¨get_dbåï¼Œå¹¶ä¸ä¼šç«‹åˆ»æ‰§è¡Œcloseï¼Œä»ç„¶æ˜¯è¦åœ¨æ•´ä¸ªè¯·æ±‚ç»“æŸåæ‰æ‰§è¡Œcloseã€‚&lt;/p&gt;
&lt;h2&gt;å¯èƒ½ä¼šå¼•èµ·çš„é—®é¢˜çš„æƒ…å†µ&lt;/h2&gt;
&lt;p&gt;Dependsçš„è¿™ä¸ªé—®é¢˜æˆ–ç‰¹æ€§ï¼Œå¯èƒ½ä¼šåœ¨Dependsä¸­æœ‰ä¸€äº›ç‹¬ç«‹çš„dbè¯·æ±‚åï¼Œæ²¡æœ‰åŠæ—¶é‡Šæ”¾dbè¿æ¥ã€‚æ‰€ä»¥è¿™äº›æƒ…å†µä¸‹å¼•èµ·é—®é¢˜ï¼š
- åœ¨è¯·æ±‚æœ€å¼€å§‹ï¼Œé€šè¿‡Dependsè·å–äº†db sessionï¼Œæ¯”å¦‚ç”¨æˆ·éªŒè¯ã€‚ä½†ä¹‹åï¼Œåœ¨è¿™ä¸ªæ¥å£ä¸­æœ‰æ—¶é—´é•¿çš„æ“ä½œï¼Œé•¿æ—¶é—´å ç”¨dbè¿æ¥ã€‚
- åœ¨è¯·æ±‚æœ€å¼€å§‹ï¼Œé€šè¿‡Dependsè·å–äº†db sessionï¼Œæ¯”å¦‚ç”¨æˆ·éªŒè¯ï¼Œä½†ç”¨æˆ·dbåœ¨ä¸€ä¸ªä¸åŒçš„åº“ï¼Œå’Œåé¢çš„ä¸šåŠ¡dbä¸åœ¨ä¸€èµ·ã€‚è€Œåé¢æ‰§è¡Œçš„æ˜¯ä¸šåŠ¡dbçš„æ“ä½œï¼Œå¯¼è‡´ç”¨æˆ·dbè¿æ¥é•¿æ—¶é—´ä¸ç”¨ï¼Œåœ¨æœ€åæ‰é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;h2&gt;å¦‚ä½•è§£å†³&lt;/h2&gt;
&lt;p&gt;å› ä¸ºDependsçš„è¿™ä¸ªç”¨æ³•ï¼Œé‚£ä¹ˆä¸ºäº†åŠæ—¶é‡Šæ”¾dbè¿æ¥ï¼Œå°±ä¸ç”¨Generatorçš„æ–¹æ³•äº†ã€‚æ¯”å¦‚å¯ä»¥å•ç‹¬å†™ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨å‡½æ•°å†…éƒ¨å°±å…³é—­dbè¿æ¥ã€‚è¿™æ ·Dependsè°ƒç”¨è¿™ä¸ªå‡½æ•°åï¼Œä¹Ÿä¸ä¼šå¯¼è‡´dbè¿æ¥å ç”¨çš„é—®é¢˜ã€‚ä¸è¿‡å¦‚æœuseråº“å’Œä¸šåŠ¡åº“åœ¨åŒä¸€ä¸ªdb,é‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦è¿™æ ·äº†ï¼Œè¿™æ ·ä¼šå¯¼è‡´åŒä¸€ä¸ªè¯·æ±‚è¿æ¥ä¸¤æ¬¡dbã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_current_active_user_with_single_session&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;token&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Depends&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reusable_oauth2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;User&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="c1"&gt;# unpackage jwt ...&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;SessionLocal&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;crud&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;token_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sub&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;finally&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;HTTPException&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;status_code&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;404&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;detail&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;User not found&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;

&lt;span class="nd"&gt;@router&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/&lt;/span&gt;&lt;span class="si"&gt;{id}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;response_model&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;schemas&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read_item&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Session&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Depends&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;deps&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_db&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;current_user&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;User&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Depends&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;deps&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_current_active_user_with_single_session&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Any&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Tech"></category><category term="fastapi"></category><category term="dependency"></category></entry><entry><title>Linux é…ç½® kinto å¿«æ·é”®</title><link href="https://bobobo80.com/2021/linux-pei-zhi-kinto-kuai-jie-jian.html" rel="alternate"></link><published>2021-11-07T00:00:00+08:00</published><updated>2021-11-07T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2021-11-07:/2021/linux-pei-zhi-kinto-kuai-jie-jian.html</id><summary type="html">&lt;p&gt;æ—¶éš”å¤šå¹´ï¼Œæˆ‘åˆè½¬å›ä½¿ç”¨ linux ä½œä¸ºä¸ªäººæ¡Œé¢ç³»ç»Ÿäº†ã€‚ä¸»è¦æ˜¯ç›®å‰åœ¨ä½¿ç”¨ win10 æ—¶ï¼Œwsl æ€§èƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œæœ¬èº«ç¬”è®°æœ¬é…ç½®æ¯”è¾ƒå·®ï¼Œæ˜¯ amd çš„ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;æ—¶éš”å¤šå¹´ï¼Œæˆ‘åˆè½¬å›ä½¿ç”¨ linux ä½œä¸ºä¸ªäººæ¡Œé¢ç³»ç»Ÿäº†ã€‚ä¸»è¦æ˜¯ç›®å‰åœ¨ä½¿ç”¨ win10 æ—¶ï¼Œwsl æ€§èƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œæœ¬èº«ç¬”è®°æœ¬é…ç½®æ¯”è¾ƒå·®ï¼Œæ˜¯ amd çš„ 2500 å’Œ 8G å†…å­˜ï¼Œå¯¼è‡´åœ¨ä½¿ç”¨ vs coderemote åˆ° wsl2 å¼€å‘æ—¶ï¼Œformat éƒ½æ€»æ˜¯å¡ä½ã€‚åŒæ—¶åˆæƒ³æŠ˜è…¾ä¸€ä¸‹ linux æ¡Œé¢äº†ï¼ˆå¯¹äº†ï¼Œä¸»è¦æ˜¯æƒ³æŠ˜è…¾äº†ï¼‰ï¼Œæ‰€ä»¥æˆ‘åˆæŠŠ linux è£…å›æ¥äº†ã€‚åœ¨åˆšä¹°è¿™ä¸ªç¬”è®°æœ¬æ—¶ï¼Œå…¶å®å·²ç»å®‰è£…è¿‡ linuxï¼Œåªä¸è¿‡ç”±äºé©±åŠ¨åŸå› ï¼Œæ”¾å¼ƒäº†ã€‚æˆ‘çš„æœ¬æ˜¯è”æƒ³ lenovo 720s AMD ç‰ˆï¼Œcpu æ˜¯ 2500 å†…å­˜ 8G ç„Šæ­»ã€‚åœ¨åˆšä¹°æ¥æ˜¯å®‰è£… linux ä¸€ä¸ªæ˜¯ç½‘å¡é©±åŠ¨éœ€è¦å•ç‹¬ä¸‹è½½é©±åŠ¨åŒ…ï¼Œè¿™ä¸ªé—®é¢˜è¿˜å¥½ã€‚å¦ä¸€ä¸ªé—®é¢˜æ˜¯æ€»æ˜¯å¡æ­»ï¼Œåªèƒ½å¼ºè¡Œå…³æœºé‡å¯ã€‚å¯èƒ½æ˜¯å“ªä¸ªåœ°æ–¹çš„é©±åŠ¨ä¸å¤ªè¡Œã€‚å½“æ—¶è¯•äº† ubuntu å’Œ manjaroï¼Œéƒ½æ˜¯ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æœŸé—´æˆ‘å·²ç»æ¢äº†ç½‘å¡ï¼Œå› ä¸ºé‚£ä¸ªåŸè£… rtl8821ce æœ¬èº«å°±ä¸å¤ªè¡Œï¼Œåœ¨ windows ä¸‹ä¹Ÿæ€»æ˜¯æ‰çº¿ã€‚æ‰€ä»¥æ¢äº†ä¸ª intel çš„ç½‘å¡ã€‚æ‰€ä»¥è¿™æ¬¡å®‰è£… linux éå¸¸é¡ºåˆ©ï¼Œå¼€ç®±å³ç”¨ã€‚è¿™æ¬¡æˆ‘é€‰äº† manjaro kde ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä»–æŠ˜è…¾ linux æ¡Œé¢ä¹Ÿæ²¡ä»€ä¹ˆå¯è¯´çš„ã€‚è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›æˆ‘ä¿®æ”¹äº†ä¸€ç‚¹ç‚¹ kinto.sh é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://kinto.sh/"&gt;Kinto.sh&lt;/a&gt;æ˜¯ä¸€ä¸ªä¿®æ”¹é”®ç›˜æ˜ å°„çš„å·¥å…·ï¼Œå¯ä»¥æŠŠ windows å’Œ linux çš„é”®ç›˜å¸ƒå±€æ”¹æˆç±»ä¼¼ Mac çš„é”®ç›˜å¸ƒå±€ï¼ŒåŒæ—¶è¿˜çœŸå¯¹ä¸€äº›å¸¸ç”¨è½¯ä»¶çš„å¿«æ·é”®åšäº†ç‰¹æ®Šçš„è®¾ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºå·¥ä½œç”¨çš„æ˜¯ Macï¼Œæ‰€ä»¥å¿«æ·é”®å·²ç»æ¯”è¾ƒä¹ æƒ¯ mac çš„æ–¹å¼ã€‚å°¤å…¶æ˜¯é‚£ä¸ª cmd+cv ç³»åˆ—ã€‚å›åˆ° win æˆ– linux æ”¹ç”¨ ctrl ä¼šå¾ˆä¸ä¹ æƒ¯ã€‚è€Œå¦‚æœä½ ç›´æ¥æŠ¥ ctrl å’Œ alt è°ƒæ¢çš„è¯ï¼Œåˆæœ‰å¾ˆå¤šå¿«æ·é”®ä¼šå˜åŒ–ï¼Œæ¯”å¦‚ alt+tabã€‚æ‰€ä»¥è¿˜æ˜¯ç”¨å·¥å…·æ¯”è¾ƒæ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;p&gt;Kinto è¿˜å¯ä»¥è°ƒæ•´ windows çš„å¿«æ·é”®ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡æœ‰è¯•è¿‡ï¼Œæ‰€ä»¥å…ˆåªè¯´ linuxã€‚æˆ‘è¿™ä¸ªæœ¬çš„é”®ç›˜æœ€ä¸‹é¢ä»å·¦åˆ°å³ 4 ä¸ªé”®ä¾æ¬¡æ˜¯ Ctrl-Fn-Win-Altã€‚Fn æ˜¯ä¸èƒ½æ”¹çš„ã€‚ä» mac è¿ç§»è¿‡æ¥çš„ä¹ æƒ¯å½“ç„¶æ˜¯ï¼ŒæŠŠ alt æ”¹æˆ ctrlï¼Œè¿™æ ·å¤åˆ¶ç²˜è´´å°±æ˜¯ alt+cv äº†ã€‚åŒæ—¶æƒ³æµè§ˆå™¨ä»€ä¹ˆçš„ï¼Œå°±æ˜¯ alt+w å…³é—­ï¼Œ+r åˆ·æ–°ä»€ä¹ˆçš„ã€‚Kinto.sh ä¸­è¿™ç§æ–¹å¼æ˜¯å« windows&amp;amp;appleã€‚ä¼šå°† alt å˜æˆ ctrlï¼Œwin å˜æˆ altï¼Œctrl å˜æˆ winã€‚ä½†æ˜¯åœ¨ä½¿ç”¨ç»ˆç«¯è½¯ä»¶æ—¶ï¼Œä¼šå°† alt å˜æˆ ctrl+shiftï¼Œwin è¿˜æ˜¯ altï¼Œctrl è¿˜æ˜¯ ctrlï¼Œè¿™æ ·åœ¨ç»ˆç«¯ä¸‹çš„å¤åˆ¶ç²˜è´´å°±è¿˜æ˜¯ä½¿ç”¨ alt+cvã€‚kinto çš„é…ç½®ä¼šç”¨é’ˆå¯¹å„ç§è½¯ä»¶çš„ä¸€äº›å•ç‹¬é…ç½®ã€‚&lt;/p&gt;
&lt;h2&gt;æˆ‘çš„ä¸€äº›ç‰¹æ®Šéœ€æ±‚&lt;/h2&gt;
&lt;p&gt;å¯¹äº ctrl å’Œ alt çš„æ”¹åŠ¨ï¼Œkinto å·²ç»æ»¡è¶³äº†æˆ‘çš„éœ€æ±‚ã€‚ä¸è¿‡æˆ‘è¿˜ä¹ æƒ¯æŠŠ capslock æœ¬èº«åŠŸèƒ½å±è”½æ‰ï¼Œå¹¶ä¸”è®© capslock æŒ‰ä¸‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ hjkl æ¥å½“æˆä¸Šä¸‹å·¦å³é”®ã€‚æˆ‘æŸ¥äº†ä¸€ä¸‹ kinto ä¾èµ–çš„ xkeysnailï¼Œåº”è¯¥æ˜¯å¹¶ä¸æ”¯æŒè¿™ç§è®¾å®šï¼Œå› ä¸º&lt;a href="https://github.com/mooz/xkeysnail/pull/33"&gt;capslock ä¸æ˜¯ modifier&lt;/a&gt;ã€‚ä¸è¿‡æˆ‘é€šè¿‡æŠŠ capslock å…ˆæ”¹æˆå…¶ä»–é”®ï¼Œé—´æ¥åœ°å®ç°äº†è¿™ç§æˆ‘çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;kinto.sh æä¾›äº† kinto.pyï¼Œä¹Ÿå°±æ˜¯ kinto configã€‚æˆ‘å¯ä»¥ä¿®æ”¹é‡Œé¢çš„é…ç½®æ¥è¾¾åˆ°è‡ªå·±çš„ç›®çš„ã€‚
å…ˆä¿®æ”¹ define_multipurpose_modmapï¼ŒæŠŠ capslock æ¢æˆå³ ctrl&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;define_multipurpose_modmap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;Key&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CAPSLOCK&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Key&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RIGHT_CTRL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Key&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RIGHT_CTRL&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# custom&lt;/span&gt;
    &lt;span class="c1"&gt;# {Key.ENTER: [Key.ENTER, Key.RIGHT_CTRL]   # Enter2Cmd&lt;/span&gt;
    &lt;span class="c1"&gt;# {Key.CAPSLOCK: [Key.ESC, Key.RIGHT_CTRL]  # Caps2Esc&lt;/span&gt;
    &lt;span class="c1"&gt;# {Key.LEFT_META: [Key.ESC, Key.RIGHT_CTRL] # Caps2Esc - Chromebook&lt;/span&gt;
    &lt;span class="c1"&gt;# {                                         # Placeholder&lt;/span&gt;
&lt;span class="p"&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åä¿®æ”¹ General GUI çš„é…ç½®ï¼ŒåŠ ä¸Š ctrl+hjkl çš„å¿«æ·é”®å˜æˆä¸Šä¸‹å·¦å³ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# None referenced here originally&lt;/span&gt;
&lt;span class="c1"&gt;# - but remote clients and VM software ought to be set here&lt;/span&gt;
&lt;span class="c1"&gt;# These are the typical remaps for ALL GUI based apps&lt;/span&gt;
&lt;span class="n"&gt;define_keymap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;wm_class&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;wm_class&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;casefold&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;remotes&lt;/span&gt;&lt;span class="p"&gt;,{&lt;/span&gt;
    &lt;span class="c1"&gt;# K(&amp;quot;RC-Space&amp;quot;): K(&amp;quot;Alt-F1&amp;quot;),                   # Default SL - Launch&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C-j&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Down&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C-h&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Left&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C-k&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Up&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C-l&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Right&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;General GUI&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;General GUI çš„ç¬¬ä¸€è¡Œé…ç½®ä¹Ÿå¯ä»¥æ³¨é‡Šæ‰ã€‚è¿™ä¸ªåº”è¯¥æ˜¯ä¼šå½±å“åˆ°è¾“å…¥æ³•åˆ‡æ¢ã€‚&lt;/p&gt;
&lt;p&gt;å¥½äº†ã€‚è¿™æ ·å°±ç»“æŸäº†ã€‚è™½ç„¶è¿™æ ·ä¼šå ç”¨ ctrl+hjkl çš„å¿«æ·é”®ï¼Œå¯èƒ½ä¼šä¸€äº›è½¯ä»¶çš„å¿«æ·é”®ï¼Œä½†æ˜¯ï¼Œè¿™æ ·å·²ç»æ˜¯æˆ‘è¯•éªŒè¿‡çš„æ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆäº†ã€‚å› ä¸ºæŠŠ capslock æ¢æˆ win æˆ– alt éƒ½æœ‰æœ‰å…¶ä»–ä¸€äº›å½±å“ã€‚è€Œ kinto ä¾èµ–çš„ xkeysnail åˆä¸æ”¯æŒå°† capslock å•ç‹¬å˜æˆ modifierï¼Œæˆ–æ˜¯æŠŠ capslock æ¢æˆå¤šä¸ª modifier ç»„åˆã€‚æ‰€ä»¥åªèƒ½æ˜¯æ¢æˆ ctrl å¯¹æ•´ä½“ä½¿ç”¨å½±å“è¾ƒå°ã€‚åŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºä¿®æ”¹äº† define_multipurpose_modmapï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨ kinto è‡ªå¸¦çš„ tweak è®¾ç½®ï¼Œä¼šå¯¼è‡´é…ç½®æ–‡ä»¶é”™è¯¯ï¼Œéœ€è¦æ‰‹å·¥ä¿®å¤ã€‚æ‰€ä»¥åœ¨é…ç½®æ–‡ä»¶ä¿®æ”¹å¥½åï¼Œå°±ä¸è¦åŠ¨ tweak äº†ã€‚&lt;/p&gt;</content><category term="Tech"></category><category term="linux"></category><category term="kinto"></category><category term="shortcut"></category><category term="manjaro"></category><category term="xkeysnail"></category></entry><entry><title>MacOS ä¸Š docker desktop çš„æ›¿ä»£å“</title><link href="https://bobobo80.com/2021/macos-shang-docker-desktop-de-ti-dai-pin.html" rel="alternate"></link><published>2021-10-25T00:00:00+08:00</published><updated>2021-10-25T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2021-10-25:/2021/macos-shang-docker-desktop-de-ti-dai-pin.html</id><summary type="html">&lt;p&gt;æœ€è¿‘ï¼Œä¹Ÿä¸ç®—å¤ªè¿‘ï¼Œdocker desktop å®£å¸ƒè¦æ”¹å˜æˆæƒï¼Œå¯¹äºå•†ä¸šç”¨é€”ä¸”å…·æœ‰ä¸€å®šçš„è§„æ¨¡çš„è¯ï¼Œæ˜å¹´å°±è¦å¼€å§‹æ”¶è´¹äº†ã€‚å¾ˆå¤šå…¬å¸éƒ½æ˜¯ä½¿ç”¨ mac â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;æœ€è¿‘ï¼Œä¹Ÿä¸ç®—å¤ªè¿‘ï¼Œdocker desktop å®£å¸ƒè¦æ”¹å˜æˆæƒï¼Œå¯¹äºå•†ä¸šç”¨é€”ä¸”å…·æœ‰ä¸€å®šçš„è§„æ¨¡çš„è¯ï¼Œæ˜å¹´å°±è¦å¼€å§‹æ”¶è´¹äº†ã€‚å¾ˆå¤šå…¬å¸éƒ½æ˜¯ä½¿ç”¨ mac ä½œä¸ºå¼€å‘ç”µè„‘çš„ï¼Œè™½ç„¶å¯¹äºå¤§å…¬å¸çš„è¯åº”è¯¥ä¹Ÿä¼šç®¡è¿™ä¸ª docker è´¹ç”¨çš„ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯åœ¨ mac ä¸Šè¯•ç”¨äº†å…¶ä»–çš„ä¸¤ä¸ªæ›¿ä»£æ–¹æ¡ˆï¼ŒæŠ˜è…¾äº†ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h2&gt;lima&lt;/h2&gt;
&lt;p&gt;åœ¨ docker è¦æ”¶è´¹çš„æ¶ˆæ¯å‡ºæ¥ä¸ä¹…ï¼Œå°±æœ‰ä¸€ç¯‡&lt;a href="https://medium.com/nttlabs/containerd-and-lima-39e0b64d2a59"&gt;ntt å†™çš„æ–‡ç« ä»‹ç» lima&lt;/a&gt;ã€‚å¦å¤–è¿˜æœ‰ä¸­æ–‡çš„ç¿»è¯‘ç¨¿ã€‚æœç´¢å¼•æ“æœç´¢çš„æ’åä¹Ÿå¾ˆé«˜ã€‚æˆ‘ä¹Ÿå°±å°è¯•å®‰è£…äº† limaã€‚å®‰è£…éå¸¸ç®€å•ï¼Œbrew ä¸€æ¡å‘½ä»¤å°±å®‰è£…ä¸Šäº†ï¼Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;brew&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;lima
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å®‰è£…å¥½ä¹‹åè¦ç”¨ lima åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºï¼Œå¯ä»¥å…ˆä½¿ç”¨ default é…ç½®ï¼Œå‘½ä»¤å¦‚ä¸‹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;limactl&lt;span class="w"&gt; &lt;/span&gt;start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªæ—¶é—´ä¼šç¨å¾®æœ‰ç‚¹é•¿ï¼Œç„¶åè™šæ‹Ÿæœºå°±åˆ›å»ºå¥½äº†ã€‚ç„¶åå°±å¯ä»¥ä½¿ç”¨äº†ï¼ŒåŸºæœ¬å°±æ˜¯ä½¿ç”¨ lima nerdctl æ¥ä»£æ›¿ dockerï¼Œä½¿ç”¨ docker çš„å„ç§ runï¼Œpullï¼Œimages ä»€ä¹ˆçš„ï¼Œæ¯”å¦‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;lima&lt;span class="w"&gt; &lt;/span&gt;nerdctl&lt;span class="w"&gt; &lt;/span&gt;ps&lt;span class="w"&gt; &lt;/span&gt;--all
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œ lima å…¶å®æ˜¯åˆ›å»ºäº†ä¸€ä¸ª linux è™šæ‹Ÿæœºï¼Œåœ¨ Mac çš„ä»»åŠ¡ç®¡ç†å™¨é‡Œï¼Œèƒ½çœ‹åˆ°ä¸€ä¸ª qemu çš„æ£€æŸ¥ï¼Œé‚£ä¸ªå°±æ˜¯è™šæ‹Ÿæœºäº†ã€‚&lt;/p&gt;
&lt;h3&gt;å‘&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œæ³¨æ„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œé‚£ä¸ª ntt çš„æ–‡ç« é‡Œåé¢è¿˜å†™äº† GUIï¼Œrancher desktopã€‚ä½†æ˜¯å®é™…ä¸Šï¼Œè¿™ä¸ª rancher å’Œ brew å®‰è£…çš„ lima æ˜¯åˆ†ç¦»çš„ï¼Œä¸åœ¨ä¸€èµ·ã€‚åœ¨å®‰è£…å’Œå¯åŠ¨ rancher desktop åï¼Œrancher ä¼šåœ¨å†åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºï¼Œç»™ä½ å®‰è£… nerdctl å’Œ k3s çš„ç¯å¢ƒï¼Œå®é™…ä¸Š rancher desktop æ˜¯ç”¨ lima å†å»ºä¸€ä¸ªè™šæ‹Ÿæœºï¼Œå¹¶æä¾›å¦ä¸€å¥— nerdctl å’Œ k3s ç¯å¢ƒã€‚rancher desktop å¯åŠ¨åï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥çš„ nerdctl æ˜¯ rancher çš„ nerdctlï¼Œè€Œç”¨ lima nerdctl æ˜¯è‡ªå·±å®‰è£… lima çš„ nerdctlã€‚è€Œä¸” rancher desktop æä¾›çš„åŠŸèƒ½å’Œ docker desktop ä¹Ÿä¸å¤ªä¸€æ ·ã€‚åªæä¾›äº† k8s çš„ç‰ˆæœ¬ï¼Œimagesï¼Œå’Œç³»ç»Ÿèµ„æºå ç”¨çš„é…ç½®ã€‚docker é‡Œçš„ container dashboard æ˜¯æ²¡æœ‰çš„ã€‚&lt;/p&gt;
&lt;h2&gt;podman&lt;/h2&gt;
&lt;p&gt;lima çš„æ–¹æ¡ˆç›¸å½“äºæ˜¯ lima è™šæ‹Ÿæœº+containerd çš„æ–¹æ¡ˆã€‚è¿˜æœ‰å¦ä¸€ä¸ªæ–¹æ¡ˆç°åœ¨åœ¨ Mac ä¸Šä¹Ÿå¯ä»¥è¿è¡Œäº†ï¼Œé‚£å°±æ˜¯ podmanã€‚å¯ä»¥å‚è€ƒ(podman çš„æ–‡æ¡£è¿›è¡Œå®‰è£…å’Œè®¾ç½®)[https://podman.io/getting-started/installation]ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;brew&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;podman
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å®‰è£…å¥½åï¼Œç”¨ podman machine å‘½ä»¤åˆ›å»ºå’Œå¯åŠ¨è™šæ‹Ÿæœºå°±å¯ä»¥äº†&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;podman&lt;span class="w"&gt; &lt;/span&gt;machine&lt;span class="w"&gt; &lt;/span&gt;init
podman&lt;span class="w"&gt; &lt;/span&gt;machine&lt;span class="w"&gt; &lt;/span&gt;start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä¹‹åï¼Œå°±æ˜¯ä½¿ç”¨ podman å‘½ä»¤ä»£æ›¿ docker äº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;podman&lt;span class="w"&gt; &lt;/span&gt;ps&lt;span class="w"&gt; &lt;/span&gt;--all
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æœ‰ä¸ª(podman çš„ GUI å·¥å…·)[https://github.com/heyvito/podman-macos]ï¼Œå¯ä»¥æ˜¾ç¤ºå½“å‰çš„ containersï¼Œä½†æ˜¯æˆ‘è¯•ç”¨äº†ä¸‹ï¼Œä¼šå¯¼è‡´ cpu ä½¿ç”¨ç‡é«˜ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ã€‚ä¸è¿‡ä¹‹å‰æåˆ°çš„ portainer æ˜¯æ”¯æŒ podman çš„ï¼Œå¯ä»¥ç”¨ portainer æ¥ç®¡ç† posmanã€‚è¿™é‡Œæ³¨æ„ docker run é‡Œéœ€è¦åŠ ä¸Š privileged å‚æ•°ï¼ŒåŒæ—¶ docker.sock å¯¹åº”çš„ volume ä¹Ÿå˜æˆäº† podman.sockã€‚è¿™æ ·å°±èƒ½ç”¨æœ¬åœ°çš„ 9000 ç«¯å£ï¼ˆæˆ–è€…æ¢æˆè‡ªå·±éœ€è¦çš„ç«¯å£ï¼‰æ¥ç®¡ç† docker äº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;podman&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;-d&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;9000&lt;/span&gt;:9000&lt;span class="w"&gt; &lt;/span&gt;--privileged&lt;span class="w"&gt; &lt;/span&gt;--name&lt;span class="o"&gt;=&lt;/span&gt;portainer&lt;span class="w"&gt; &lt;/span&gt;--restart&lt;span class="o"&gt;=&lt;/span&gt;always&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;/run/user/1000/podman/podman.sock:/var/run/docker.sock&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;portainer_data:/data&lt;span class="w"&gt; &lt;/span&gt;portainer/portainer-ce
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä¸¤ä¸ªå·¥å…·éƒ½æ˜¯å…ˆèµ·ä¸€ä¸ª linux è™šæ‹Ÿæœºï¼Œlima æ˜¯ ubuntuï¼Œpodman æ˜¯ fedoraï¼ˆpodman èƒŒåæ˜¯ redhat å‡ºçš„ï¼‰ã€‚ç„¶åå„è‡ªåœ¨å…¶è™šæ‹Ÿæœºå¼€å§‹ containerd å’Œ podman ç¯å¢ƒæ¥æ›¿ä»£ dockerã€‚&lt;/p&gt;
&lt;h2&gt;åç»­&lt;/h2&gt;
&lt;p&gt;ç”±äºå…¬å¸çš„é¡¹ç›®ä¸­æœ‰ç”¨åˆ°ç”¨æ—§ç‰ˆæœ¬æ¥ç¼–è¯‘ protobuf æ–‡ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨ docker æ¥åˆ›å»ºå°±ç‰ˆæœ¬ protoc ç¯å¢ƒå°±æ¯”è¾ƒæ–¹ä¾¿äº†ï¼Œå› ä¸ºè¿˜æœ‰æ–°é¡¹ç›®ç”¨æ–°ç‰ˆæœ¬ protocï¼Œä½¿ç”¨ docker çš„ä¸åŒé•œåƒå¯ä»¥åˆ†ç¦»ä¸åŒçš„ç¯å¢ƒã€‚è¿™æ—¶ podman è¿™ä¸ªå·¥å…·å°±ä¸è¡Œäº†ï¼Œå› ä¸º podman åœ¨ mac ä¸‹è¿˜ä¸æ”¯æŒæŒ‚è½½ mac ä¸‹çš„ç›®å½•ï¼Œå°±æ˜¯è¯´ podman çš„å®¹å™¨è¯»å–ä¸åˆ° mac çš„æ–‡ä»¶ï¼Œæ‰€ä»¥ï¼Œæ— æ³•åƒ docker ä¸€æ ·ï¼Œç”¨å®¹å™¨çš„è¿è¡Œç¯å¢ƒï¼Œè¯»å–å®¿ä¸»æœºçš„ protobuf æ–‡ä»¶ï¼Œç„¶åç”Ÿæˆå¯¹åº”çš„æ¯”å¦‚ pb.go æ–‡ä»¶åˆ°å®¿ä¸»æœºä¸Šã€‚è€Œ lima æ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡åœ¨ç”Ÿæˆ pb.go æ–‡ä»¶åˆ°å®¿ä¸»æœºè¿™ä¸€æ­¥ï¼Œéœ€è¦å¼€å¯ä¸€ä¸ªå†™å®¿ä¸»æœºæ–‡ä»¶çš„æƒé™ã€‚ ~/.lima/default/lima.yaml ä¾‹å¦‚å¦‚æœæ˜¯é»˜è®¤è®¾ç½®æ˜¯è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åä¿®æ”¹ mount ä¸‹çš„ write ä¸º true å°±å¯ä»¥äº†ã€‚&lt;/p&gt;</content><category term="Tech"></category><category term="docker"></category><category term="portainer"></category><category term="lima"></category><category term="podman"></category><category term="macos"></category></entry><entry><title>ä¸ªäººæœåŠ¡å™¨è‡ªåŠ¨åŒ–éƒ¨ç½²</title><link href="https://bobobo80.com/2021/ge-ren-fu-wu-qi-zi-dong-hua-bu-shu.html" rel="alternate"></link><published>2021-10-09T00:00:00+08:00</published><updated>2021-10-09T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2021-10-09:/2021/ge-ren-fu-wu-qi-zi-dong-hua-bu-shu.html</id><summary type="html">&lt;p&gt;ä¹‹å‰è‡ªå·±åšäº†ä¸€ä¸ªå°é¡¹ç›®ï¼Œç”¨äºè®°å•è¯ã€‚å› ä¸ºç›®å‰çš„èƒŒå•è¯appä¸»è¦è¿˜æ˜¯è®°æ‹¼å†™ï¼Œè€Œæˆ‘æ¯”è¾ƒæ¬ ç¼ºçš„æ˜¯è®°è¯»éŸ³ï¼Œå¾ˆå¤šå•è¯çœ‹è§è®¤è¯†ï¼Œä½†æ˜¯å¬åˆ°è¯»éŸ³ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;ä¹‹å‰è‡ªå·±åšäº†ä¸€ä¸ªå°é¡¹ç›®ï¼Œç”¨äºè®°å•è¯ã€‚å› ä¸ºç›®å‰çš„èƒŒå•è¯appä¸»è¦è¿˜æ˜¯è®°æ‹¼å†™ï¼Œè€Œæˆ‘æ¯”è¾ƒæ¬ ç¼ºçš„æ˜¯è®°è¯»éŸ³ï¼Œå¾ˆå¤šå•è¯çœ‹è§è®¤è¯†ï¼Œä½†æ˜¯å¬åˆ°è¯»éŸ³çš„ä¸çŸ¥é“æ˜¯å“ªä¸ªå•è¯ã€‚æ‰€ä»¥æƒ³ç€åšä¸ªç¨‹åºæ¥è®°è¯»éŸ³ï¼Œå¯ä»¥å…ˆå¬è¯»éŸ³å†é€‰æ˜¯å¦è®°ä½ã€‚&lt;/p&gt;
&lt;p&gt;å¤§æ¦‚èƒŒæ™¯å°±æ˜¯è¿™æ ·ã€‚åšè¿™ä¸ªä¸»è¦ä¹Ÿæ˜¯ä¸ºäº†ä½“éªŒä¸€ä¸‹å®Œæ•´å‰ç«¯åç«¯å¼€å‘ï¼Œä»¥åŠéƒ¨ç½²çš„æ•´ä¸ªæµç¨‹ã€‚æ¯•ç«Ÿå·¥ä½œä¸­ä¸»è¦æ˜¯åç«¯ï¼Œè€Œä¸”å…¶å®åªåšåç«¯çš„ä¸€éƒ¨åˆ†ã€‚åšä¸ªå°é¡¹ç›®å¯ä»¥ä½“éªŒä¸€ä¸‹å…¨æµç¨‹ã€‚è¿™æ¬¡æˆ‘ç”¨äº†fastapiä½œä¸ºåç«¯ï¼Œäº†è§£ä¸€ä¸‹è¿™ä¸ªå¾ˆç«çš„æ–°æ¡†æ¶ï¼Œå‰ç«¯æš‚æ—¶æ˜¯vueï¼Œä¸è¿‡å‰ç«¯éƒ¨åˆ†ä¸ä¼šçš„å¤ªå¤šï¼Œç›®æ ‡å…ˆæ˜¯èƒ½ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å‘çš„äº‹æš‚æ—¶æŒ‰ä¸‹ä¸è¡¨ï¼Œå…ˆæ¥è¯´è¯´æ˜¯å¦‚ä½•éƒ¨ç½²çš„ã€‚åœ¨ä»¥å‰æˆ‘ç©wordpressæ—¶ï¼Œè¿˜éƒ½æ˜¯ç”¨ä¸ªlnmpçš„è„šæœ¬ï¼Œç„¶åæŠŠphpç¨‹åºä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç„¶åå¯åŠ¨ã€‚ä¹‹ååœ¨äººäººè½¦ï¼Œä¹Ÿæ˜¯å·®ä¸å¤šï¼Œç”¨gitæ‹‰ä¸‹æ¥æ›´æ–°ï¼Œé‡å¯æœåŠ¡ï¼Œç”¨supervisorè‡ªåŠ¨é‡å¯æŒ‚æ‰çš„æœåŠ¡ã€‚è€Œåˆ°äº†å¤´æ¡ï¼Œä¸€ä¸‹å­å°±å…ˆè¿›äº†ï¼Œæœ‰TCEç³»ç»Ÿï¼Œç‚¹ä¸€ä¸‹å°±å‘å¸ƒæ–°é•œåƒéƒ¨ç½²äº†ã€‚ç°åœ¨shopeeçš„è¯ï¼Œä»‹äºä¸¤è€…ä¹‹é—´ï¼Œä¹Ÿç®—æ˜¯æœ‰è‡ªåŠ¨åŒ–çš„éƒ¨ç½²æµç¨‹ï¼Œåªä¸è¿‡ç³»ç»Ÿè¿˜æ²¡æ•´åˆåˆ°ä¸€èµ·ã€‚å¯¹æˆ‘è‡ªå·±æ¥è¯´ï¼Œè¿˜çœŸæ²¡æœ‰å®è·µè¿‡å®¹å™¨éƒ¨ç½²å’Œè¿ç»´ï¼Œæ‰€ä»¥ä¹Ÿå€Ÿè¿™ä¸ªé¡¹ç›®å®è·µä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åªä¹°äº†ä¸€å°ä¸ä¸­ä¸çº§åˆ«çš„vpsï¼Œbuyvmçš„512mbã€‚ä¸€å¹´åªè¦20åˆ€ã€‚ä¸è¿‡æ²¡æœ‰æ–°åŠ å¡èŠ‚ç‚¹ï¼Œå»¶æ—¶å¤§ä¸€äº›ã€‚k8s/k3sæš‚æ—¶å…ˆä¸ä½“éªŒäº†ï¼Œä¸æƒ³ä¸€æ­¥è¿ˆçš„å¤ªå¤§ï¼Œé…ç½®ä¹Ÿä¸å¤Ÿï¼Œå’‹çœ‹èµ·æ¥å¤æ‚åº¦ä¹Ÿå¾ˆé«˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä¸»è¦å‚è€ƒçš„æ˜¯&lt;a href="https://www.kilerd.me/personal-docker-cluster-and-ci-package-pipeline/"&gt;è¿™ä¸ªæ–‡ç« &lt;/a&gt;ï¼Œç”¨çš„docker swarmåŠ ä¸Športainerä½œä¸ºuiæ¥ç®¡ç†ï¼Œåªä¸è¿‡æˆ‘ç”¨äº†å›¾å½¢åŒ–nginxç®¡ç†å·¥å…·ã€‚è¿™ä¸ªé¡¹ç›®æ¯”è¾ƒç®€å•ï¼Œæ•°æ®åº“ç”¨çš„postgresql(ä¹Ÿæ˜¯æˆ‘ä¸ç†Ÿæ‚‰çš„ï¼Œpgadminä¸å¥½ç”¨å•ŠğŸ¤£ï¼‰ï¼Œä¼šæœ‰ä¸€ä¸ªcontianerï¼Œç„¶åpythonåç«¯èµ·ä¸€ä¸ªå®¹å™¨ã€‚å‰ç«¯æ˜¯ä¸€ä¸ªnginxçš„å®¹å™¨ã€‚æˆ‘ç”¨åˆ°äº†&lt;a href="https://nginxproxymanager.com/"&gt;nginx proxy manager&lt;/a&gt;æ¥ç®¡ç†http/sï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥è®¾ç½®è‡ªåŠ¨æ›´æ–°sslè¯ä¹¦ï¼Œå¦å¤–æœ‰uiç•Œé¢ï¼Œå°†subdomainåˆ†ç»™portainerï¼Œå‰ç«¯ï¼Œåç«¯ã€‚è¿™éƒ¨åˆ†å¯ä»¥ç”¨traefikåšï¼Œä¸è¿‡æˆ‘è¿˜æ²¡æœ‰ç ”ç©¶æ€ä¹ˆå†™é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;NPMé…ç½®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;version:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;3&amp;quot;&lt;/span&gt;

networks:
&lt;span class="w"&gt;  &lt;/span&gt;nginx-net:
&lt;span class="w"&gt;    &lt;/span&gt;external:&lt;span class="w"&gt; &lt;/span&gt;true

volumes:
&lt;span class="w"&gt;  &lt;/span&gt;nginx-data:
&lt;span class="w"&gt;    &lt;/span&gt;external:
&lt;span class="w"&gt;      &lt;/span&gt;name:&lt;span class="w"&gt; &lt;/span&gt;nginx-data
&lt;span class="w"&gt;  &lt;/span&gt;letsencrypt:
&lt;span class="w"&gt;    &lt;/span&gt;external:
&lt;span class="w"&gt;      &lt;/span&gt;name:&lt;span class="w"&gt; &lt;/span&gt;letsencrypt

services:
&lt;span class="w"&gt;  &lt;/span&gt;app:
&lt;span class="w"&gt;    &lt;/span&gt;image:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;jc21/nginx-proxy-manager:latest&amp;#39;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;ports:
&lt;span class="w"&gt;      &lt;/span&gt;#&lt;span class="w"&gt; &lt;/span&gt;HTTP&lt;span class="w"&gt; &lt;/span&gt;port
&lt;span class="w"&gt;      &lt;/span&gt;-&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;80:80&amp;#39;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;#&lt;span class="w"&gt; &lt;/span&gt;HTTPS&lt;span class="w"&gt; &lt;/span&gt;Port:
&lt;span class="w"&gt;      &lt;/span&gt;-&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;443:443&amp;#39;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;#&lt;span class="w"&gt; &lt;/span&gt;Admin&lt;span class="w"&gt; &lt;/span&gt;UI
&lt;span class="w"&gt;      &lt;/span&gt;#&lt;span class="w"&gt; &lt;/span&gt;-&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;81:81&amp;#39;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;environment:
&lt;span class="w"&gt;      &lt;/span&gt;DB_SQLITE_FILE:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/data/npm.sqlite&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;volumes:
&lt;span class="w"&gt;      &lt;/span&gt;-&lt;span class="w"&gt; &lt;/span&gt;nginx-data:/data
&lt;span class="w"&gt;      &lt;/span&gt;-&lt;span class="w"&gt; &lt;/span&gt;letsencrypt:/etc/letsencrypt
&lt;span class="w"&gt;    &lt;/span&gt;networks:
&lt;span class="w"&gt;      &lt;/span&gt;-&lt;span class="w"&gt; &lt;/span&gt;nginx-net
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;npmæ²¡æœ‰ä½¿ç”¨å®˜æ–¹çš„mysqlé…ç½®ï¼Œç”¨äº†sqliteæ•°æ®åº“ï¼Œå¦å¤–è®¾ç½®äº†ä¸¤ä¸ªvolumesï¼Œç”¨äºå­˜é…ç½®å’Œè¯ä¹¦ã€‚åœ¨httpsè½¬å‘æ²¡é…ç½®å¥½ä¹‹å‰ï¼Œ81ç«¯å£æ˜¯å¯¹å¤–å¼€å‘çš„ï¼Œåœ¨é…ç½®å¥½åï¼Œæ³¨é‡Šæ‰ï¼Œåªä¿ç•™80å’Œ443&lt;/p&gt;
&lt;p&gt;æœ‰äº†è¿™äº›ï¼Œåªæ˜¯èƒ½è®©æœåŠ¡è·‘èµ·æ¥ï¼Œè¿˜æ²¡æœ‰è¾¾åˆ°å­¦ä¹ ç›®çš„ã€‚ä¸ºäº†è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œè¿˜æœ‰äº›é¢å¤–çš„å·¥ä½œã€‚é¦–å…ˆæ˜¯é•œåƒä»“åº“ï¼Œé‰´äºdocker/githubçš„ç§æœ‰é•œåƒåº“å…è´¹é¢åº¦ä¸å¤ªå¤Ÿï¼Œæ‰€ä»¥æˆ‘å’Œé‚£ä¸ªæ•™ç¨‹ä»‹ç»çš„ä¸€æ ·ï¼Œéƒ¨ç½²äº†è‡ªå·±çš„registryã€‚å’Œæ•™ç¨‹ä¸ä¸€æ ·çš„ï¼Œæˆ‘ç”¨äº†github actionï¼Œç”¨github actionæ¥è§¦å‘å·¥ä½œæµï¼Œå½“åœ¨githubé‡Œå‘å¸ƒä¹‹åï¼Œä¼šè§¦å‘å·¥ä½œæµæ‰“åŒ…é•œåƒï¼Œç„¶åæ¨åˆ°è‡ªå·±çš„registryï¼Œç„¶åè§¦å‘portainerçš„webhookï¼Œæ›´æ–°docker serviceã€‚è¿™é‡Œæ³¨æ„æˆ‘åœ¨ç”Ÿæˆregistryçš„å¯†ç æ—¶ï¼Œç”¨çš„å‚è€ƒæ–‡ç« çš„å‘½ä»¤æœ‰é—®é¢˜ï¼ŒåˆæŸ¥äº†ä¸‹&lt;a href="https://docs.docker.com/registry/deploying/#native-basic-auth"&gt;dockerçš„æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;docker&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;--entrypoint&lt;span class="w"&gt; &lt;/span&gt;htpasswd&lt;span class="w"&gt; &lt;/span&gt;httpd:2&lt;span class="w"&gt; &lt;/span&gt;-Bbn&lt;span class="w"&gt; &lt;/span&gt;testuser&lt;span class="w"&gt; &lt;/span&gt;testpassword&lt;span class="w"&gt; &lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;auth/htpasswd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;github actions&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Build and Publish Docker image&lt;/span&gt;
&lt;span class="nt"&gt;on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;release&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;types&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;published&lt;/span&gt;&lt;span class="p p-Indicator"&gt;]&lt;/span&gt;
&lt;span class="nt"&gt;jobs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;push_to_registries&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Build and Push Docker image to multiple registries&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;runs-on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;ubuntu-latest&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;permissions&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;packages&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;write&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;read&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;get_version&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;battila7/get-version-action@v2&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Check out the repo&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;actions/checkout@v2&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Log in to Docker Hub&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;docker/login-action@v1&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;with&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;registry&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.DOCKER_REGISTRY }}&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;username&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.DOCKER_USERNAME }}&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;password&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.DOCKER_PASSWORD }}&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Build BE image&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;docker/build-push-action@v2&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;with&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;push&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;server&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;|&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="no"&gt;${{ secrets.DOCKER_REGISTRY }}/xxx-be:latest&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="no"&gt;${{ secrets.DOCKER_REGISTRY }}/xxx-be:${{ steps.get_version.outputs.version-without-v }}&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Invoke BE deploy webhook&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;joelwmale/webhook-action@master&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;with&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;url&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.BE_WEBHOOK_URL }}&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Build FE image&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;docker/build-push-action@v2&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;with&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;push&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;web_fe&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;build-args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;VUE_APP_BASE_URL=${{ secrets.VUE_APP_BASE_URL }}&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;|&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="no"&gt;${{ secrets.DOCKER_REGISTRY }}/xxx-fe:latest&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="no"&gt;${{ secrets.DOCKER_REGISTRY }}/xxx-fe:${{ steps.get_version.outputs.version-without-v }}&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Invoke FE deploy webhook&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;joelwmale/webhook-action@master&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;with&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;url&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.FE_WEBHOOK_URL }}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;github actionsè¿™é‡Œæ˜¯å‰ç«¯åç«¯åŒæ—¶éƒ¨ç½²ï¼Œå¯ä»¥åˆ†å¼€ä¸¤ä¸ªactionã€‚æˆ‘ç”¨åˆ°äº†å–release versionçš„ï¼Œè¿™æ ·åœ¨pushåˆ°registryæ—¶å¯ä»¥é™„å¸¦ä¸Šversionï¼Œæˆ‘ä»¬å°±å¯ä»¥å›æ»šæœåŠ¡äº†ã€‚æˆ‘è¿™é‡Œè§¦å‘æ¡ä»¶æ˜¯releaseï¼Œæ‰€ä»¥åœ¨mergeåˆ°main(æ˜¯çš„ï¼Œç°åœ¨é»˜è®¤å˜æˆmainåˆ†æ”¯äº†)æ—¶å¹¶ä¸è§¦å‘éƒ¨ç½²ï¼Œåªæœ‰åœ¨releaseé¡µé¢æ‰“tagåæ‰ä¼šã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å‡ ä¸ªå‘
- ä¸ºäº†å®‰å…¨ï¼Œä¼šæŠŠportainerçš„webç«¯å£ä¸æš´éœ²åœ¨å¤–ï¼Œç”±nginxè½¬å‘ï¼Œæ‰€ä»¥åœ¨è°ƒæ•´nginxå®¹å™¨æ—¶ä¸€æ—¦æŒ‚äº†ï¼Œportainer uiä¹Ÿä¼šæŒ‚æ‰ã€‚æ‰€ä»¥ä¸€èˆ¬å¯ä»¥å…ˆæŠŠ9001 uiç«¯å£å¯¹å¤–æ‰“å¼€ï¼Œè®¾ç½®å¥½nginxä¹‹åï¼Œå†æ›´æ–°portainerçš„è®¾ç½®ã€‚
- åŒç†ï¼Œnginx proxy manager ä¹Ÿæœ‰ä¸ª81ç«¯å£ï¼Œåœ¨é…ç½®å¥½httpsè½¬å‘ä¹‹åï¼Œåº”è¯¥æ›´æ–°dockeré…ç½®ï¼Œä¸è¦è®©81ç«¯å£å¯¹å¤–ã€‚
- å¦‚æœæœ‰å¤šå°æœºå™¨ç»„ç½‘ï¼Œå¯¹äºportainerå’Œdbï¼Œåº”è¯¥ä½¿ç”¨é…ç½®å›ºå®šåˆ°ä¸€å°å®ä½“æœºä¸Š&lt;a href="https://docs.docker.com/engine/swarm/services/#control-service-placement"&gt;docker-swarm deploy placement constraints&lt;/a&gt;ï¼Œå› ä¸ºvolumeåªåœ¨ä¸€å°ä¸Šï¼Œå®é™…ä¸Šæœ‰å®¹å™¨éƒ¨ç½²dbä¹Ÿä¸ç®—æ˜¯å¥½çš„å®è·µå•¦ã€‚
- é•œåƒå¦‚æœæœ‰ç‰ˆæœ¬tagï¼Œregistryä¼šè¶Šæ¥è¶Šå¤šï¼Œå¦‚æœç©ºé—´å°çš„è¯ï¼Œè¦æ³¨æ„æ¸…ç†ï¼Œå‰ç«¯çš„é•œåƒåº”è¯¥æ¯”è¾ƒå°ï¼Œæˆ‘çš„pythonçš„é•œåƒå¥½åƒæ˜¯150å¤šmbã€‚å¯¹äºæ€»å…±10gçš„vpsæ¥è¯´ï¼Œè¿˜æŒºå åœ°æ–¹çš„ã€‚
- åœ¨portaineræ–°å»ºnetworkæ—¶ï¼Œä¸»è¦åŠ ä¸Šattachableï¼Œä¸ç„¶å…¶ä»–å®¹å™¨åæœŸæ— æ³•åŠ å…¥ç½‘ç»œã€‚&lt;/p&gt;</content><category term="Tech"></category><category term="docker"></category><category term="portainer"></category><category term="github actions"></category></entry><entry><title>Pelicané›†æˆdisqus</title><link href="https://bobobo80.com/2021/pelicanji-cheng-disqus.html" rel="alternate"></link><published>2021-09-18T00:00:00+08:00</published><updated>2021-09-18T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2021-09-18:/2021/pelicanji-cheng-disqus.html</id><summary type="html">&lt;p&gt;è™½ç„¶åšå®¢åº”è¯¥ä¹Ÿä¸ä¼šæœ‰äººç•™è¨€ï¼Œä½†æ˜¯è¿˜æ˜¯é›†æˆäº†ä¸€ä¸‹disqusã€‚è¿™å…¶ä¸­è¿˜æŒºå‘çš„ï¼Œä¸€ä¸ªæ‰¾äº†å¾ˆä¹…ã€‚å…ˆè¯´ç»“è®ºï¼Œåº”è¯¥æ˜¯ç”±äºç”¨äº†github actionsè‡ªåŠ¨å‘å¸ƒï¼Œé‚£ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;è™½ç„¶åšå®¢åº”è¯¥ä¹Ÿä¸ä¼šæœ‰äººç•™è¨€ï¼Œä½†æ˜¯è¿˜æ˜¯é›†æˆäº†ä¸€ä¸‹disqusã€‚è¿™å…¶ä¸­è¿˜æŒºå‘çš„ï¼Œä¸€ä¸ªæ‰¾äº†å¾ˆä¹…ã€‚å…ˆè¯´ç»“è®ºï¼Œåº”è¯¥æ˜¯ç”±äºç”¨äº†github actionsè‡ªåŠ¨å‘å¸ƒï¼Œé‚£ä¸ªæ’ä»¶æ²¡æœ‰è¯»å–publishconfé‡Œçš„é…ç½®ï¼Œå¯¼è‡´siteurlæ˜¯ç©ºï¼Œæ‰€ä»¥å¯¼è‡´disqusçš„é‚£ä¸ªdivæ²¡æœ‰æ˜¾ç¤ºã€‚æ‰€ä»¥éœ€è¦é…ç½®å‘å¸ƒä½¿ç”¨publishconfæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä½¿ç”¨github actionsè‡ªåŠ¨push gh-pagesåˆ†æ”¯ï¼Œç”¨åˆ°äº†è¿™ä¸ªnelsonjchen/gh-pages-pelican-actionï¼Œè¿™é‡Œé¢éœ€è¦æ³¨æ„é…ç½®GITHUB_TOKENï¼Œå¦‚æœæœ‰è‡ªå·±åŸŸåï¼Œè¿˜è¦é…ç½®CNAMEã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä¸»é¢˜å’Œæ’ä»¶ï¼Œå› ä¸ºç”¨åˆ°äº†git submodulesï¼Œæ‰€ä»¥åœ¨githubé‡Œä¹Ÿéœ€è¦è¿è¡Œï¼Œé€šè¿‡gitæŠŠä¾èµ–ä¸‹ä¸‹æ¥ï¼Œç„¶åç”Ÿæˆhtml&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git&lt;span class="w"&gt; &lt;/span&gt;submodule&lt;span class="w"&gt; &lt;/span&gt;update&lt;span class="w"&gt; &lt;/span&gt;--init&lt;span class="w"&gt; &lt;/span&gt;--recursive
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å…·ä½“github actionsæ–‡ä»¶å¯ä»¥å‚è€ƒ&lt;a href="https://github.com/bobobo80/bobobo80-blog/blob/master/.github/workflows/main.yml"&gt;pelican github action&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç»­ï¼šåˆä¸€ä¸ªå‘ï¼Œä»åŸå§‹çš„attilaä¸»é¢˜repos cloneä¸‹æ¥ä¼šæœ‰"hljs" is not defined jqueryçš„é—®é¢˜ï¼Œçœ‹èµ·æ¥æ˜¯é¡µé¢æ²¡æœ‰åŠ è½½highlight.jsï¼Œä½¿ç”¨&lt;a href="https://github.com/coldnight/attila"&gt;å…¶ä»–å¤§ç¥çš„fork&lt;/a&gt;è§£å†³äº†&lt;/p&gt;
&lt;p&gt;2024å¹´ç»­ï¼šåŸæ¥çš„disqusåˆä¸æ˜¾ç¤ºäº†ï¼Œå¯èƒ½æ˜¯disqusæˆ–pelicanæœ‰æ›´æ–°ï¼Œä¸è¿‡attilaçš„åŸä½œè€…ä¹Ÿåšå‡ºäº†æ›´æ–°ï¼ŒæŠŠpelicanå’Œattilaéƒ½æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬åˆå¯ä»¥æ˜¾ç¤ºè¯„è®ºäº†ã€‚&lt;/p&gt;</content><category term="Tech"></category><category term="pelican"></category><category term="disqus"></category><category term="github actions"></category></entry><entry><title>Scrapyå’Œpyspideræ¡†æ¶æµ…è°ˆ</title><link href="https://bobobo80.com/2018/scrapyhe-pyspiderkuang-jia-qian-tan.html" rel="alternate"></link><published>2018-09-01T00:00:00+08:00</published><updated>2018-09-01T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2018-09-01:/2018/scrapyhe-pyspiderkuang-jia-qian-tan.html</id><summary type="html">&lt;p&gt;è‡ªå·±ç°åœ¨ä¹Ÿç®—æ˜¯å°å°æŠ“å–å·¥ç¨‹å¸ˆäº†ï¼Œåœ¨å…¬å¸ä¹Ÿåœ¨æ’¸è‡ªå·±çš„æ¡†æ¶ï¼Œåœ¨è¿™ä¹‹å‰ä¹Ÿæœ‰ä½¿ç”¨å’Œäº†è§£è¿‡pythonè¯­è¨€å®ç°çš„æœ€è‘—åçš„ä¸¤ä¸ªæ¡†æ¶ï¼Œå…ˆæ¥ç®€å•è¯´ä¸€è¯´ã€‚&lt;/p&gt;
&lt;h3&gt;scrapy&lt;/h3&gt;
&lt;p&gt;scrapyæ¡†æ¶åº”è¯¥ç®—æ˜¯æœ€è‘—åçš„æ¡†æ¶äº†ï¼Œä¸ç”¨ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;è‡ªå·±ç°åœ¨ä¹Ÿç®—æ˜¯å°å°æŠ“å–å·¥ç¨‹å¸ˆäº†ï¼Œåœ¨å…¬å¸ä¹Ÿåœ¨æ’¸è‡ªå·±çš„æ¡†æ¶ï¼Œåœ¨è¿™ä¹‹å‰ä¹Ÿæœ‰ä½¿ç”¨å’Œäº†è§£è¿‡pythonè¯­è¨€å®ç°çš„æœ€è‘—åçš„ä¸¤ä¸ªæ¡†æ¶ï¼Œå…ˆæ¥ç®€å•è¯´ä¸€è¯´ã€‚&lt;/p&gt;
&lt;h3&gt;scrapy&lt;/h3&gt;
&lt;p&gt;scrapyæ¡†æ¶åº”è¯¥ç®—æ˜¯æœ€è‘—åçš„æ¡†æ¶äº†ï¼Œä¸ç”¨å®ƒä¹Ÿåº”è¯¥å¯¹å…¶æœ‰æ‰€äº†è§£å§ã€‚scrapyåŸºäºtwistedå¼‚æ­¥æ¡†æ¶ç¼–å†™ï¼Œç†è®ºä¸Šçˆ¬å–çš„è¿‡ç¨‹ä¸­éƒ½æ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­çš„ï¼Œåˆ©ç”¨å¼‚æ­¥çš„æœºåˆ¶å®ç°ä¸‹è½½å’Œåå¤„ç†ä¸å µå¡ï¼Œæ‰€ä»¥åœ¨è§£æå’Œå­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ•°æ®åº“æ“ä½œæ—¶é—´é•¿ï¼Œéœ€è¦ä½¿ç”¨twistedçš„æ•°æ®åº“è¿æ¥è¿›è¡Œæ“ä½œã€‚åœ¨ä¸­é—´ä»¶ç­‰ä¸­ä½¿ç”¨time.sleepè¿™ç§æ“ä½œè‚¯å®šä¹Ÿæ˜¯ä¼šå µå¡æ‰€æœ‰çš„æ“ä½œçš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘çœ‹æ¥scrapyæœ€å¥½çš„è®¾è®¡æ˜¯ä¸­é—´ä»¶è®¾è®¡ï¼ˆ&lt;a href="https://docs.scrapy.org/en/latest/faq.html#did-scrapy-steal-x-from-django"&gt;å’Œdjangoæ’ä»¶æ€è·¯å¾ˆåƒ&lt;/a&gt;ï¼‰ï¼Œåœ¨ä¸‹è½½ã€è§£æã€å­˜å‚¨ä¸­æä¾›äº†å¯ç»„åˆçš„æ¨¡å—åŒ–é…ç½®ï¼Œä¸ºå„ç§å¤ç”¨æä¾›äº†å¸®åŠ©ã€‚&lt;/p&gt;
&lt;p&gt;scrapyçš„ç»“æ„ç»„æˆéå¸¸çš„ç»å…¸äº†ï¼Œåˆ†æˆå¼•æ“ï¼Œè°ƒåº¦å™¨ï¼Œä¸‹è½½å™¨ï¼Œè§£æå™¨spiderï¼Œitem pipelineç»“æœå¤„ç†å‡ ä¸ªéƒ¨åˆ†ï¼Œè™½ç„¶åŸºæœ¬æ‰€æœ‰æ¡†æ¶éƒ½æ˜¯è¿™ä¹ˆåˆ’åˆ†çš„ï¼Œä½†æ˜¯å’Œpyspideræ¯”è¿˜æ˜¯æœ‰æ‰€ä¸åŒçš„ã€‚scrapyæ˜¯ä¸€ä¸ªè¿›ç¨‹é›†æˆæ‰€æœ‰å†…å®¹ï¼Œå¦‚æœæ˜¯éœ€è¦åˆ†å¸ƒå¼ï¼Œä¾é è°ƒåº¦å™¨çš„é˜Ÿåˆ—æ¥åˆ†å¸ƒå¼å¤„ç†ã€‚è¿™ç§æƒ…å†µå°±æ˜¯åˆ†å¸ƒå¼çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½åŒ…å«å¼•æ“ï¼Œä¸‹è½½ï¼Œè§£æç­‰ã€‚å½“ç„¶å¯ä»¥ä½¿ç”¨å¦å¤–çš„ç­–ç•¥ï¼Œè®©scrapyåªä¸‹è½½ï¼Œé€šè¿‡å…¶ä»–æ–¹å¼æ¥å¤„ç†å…¶ä»–çš„éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h3&gt;pyspider&lt;/h3&gt;
&lt;p&gt;é‚£ä¹ˆå…¶å®ä»ç»“æ„ä¸Šæ¥è¯´ï¼Œpyspiderä»è¿™ä¸ªå±‚é¢å’Œscrapyæ˜¯å®Œå…¨çš„ä¸åŒçš„ã€‚pyspiderå°†è°ƒåº¦ï¼Œä¸‹è½½ï¼Œè§£ææŒ‰è¿›ç¨‹åˆ†å¼€ï¼Œä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œè¿æ¥ï¼Œæ‰€ä»¥è¯´pyspiderçš„å„ä¸ªåŠŸèƒ½æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ï¼Œåˆ†å¸ƒå¼æƒ…å†µä¸‹ï¼Œå„ä¸ªåŠŸèƒ½è¿›ç¨‹å¯ä»¥æ‹†åˆ†å¼€éƒ¨ç½²ç­‰ï¼Œæ‰€ä»¥ç»“æ„ä¸Šåˆ†å¼€çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªæ˜æ˜¾çš„åŒºåˆ«æ˜¯pyspiderå¯¹ä¸åŒä»»åŠ¡çš„ç®¡ç†ï¼Œç›¸å¯¹äºscrapyèƒ½å¤Ÿåœ¨æ›´é«˜ä¸€ä¸ªå±‚çº§çš„è¿›è¡Œç®¡ç†ï¼Œpyspiderä¸­çš„webuiç®¡ç†ç›¸å½“äºå¯¹å¤šä¸ªé¡¹ç›®è¿›è¡Œç®¡ç†ï¼Œè¿™ä¸€ç‚¹åœ¨scrapyæ˜¯æ²¡æœ‰è¿™ä¸ªå±‚çº§çš„ä¸œè¥¿çš„ï¼Œscrapydé…åˆç›¸å…³çš„webuiç®¡ç†é¡¹ç›®ï¼ˆæ¯”å¦‚gerapyï¼‰æ‰æ˜¯è¿™ä¸ªå±‚çº§çš„ä¸€ä¸ªå®ç°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é¡¹ç›®å¼€å‘ä¸Šï¼Œpyspiderä¸€èˆ¬æ˜¯å•æ–‡ä»¶ä¸Šè¿›è¡Œå¼€å‘ï¼Œè¿˜æ²¡æœ‰åŸç”Ÿä¸­é—´ä»¶æœºåˆ¶ï¼Œå¦‚æœéœ€è¦åˆ©ç”¨æ¨¡å—åŒ–çš„æ–¹å¼é‡ç”¨ä¸€äº›åŠŸèƒ½ï¼Œå¥½åƒæ— æ³•å®Œå…¨é€šè¿‡webuiçš„é‚£ä¸ªç®¡ç†ç³»ç»Ÿå®ç°ï¼Œéœ€è¦åœ¨ç»ˆç«¯éƒ¨ç½²ä¾èµ–çš„å„ç§é‡ç”¨åŠŸèƒ½çš„æ–‡ä»¶ã€‚æ‰€ä»¥å…¶å®æ¯”è¾ƒåå‘äºå¤§é‡ç®€å•çˆ¬è™«é¡¹ç›®çš„é›†ä¸­ç®¡ç†ã€‚è€Œscrapyæœ¬èº«å¯ä»¥æ›´æ–¹ä¾¿çš„æ‰©å±•ï¼Œæ›´å®¹æ˜“å®Œæˆå¤æ‚çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;æºç ä¸Šæ¥è¯´ï¼Œpyspiderè¿˜å¾ˆå•è–„ï¼Œä¸è¿‡å¥½å¤„æ˜¯ä¹Ÿæ¯”è¾ƒå®¹æ˜“è¯»ï¼Œè€Œscrapyå†é…åˆä¸Šå…¶ä¾èµ–çš„twistedï¼Œå—¯ï¼Œå¤Ÿå–ä¸€å£¶çš„äº†ã€‚&lt;/p&gt;
&lt;h3&gt;å°ç»“&lt;/h3&gt;
&lt;p&gt;æ‰€ä»¥ä¸¤ä¸ªæ¡†æ¶è¿˜æ˜¯æœ‰å¾ˆå¤§ä¸åŒçš„ï¼Œä»ç»“æ„ä¸Šè¯´æˆ‘æ›´å€¾å‘äºpyspiderï¼Œå› ä¸ºå„ä¸ªçˆ¬è™«çš„æ ¸å¿ƒåŠŸèƒ½èƒ½å¤Ÿæ›´å¤§çš„è§£è€¦ã€‚ä¸è¿‡ä»…å°±pyspiderï¼Œå¯èƒ½è¿˜æ˜¯ç›¸å¯¹åå‘ç®€å•ä»»åŠ¡ï¼Œå¯¹äºåŠŸèƒ½çš„å¤ç”¨ç­‰æ–¹é¢ï¼Œè¿˜æ¯”è¾ƒå¥½çš„æ”¯æŒã€‚&lt;/p&gt;</content><category term="Tech"></category><category term="python"></category></entry><entry><title>pyenvçš„ä½¿ç”¨</title><link href="https://bobobo80.com/2018/pyenvde-shi-yong.html" rel="alternate"></link><published>2018-08-18T00:00:00+08:00</published><updated>2018-08-18T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2018-08-18:/2018/pyenvde-shi-yong.html</id><summary type="html">&lt;p&gt;pyenvæ˜¯ä¸€ä¸ªpythonçš„ç‰ˆæœ¬ç®¡ç†å™¨ï¼ŒåŒæ—¶è¿˜å…·æœ‰è™šæ‹Ÿç¯å¢ƒç®¡ç†çš„åŠŸèƒ½ï¼Œå¯¹äºéœ€è¦å®‰è£…æˆ–éƒ¨ç½²ä¸åŒç‰ˆæœ¬åœ¨ä¸€å°æœºå™¨çš„æƒ…å†µä¸‹ï¼Œpyenvéå¸¸åˆé€‚ã€‚å¯¹äºå¸¸ç”¨çš„centos6.5æ¥è¯´é»˜è®¤æ˜¯python2.6ç¯å¢ƒï¼Œyumä»€ä¹ˆçš„è¿˜ä¾èµ–2.6ç‰ˆæœ¬ï¼Œæ‰€ä»¥ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;pyenvæ˜¯ä¸€ä¸ªpythonçš„ç‰ˆæœ¬ç®¡ç†å™¨ï¼ŒåŒæ—¶è¿˜å…·æœ‰è™šæ‹Ÿç¯å¢ƒç®¡ç†çš„åŠŸèƒ½ï¼Œå¯¹äºéœ€è¦å®‰è£…æˆ–éƒ¨ç½²ä¸åŒç‰ˆæœ¬åœ¨ä¸€å°æœºå™¨çš„æƒ…å†µä¸‹ï¼Œpyenvéå¸¸åˆé€‚ã€‚å¯¹äºå¸¸ç”¨çš„centos6.5æ¥è¯´é»˜è®¤æ˜¯python2.6ç¯å¢ƒï¼Œyumä»€ä¹ˆçš„è¿˜ä¾èµ–2.6ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä½¿ç”¨pyenvéå¸¸åˆé€‚ã€‚è‡ªå·±çš„å¼€å‘æœºä¹Ÿå¯ä»¥å®‰è£…å„ç§ç‰ˆæœ¬çš„pythonã€‚&lt;/p&gt;
&lt;h2&gt;å®‰è£…&lt;/h2&gt;
&lt;p&gt;æ³¨æ„æå‰éœ€è¦è£…ä¸€äº›ç¼–è¯‘pythonéœ€è¦çš„&lt;/p&gt;
&lt;p&gt;rpmç³»&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;yum&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;zlib-devel&lt;span class="w"&gt; &lt;/span&gt;bzip2&lt;span class="w"&gt; &lt;/span&gt;bzip2-devel&lt;span class="w"&gt; &lt;/span&gt;readline-devel&lt;span class="w"&gt; &lt;/span&gt;sqlite&lt;span class="w"&gt; &lt;/span&gt;sqlite-devel&lt;span class="w"&gt; &lt;/span&gt;openssl-devel&lt;span class="w"&gt; &lt;/span&gt;xz&lt;span class="w"&gt; &lt;/span&gt;xz-devel&lt;span class="w"&gt; &lt;/span&gt;gcc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;debç³»&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;make&lt;span class="w"&gt; &lt;/span&gt;build-essential&lt;span class="w"&gt; &lt;/span&gt;libssl-dev&lt;span class="w"&gt; &lt;/span&gt;zlib1g-dev&lt;span class="w"&gt; &lt;/span&gt;libbz2-dev&lt;span class="w"&gt; &lt;/span&gt;libreadline-dev&lt;span class="w"&gt; &lt;/span&gt;libsqlite3-dev&lt;span class="w"&gt; &lt;/span&gt;wget&lt;span class="w"&gt; &lt;/span&gt;curl&lt;span class="w"&gt; &lt;/span&gt;llvm&lt;span class="w"&gt; &lt;/span&gt;libncurses5-dev&lt;span class="w"&gt; &lt;/span&gt;xz-utils&lt;span class="w"&gt; &lt;/span&gt;tk-dev&lt;span class="w"&gt; &lt;/span&gt;libxml2-dev&lt;span class="w"&gt; &lt;/span&gt;libxmlsec1-dev&lt;span class="w"&gt; &lt;/span&gt;libffi-dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å®‰è£…éå¸¸ç®€å•ï¼Œä¸€æ¡è¯­å¥æå®š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;curl&lt;span class="w"&gt; &lt;/span&gt;-L&lt;span class="w"&gt; &lt;/span&gt;https://raw.githubusercontent.com/pyenv/pyenv-installer/master/bin/pyenv-installer&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;*ä¸€äº›è€ç‰ˆæœ¬çš„æœºå™¨å¯èƒ½ä¼šå‡ºç°git cloneé”™è¯¯ï¼Œéœ€è¦æ›´æ–°nssï¼Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;yum&lt;span class="w"&gt; &lt;/span&gt;update&lt;span class="w"&gt; &lt;/span&gt;nss
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è„šæœ¬å®Œæˆååœ¨~/.bashrc_profileä¸­æ·»åŠ ï¼Œè¿™æ ·é‡å¯bashï¼Œå°±å¯ä»¥ä½¿ç”¨pyenvå‘½ä»¤äº†&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;~/.pyenv/bin:&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;eval&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;pyenv&lt;span class="w"&gt; &lt;/span&gt;init&lt;span class="w"&gt; &lt;/span&gt;-&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;eval&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;pyenv&lt;span class="w"&gt; &lt;/span&gt;virtualenv-init&lt;span class="w"&gt; &lt;/span&gt;-&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;ä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;æŸ¥çœ‹å¯ä»¥å®‰è£…å“ªäº›ç‰ˆæœ¬çš„python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pyenv&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;--list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æŸ¥çœ‹å½“å‰å·²å®‰è£…çš„ç‰ˆæœ¬&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pyenv&lt;span class="w"&gt; &lt;/span&gt;versions
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å®‰è£…æŒ‡å®šç‰ˆæœ¬&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pyenv&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.6.4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pyenv&lt;span class="w"&gt; &lt;/span&gt;global&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.7.14
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨æŸä¸ªæŒ‡å®šç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pyenv&lt;span class="w"&gt; &lt;/span&gt;virtualenv&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.7.14&lt;span class="w"&gt; &lt;/span&gt;virtualenv_name
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ¿€æ´»åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pyenv&lt;span class="w"&gt; &lt;/span&gt;activate&lt;span class="w"&gt; &lt;/span&gt;virtualenv_name
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å–æ¶ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pyenv&lt;span class="w"&gt; &lt;/span&gt;deactivate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;åœ¨è„šæœ¬ä¸­ä½¿ç”¨æ—¶ï¼Œè™šæ‹Ÿç¯å¢ƒçš„è·¯å¾„æ˜¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;~/.pyenv/versions/2.7.14/envs/virtualenv_name/bin/python
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å®‰è£…æ—¶ï¼Œä»python.orgä¸‹è½½çš„é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…æºè¿›è¡Œä¸‹è½½åï¼Œæ”¾åˆ°~/.pyenv/cache/æ–‡ä»¶å¤¹ä¸‹ï¼Œå†è¿›è¡Œæœ¬åœ°å®‰è£…ã€‚åŸæ¥å¯ä»¥ä½¿ç”¨æœç‹çš„é•œåƒç½‘ç«™ï¼Œä¸è¿‡è²Œä¼¼ç°åœ¨æœç‹é•œåƒå…³é—­äº†ï¼Œæ‰€ä»¥å¥½åƒç°åœ¨è¿˜çœŸæ²¡æœ‰å“ªä¸ªé•œåƒç«™æä¾›pythonçš„å®‰è£…åŒ…é•œåƒäº†ï¼Œæ‰€ä»¥ä¸€èˆ¬æ˜¯ç¿»å¢™åä¸‹è½½ï¼Œç„¶åcpåˆ°cacheç›®å½•ä¸‹ã€‚&lt;/p&gt;
&lt;h2&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/pyenv/pyenv"&gt;pyenv-github&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/pyenv/pyenv-installer"&gt;pyenv-installer-github&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.cnblogs.com/npumenglei/p/3719412.html"&gt;http://www.cnblogs.com/npumenglei/p/3719412.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/pyenv/pyenv/wiki/Common-build-problems"&gt;https://github.com/pyenv/pyenv/wiki/Common-build-problems&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.uedbox.com/pyenv-speed/"&gt;https://www.uedbox.com/pyenv-speed/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Tech"></category><category term="python"></category></entry><entry><title>python3ä¸­filterè¿”å›å€¼çš„åˆ¤æ–­é—®é¢˜</title><link href="https://bobobo80.com/2017/python3zhong-filterfan-hui-zhi-de-pan-duan-wen-ti.html" rel="alternate"></link><published>2017-09-10T00:00:00+08:00</published><updated>2017-09-10T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2017-09-10:/2017/python3zhong-filterfan-hui-zhi-de-pan-duan-wen-ti.html</id><summary type="html">&lt;p&gt;æœ€æ—©æ¥è§¦python3æ¥è¯´ï¼Œæœ€æ˜æ˜¾çš„å˜åŒ–å°±æ˜¯printæ–¹æ³•äº†ï¼Œå¦ä¸€ä¸ªéå¸¸å¤§çš„å˜åŒ–
æ˜¯è¿”å›å€¼ç”Ÿæˆå™¨ç±»å‹çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨python2ä¸­ï¼Œå¾ˆå¤šè¿”å›listç±»å‹çš„æ–¹æ³•ï¼Œåœ¨python3ä¸­éƒ½è¿”å›ç”Ÿæˆå™¨å¯¹è±¡ï¼Œ
æ¯”å¦‚æœ€è‘—åçš„ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;æœ€æ—©æ¥è§¦python3æ¥è¯´ï¼Œæœ€æ˜æ˜¾çš„å˜åŒ–å°±æ˜¯printæ–¹æ³•äº†ï¼Œå¦ä¸€ä¸ªéå¸¸å¤§çš„å˜åŒ–
æ˜¯è¿”å›å€¼ç”Ÿæˆå™¨ç±»å‹çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨python2ä¸­ï¼Œå¾ˆå¤šè¿”å›listç±»å‹çš„æ–¹æ³•ï¼Œåœ¨python3ä¸­éƒ½è¿”å›ç”Ÿæˆå™¨å¯¹è±¡ï¼Œ
æ¯”å¦‚æœ€è‘—åçš„range()ï¼Œåœ¨python3ä¸­è¿”å›ç”Ÿæˆå™¨ï¼Œå³python2ä¸­çš„xrange()ã€‚
è€Œå¾ˆå¤šå…¶ä»–æ–¹æ³•ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæ¯”å¦‚listç›¸å…³çš„map,reduce,filteræ–¹æ³•ï¼Œ
è¿˜æœ‰dictæ“ä½œçš„keys(),items()ç­‰ï¼Œéƒ½æ˜¯ç”±åŸæ¥çš„è¿”å›listç±»å‹ï¼Œ
è½¬è€Œè¿”å›ç”Ÿæˆå™¨ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±éœ€è¦åœ¨ä½¿ç”¨ifåˆ¤æ–­æ—¶æ³¨æ„äº†ï¼Œæ¯”å¦‚filteræ–¹æ³•ï¼Œå¦‚æœä½¿ç”¨ifåˆ¤æ–­ï¼Œ
å°±éœ€è¦æ³¨æ„äº†ï¼Œæ¯”å¦‚ä¸‹é¢çš„æƒ…å†µ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;if True&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;åœ¨python2ä¸­ï¼Œå› ä¸ºfilterè¿”å›çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„[]ï¼Œifåˆ¤æ–­å°†æ˜¯Falseã€‚&lt;/p&gt;
&lt;p&gt;è€Œåœ¨python3ä¸­ï¼Œfilterè¿”å›ä¸ºfilterå¯¹è±¡ï¼Œifåˆ¤æ–­å°†æ˜¯Trueï¼Œ
å°†æ‰§è¡Œifä¸­çš„è¯­å¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡å¯¹äºdictçš„keysç­‰æ–¹æ³•ï¼Œåˆ™ä¸æ˜¯è¿™æ ·ï¼Œå½“dictä¸º{}ç©ºå­—å…¸æ—¶ï¼Œ
dict.keys()è¿”å›çš„dict_keyså¯¹è±¡ä¼šæ ¹æ®é‡Œé¢æ˜¯å¦æœ‰å†…å®¹è€Œè¿›è¡Œå¯¹åº”çš„åˆ¤æ–­ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;adict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;dict a is not empty.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Tech"></category><category term="python"></category></entry><entry><title>ä½¿ç”¨Django+Vueç»„åˆå¼€å‘Restfulé£æ ¼çš„å®¶ç”¨æ”¶çº³ç³»ç»Ÿ</title><link href="https://bobobo80.com/2017/shi-yong-djangovuezu-he-kai-fa-restfulfeng-ge-de-jia-yong-shou-na-xi-tong.html" rel="alternate"></link><published>2017-06-26T00:00:00+08:00</published><updated>2017-06-26T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2017-06-26:/2017/shi-yong-djangovuezu-he-kai-fa-restfulfeng-ge-de-jia-yong-shou-na-xi-tong.html</id><summary type="html">&lt;p&gt;ä¸ºäº†è¿›ä¸€æ­¥å­¦ä¹ webå¼€å‘ç›¸å…³å†…å®¹ï¼Œè‡ªå·±æƒ³äº†ä¸ªéœ€æ±‚ï¼Œå°±å¼€å§‹å¹²äº†ã€‚
&lt;a href="https://github.com/bobobo80/RightThingsInRightPlaces"&gt;githubé¡¹ç›®é“¾æ¥&lt;/a&gt;
æ„æ¶é‡‡ç”¨æµè¡Œçš„RESTful apié£æ ¼åç«¯åŠ å“åº”å¼å‰ç«¯ç»„åˆï¼Œè™½ç„¶éƒ½è¿˜ä¸ç†Ÿæ‚‰ï¼Œä½†æ˜¯ç¡¬ç€å¤´çš®å¼€å§‹ã€‚
ç»è¿‡ä¸€ç•ªè°ƒ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;ä¸ºäº†è¿›ä¸€æ­¥å­¦ä¹ webå¼€å‘ç›¸å…³å†…å®¹ï¼Œè‡ªå·±æƒ³äº†ä¸ªéœ€æ±‚ï¼Œå°±å¼€å§‹å¹²äº†ã€‚
&lt;a href="https://github.com/bobobo80/RightThingsInRightPlaces"&gt;githubé¡¹ç›®é“¾æ¥&lt;/a&gt;
æ„æ¶é‡‡ç”¨æµè¡Œçš„RESTful apié£æ ¼åç«¯åŠ å“åº”å¼å‰ç«¯ç»„åˆï¼Œè™½ç„¶éƒ½è¿˜ä¸ç†Ÿæ‚‰ï¼Œä½†æ˜¯ç¡¬ç€å¤´çš®å¼€å§‹ã€‚
ç»è¿‡ä¸€ç•ªè°ƒç ”ï¼ŒDjango Rest frameworkï¼ˆdrfï¼‰ç®—æ˜¯æ¯”è¾ƒå¹¿æ³›çš„restfulåº“äº†ï¼Œçœ‹äº†çœ‹æ–‡æ¡£ï¼Œæ¯”è¾ƒæ¸…æ™°ï¼Œåœ¨åºåˆ—åŒ–æ–¹é¢æœ‰ä¸€äº›ä¾¿æ·çš„æ–¹æ³•ã€‚
åç«¯éªŒè¯æ–¹é¢ï¼Œä½¿ç”¨äº†drfæ–‡æ¡£é‡Œæ¨èçš„oauth toolkitåº“æ¥ç»„åˆã€‚
å‰ç«¯æ–¹é¢ï¼Œè®¸ä¹…ä¹‹å‰åªæ˜¯äº†è§£ä¸€äº›åŸºæœ¬çš„å‰ç«¯ä¸œè¥¿ï¼Œhtml/css/jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æœ‰åŸºæœ¬æ¦‚å¿µã€‚
æ—¢ç„¶è¦æé«˜ç«¯çš„å“åº”å¼ï¼Œé‚£ä¹ˆå¯¹æ¯”ä¸€ä¸‹æµè¡Œçš„react/vue/augularå‘ç°å‰ç«¯ä¸€å¥—å¥—æ¡†æ¶å•Šå·¥å…·å•Šåˆæ˜¯å¾ˆæ·±çš„å‘ï¼Œé€‰äº†çœ‹èµ·æ¥å¯ä»¥ç”¨æœ€ç®€å•æ–¹å¼çš„å•vueçš„æ–¹å¼æ¥å¼€å‘ã€‚
å¯¹äºåˆå­¦è€…ï¼Œæ„Ÿè§‰è¿˜æ˜¯ä¸è¦åœ¨åŸºç¡€è–„å¼±çš„æƒ…å†µä¸‹å°±ç›´æ¥å¼€å§‹ï¼Œæ–‡æ¡£ä¸­å¾ˆå¤šä¸œè¥¿éƒ½ä¸çŸ¥é“ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰ç®—æ˜¯å®Œæˆäº†ç¬¬ä¸€ä¸ªé˜¶æ®µï¼ŒåŸºç¡€çš„æ–‡ä»¶å¤¹å’Œç‰©å“ç»“æ„å’ŒæŸ¥å¢æ”¹åˆ ï¼Œtagæ ‡ç­¾è®¾ç½®ï¼Œç”¨æˆ·ç™»å½•ç­‰ï¼Œ
åé¢è¿˜æœ‰æœç´¢åŠŸèƒ½éœ€è¦æ¢ç´¢ä¸€ä¸‹ã€‚ç„¶ååœ¨å…¨é¢å­¦ä¹ ä¸€ä¸‹å‰ç«¯ä¹‹åï¼Œå†æ¥å®Œå–„ä¸€è½®å‰ç«¯åç«¯ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æŠŠç°åœ¨çš„ç‰ˆæœ¬éƒ¨ç½²åˆ°äº†&lt;a href="http://bobobo80.pythonanywhere.com"&gt;pythonanywhere&lt;/a&gt;&lt;/p&gt;</content><category term="Tech"></category><category term="django"></category><category term="python"></category></entry><entry><title>flaskä¸€æ¬¡å®¢æˆ·ç«¯è¯·æ±‚çš„è¿‡ç¨‹</title><link href="https://bobobo80.com/2017/flaskyi-ci-ke-hu-duan-qing-qiu-de-guo-cheng.html" rel="alternate"></link><published>2017-05-14T00:00:00+08:00</published><updated>2017-05-14T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2017-05-14:/2017/flaskyi-ci-ke-hu-duan-qing-qiu-de-guo-cheng.html</id><summary type="html">&lt;p&gt;æŒ‰ç…§Werkzeugçš„ç¤ºä¾‹ï¼Œç»§æ‰¿å°è£…äº†æ ‡å‡†åº“httpä¸­çš„HTTPServerå’ŒBaseHTTPRequestHandlerã€‚åœ¨å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚åï¼Œä¼šè§¦å‘åˆ°Handlerç±»ä¸­çš„handle()æ–¹æ³•ï¼Œç„¶åæ˜¯ä¸€è¿ä¸²çš„handle_one_request()--&amp;gt;run_wsgi()æ–¹æ³•ï¼Œrun_wsgiåœ¨werkzeugä¸­é‡å†™äº†ä¼šæ”¶é›†ç¯å¢ƒä¿¡æ¯environï¼Œå¹¶å®šä¹‰äº†writeï¼Œstart_responseï¼Œexecuteå†…ç½®æ–¹æ³•ï¼Œç„¶åä¼š â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;æŒ‰ç…§Werkzeugçš„ç¤ºä¾‹ï¼Œç»§æ‰¿å°è£…äº†æ ‡å‡†åº“httpä¸­çš„HTTPServerå’ŒBaseHTTPRequestHandlerã€‚åœ¨å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚åï¼Œä¼šè§¦å‘åˆ°Handlerç±»ä¸­çš„handle()æ–¹æ³•ï¼Œç„¶åæ˜¯ä¸€è¿ä¸²çš„handle_one_request()--&amp;gt;run_wsgi()æ–¹æ³•ï¼Œrun_wsgiåœ¨werkzeugä¸­é‡å†™äº†ä¼šæ”¶é›†ç¯å¢ƒä¿¡æ¯environï¼Œå¹¶å®šä¹‰äº†writeï¼Œstart_responseï¼Œexecuteå†…ç½®æ–¹æ³•ï¼Œç„¶åä¼šæ‰§è¡Œexecuteæ–¹æ³•ï¼Œè¿™é‡Œapp(environ, start_response)ï¼Œappå³flaskçš„appå®ä¾‹ï¼Œä¼šå…ˆè§¦å‘ä¸­é—´ä»¶çš„__call__()æ–¹æ³•ï¼Œç„¶åè°ƒç”¨flaskçš„__call__()ï¼Œcallæ–¹æ³•ä¸­é»˜è®¤æ˜¯ç›´æ¥è°ƒç”¨wsgi_app(environ, start_response)ã€‚æ‰€ä»¥flaskä¸­å³åœ¨wsgi_app(environ, start_response)ä¸­å®ŒæˆWSGIçš„æ ‡å‡†æ¥å£çš„åº”ç”¨å®ç°ã€‚
wsgi_appä¸­æ¯ä¸€è¡Œéƒ½æ˜¯å¯¹å“åº”å¤„ç†çš„ä¸€æ­¥æ­¥åˆ›å»ºå’ŒåŠ å·¥ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request_context&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;preprocess_request&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dispatch_request&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;make_response&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;process_response&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;start_response&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;with self.request_context(environ): é€šè¿‡åˆ›å»º_RequestContextçš„å®ä¾‹ï¼Œå¹¶åœ¨__enter__ä¸­å°†è¿™ä¸ªå®ä¾‹å‹å…¥_request_ctx_stackå…¨å±€æ ˆã€‚
preprocess_requestç®—æ˜¯å‰å¤„ç†è¿‡ç¨‹ï¼Œé€šè¿‡@before_requestä¿®é¥°çš„æ–¹æ³•åœ¨æ­¤è¿›è¡Œå¤„ç†
dispatch_requestæ˜¯å¤„ç†è¯·æ±‚çš„æ­£å¼æ–¹æ³•ï¼Œæ ¹æ®åˆå§‹åŒ–æ—¶å¤„ç†çš„è·¯ç”±MAPï¼Œæ ¹æ®è¯·æ±‚çš„URLæ‰¾åˆ°å¯¹åº”çš„viewä¸­å®šä¹‰çš„å¯¹åº”çš„å“åº”æ–¹æ³•å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†view_functions&lt;a href="**values"&gt;endpoint&lt;/a&gt;ï¼Œview_function[endpoint]å°±æ˜¯é‚£ä¸ªå¯¹åº”çš„viewä¸­çš„æ–¹æ³•ã€‚
make_responseå¯¹viewä¸­æ–¹æ³•çš„è¿”å›å€¼è¿›è¡Œå¤„ç†ï¼Œè®²è¿”å›ç»“æœè½¬æ¢ä¸ºresponseå¯¹è±¡response_classç±»å‹çš„å®ä¾‹
process_responseæ˜¯å’Œpreprocess_requestå¯¹åº”çš„åå¤„ç†æ–¹æ³•ï¼Œé»˜è®¤æä¾›äº†sessionçš„å¤„ç†ï¼Œä¹‹åæ˜¯é€šè¿‡@after_requestä¿®é¥°çš„æ–¹æ³•åœ¨è¿™é‡Œæ‰§è¡Œ
æœ€åè¿”å›response
flaskçš„å¤„ç†ç»“æŸï¼Œç„¶ååˆå›åˆ°äº†werkzeugä¸­ï¼Œè¿”å›å†…å®¹é€šè¿‡wfile.write()ï¼Œå‘é€å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;</content><category term="Tech"></category><category term="python"></category><category term="flask"></category></entry><entry><title>æ­£åˆ™è¡¨è¾¾å¼ç¯è§†çš„ç†è§£</title><link href="https://bobobo80.com/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html" rel="alternate"></link><published>2017-05-08T00:00:00+08:00</published><updated>2017-05-08T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2017-05-08:/2017/zheng-ze-biao-da-shi-huan-shi-de-li-jie.html</id><summary type="html">&lt;p&gt;æœ€è¿‘çœ‹å®Œäº†ã€Šç²¾é€šæ­£åˆ™è¡¨è¾¾å¼ã€‹çš„å‰é¢å’Œè¯­è¨€æ— å…³çš„å‡ ç« ï¼Œä¹Ÿæ­£å¥½ç¢°åˆ°äº†ä¸€ä¸ªçŸ¥ä¹é—®é¢˜ï¼Œæ‰€ä»¥å°±å¼ºè¡Œç­”äº†ä¸€ä¸‹ã€‚&lt;a href="https://www.zhihu.com/question/59126490/answer/165253638"&gt;å¦‚ä½•ç†è§£å…ˆè¡Œ â€¦&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;æœ€è¿‘çœ‹å®Œäº†ã€Šç²¾é€šæ­£åˆ™è¡¨è¾¾å¼ã€‹çš„å‰é¢å’Œè¯­è¨€æ— å…³çš„å‡ ç« ï¼Œä¹Ÿæ­£å¥½ç¢°åˆ°äº†ä¸€ä¸ªçŸ¥ä¹é—®é¢˜ï¼Œæ‰€ä»¥å°±å¼ºè¡Œç­”äº†ä¸€ä¸‹ã€‚&lt;a href="https://www.zhihu.com/question/59126490/answer/165253638"&gt;å¦‚ä½•ç†è§£å…ˆè¡Œæ–­è¨€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æŠŠæˆ‘çš„å›ç­”å†æ€»ç»“ä¸€ä¸‹ã€‚
(?=)åœ¨ã€Šç²¾é€šæ­£åˆ™è¡¨è¾¾å¼ã€‹ä¹¦ä¸Šå«â€œç¯è§†â€ï¼Œå…·ä½“ä¸Šè¯´å«â€œé¡ºåºè‚¯å®šç¯è§†â€ã€‚ç¯è§†ä¸å æœ‰å­—ç¬¦ï¼Œåªä½œä¸ºåˆ¤æ–­çš„æ¡ä»¶è¿›è¡ŒåŒ¹é…ã€‚&lt;/p&gt;
&lt;p&gt;1ï¼Œå…·ä½“å¦‚ä¸‹è¿™ä¸ªä¾‹å­&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;?&lt;span class="o"&gt;=.*&lt;/span&gt;\&lt;span class="nv"&gt;d&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;?&lt;span class="o"&gt;=.*&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;A&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;Z&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;\&lt;span class="nv"&gt;w&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;}$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å…ˆæ¥åˆ¨å»ä¸¤ä¸ª(?=)ç¯è§†æ¡ä»¶&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;^&lt;/span&gt;\&lt;span class="nv"&gt;w&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;}$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå³^åŒ¹é…åˆè¯•ä½ç½®é”šç‚¹ï¼Œ\wåŒ¹é…å„ç§æ–‡å­—å­—ç¬¦ï¼ˆæˆ‘ç†è§£å°±æ˜¯å­—æ¯æ•°å­—æ–‡å­—ç­‰ï¼‰ï¼Œ{8ï¼Œ15}å‰é¢å­—ç¬¦\wçš„æ•°é‡8-15ä¸ªï¼Œæœ€å$æ˜¯æœ«ä½ç½®é”šç‚¹ã€‚æ•´ä½“ä¸Šå°±æ˜¯åŒ¹é…ä¸€ä¸ªä»åˆå§‹åˆ°ç»“æŸä¸º8-15ä½å…¨æ–‡å­—å­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨åŠ ä¸Š(?=)&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ª(?=.&lt;em&gt;\d)ï¼Œæ‹¬å·ä½ç½®åœ¨^ä¹‹åï¼Œè¡¨ç¤ºä»åˆå§‹é”šç‚¹è¿™ä¸ªä½ç½®å¼€å§‹åŒ¹é…ï¼Œ.&lt;/em&gt;åŒ¹é…å„ç§å­—ç¬¦ç›´åˆ°æœ«ä½ï¼Œåè·Ÿ\dè¡¨ç¤ºåŒ¹é…æ•°å­—ï¼Œè¿™æ—¶éœ€è¦å›æº¯å¯»æ‰¾ä¸ºæ•°å­—çš„ä½ç½®ï¼Œå¦‚æœå›æº¯åˆ°æœ‰æ•°å­—çš„ä½ç½®ï¼Œé‚£ä¹ˆåŒ¹é…æˆåŠŸã€‚æ‰€ä»¥è¿™ä¸ªç¯è§†è¡¨è¾¾å¼çš„æ„æ€æ˜¯ï¼Œå¦‚æœä»é”šç‚¹çš„ä½ç½®åé¢æœ‰å«æ•°å­—çš„å­—ç¬¦åˆ™åŒ¹é…æˆåŠŸï¼Œæ»¡è¶³æ¡ä»¶ï¼Œå¦åˆ™ä¸æ»¡è¶³ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆç¬¬äºŒä¸ªä¹Ÿæ˜¯åŒæ ·é“ç†ï¼Œ(?=.*[A-Z])ï¼Œè¡¨ç¤ºå¦‚æœä»åˆå§‹é”šç‚¹ä½ç½®åé¢å­˜åœ¨å¤§å†™å­—æ¯å­—ç¬¦ï¼Œåˆ™åŒ¹é…æˆåŠŸï¼Œæ»¡è¶³æ¡ä»¶ã€‚è¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œç¯è§†ä¸å æœ‰å­—ç¬¦ï¼Œæ‰€ä»¥ï¼Œå³ä½¿è¿™ä¸ªç¯è§†è¡¨è¾¾å¼åœ¨åé¢ï¼Œä¹ŸåŒæ ·æ˜¯åœ¨å…¶ä½ç½®^ä¹‹åå¼€å§‹åŒ¹é…æ£€æŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åæŠŠä¸¤ä¸ªç¯è§†æ¡ä»¶éƒ½åŠ ä¸Šï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„æ„æ€å°±æ˜¯ä¸€ä¸ªä»åˆå§‹åˆ°ç»“æŸä¸º8-15ä½çš„å…¨æ–‡å­—å­—ç¬¦ä¸”å¿…é¡»å«æœ‰è‡³å°‘ä¸€ä¸ªæ•°å­—å­—ç¬¦å’Œè‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯å­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;2ï¼Œ(?=...)ç¯è§†è¡¨è¾¾å¼å¦‚ä½•ç†è§£&lt;/p&gt;
&lt;p&gt;æˆ‘ä¸ªäººç†è§£å°±æ˜¯æŠŠè¿™ä¸ªçœ‹æˆä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼ï¼Œæ˜¯æ•´ä½“åŒ¹é…æˆåŠŸçš„å¿…é¡»è¦æ»¡è¶³çš„æ¡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;(?=...)ä¸ºé¡ºåºè‚¯å®šç¯è§†ï¼Œå…¶ä»–ä¸‰ä¸ªç¯è§†æ„æ€ç±»ä¼¼ã€‚è¿™ä¸ªè¡¨è¾¾å¼ä»æ‹¬å·çš„æ‰€åœ¨çš„åŒ¹é…ä½ç½®å¼€å§‹è¿›è¡ŒåŒ¹é…åˆ¤æ–­ï¼Œå¹¶ä¸”ä¸å ç”¨åŒ¹é…å­—ç¬¦ï¼Œå³ï¼Œæ‹¬å·åé¢çš„åŒ¹é…ä½ç½®ä¸å˜ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹å®Œè¿™æœ¬æ­£åˆ™ä¹¦åï¼Œè™½ç„¶å¾ˆå¤šç‰¹å®šçš„åŒ¹é…ç¬¦å·å’Œå­—ç¬¦æ²¡æœ‰å®Œå…¨èƒ½å¤Ÿè®°ä½ï¼Œä½†æ˜¯ä»æ¯”è¾ƒæ·±å±‚æ¬¡çš„è§’åº¦æ¥ç†è§£æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…è¿‡ç¨‹ï¼Œäº†è§£æ­£åˆ™é€å­—ç¬¦çš„åŒ¹é…è¿‡ç¨‹ï¼Œå›æº¯ç­‰è¿‡ç¨‹ã€‚æ„Ÿè§‰è¿™æ ·å¯¹äºæ€è€ƒå’Œåˆ†ææ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„ç»†èŠ‚éå¸¸æœ‰å¸®åŠ©ã€‚&lt;/p&gt;</content><category term="Tech"></category><category term="æ­£åˆ™"></category></entry><entry><title>ä¿®é¥°å™¨åŠflaskçš„routeä¿®é¥°å™¨</title><link href="https://bobobo80.com/2017/xiu-shi-qi-ji-flaskde-routexiu-shi-qi.html" rel="alternate"></link><published>2017-04-30T00:00:00+08:00</published><updated>2017-04-30T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2017-04-30:/2017/xiu-shi-qi-ji-flaskde-routexiu-shi-qi.html</id><summary type="html">&lt;p&gt;pythonçš„ä¿®é¥°å™¨æ˜¯pythonçš„ä¸€ä¸ªç‰¹è‰²ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒéš¾ç†è§£çš„åœ°æ–¹ï¼Œä¸è¿‡è¿ç”¨å¾—å½“çš„è¯ä¼šéå¸¸ä¼˜é›…å’Œç®€æ´ã€‚
é€šå¸¸çš„ä¸¤ç§ä¿®é¥°å™¨å½¢å¼æ˜¯æ— å‚æ•°çš„åŒå±‚ç»“æ„ï¼Œå³&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decorator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f â€¦&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;pythonçš„ä¿®é¥°å™¨æ˜¯pythonçš„ä¸€ä¸ªç‰¹è‰²ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒéš¾ç†è§£çš„åœ°æ–¹ï¼Œä¸è¿‡è¿ç”¨å¾—å½“çš„è¯ä¼šéå¸¸ä¼˜é›…å’Œç®€æ´ã€‚
é€šå¸¸çš„ä¸¤ç§ä¿®é¥°å™¨å½¢å¼æ˜¯æ— å‚æ•°çš„åŒå±‚ç»“æ„ï¼Œå³&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decorator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;wrapper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="c1"&gt;# do some thing before f&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;wrapper&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·ï¼Œå³å®šä¹‰äº†ä¸€ä¸ªæ— å‚çš„ä¿®é¥°å™¨ï¼Œä½¿ç”¨æ—¶åœ¨å¯¹åº”å‡½æ•°çš„å‰é¢åŠ ä¸Š@decoratorå³å¯ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nd"&gt;@decorator&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="c1"&gt;# do some thing&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç›¸å½“äº&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;foo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;decorator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç›¸å½“äº&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;foo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;wrapper&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·ï¼Œå½“è°ƒç”¨fooæ—¶ï¼Œä¼šå…ˆè¿è¡Œwrapperä¸­çš„ä»£ç ï¼Œåœ¨è¿›å…¥fooçš„æ‰§è¡Œä»£ç ã€‚
å› ä¸ºdecoratorè¿”å›çš„æ˜¯wrapperå‡½æ•°å¼•ç”¨ï¼Œæ‰€ä»¥åªåœ¨fooè¢«è°ƒç”¨æ—¶ï¼Œwrapperä¸­çš„ä»£ç é‡‡ç”¨è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;è€Œå¯¹äºéœ€è¦å¸¦é¢å¤–å‚æ•°çš„ä¿®é¥°å™¨ï¼Œä¸€èˆ¬æ˜¯é‡‡ç”¨ä¸‰å±‚ç»“æ„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decorator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arg1&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# do some thing &lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decorator_func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;wrapper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;arg&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="c1"&gt;# do some thin before f&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;arg&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;wrapper&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;decorator_func&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;åœ¨ä»¥å‡½æ•°ä¸ºå‚æ•°çš„å¤–å±‚ï¼Œå†åŠ äº†ä¸€å±‚å¸¦å…¶ä»–å‚æ•°çš„å‡½æ•°å®šä¹‰ã€‚
ä½¿ç”¨æ—¶åœ¨å¯¹åº”çš„å‡½æ•°å®šä¹‰å‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nd"&gt;@decorator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="c1"&gt;# do some thing&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·ç›¸å½“äº&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;foo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;decorator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arg&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç›¸å½“äº&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;foo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;decorator_func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç›¸å½“äº&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;foo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;wrapper&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å…¶ä¸­decoratorçš„å‚æ•°å¯ä»¥ç”¨äºå†…åµŒçš„deocrator_funcå’Œwrapperä¸­
è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹å„ä¸ªåŒºé—´æ®µçš„è¿è¡Œæ—¶é—´ï¼Œé‡Œå±‚çš„wrapperä¸­çš„ä»£ç åœ¨fooåœ¨ç¨‹åºè¿è¡Œæ—¶è¢«è°ƒç”¨æ—¶çš„ä¹‹å‰è¢«è¿è¡Œã€‚è€Œdecoratorä¸­å¦‚æœæœ‰åŠ å…¥é€»è¾‘ä»£ç çš„è¯ï¼Œé‚£ä¹ˆå°†åœ¨pythonè§£é‡Šå™¨è¯»å–åˆ°å‡½æ•°å®šä¹‰æ—¶å°±è¢«è¿è¡Œã€‚
è€Œflaskä¸­çš„routeä¿®é¥°å™¨å°±é‡‡ç”¨äº†è¿™ä¸ªç”¨æ³•ã€‚
æ¥çœ‹ä¸€ä¸‹routeçš„å®šä¹‰ï¼Œå»æ‰æ³¨é‡Šã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rule&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decorator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;endpoint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;endpoint&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_url_rule&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rule&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;endpoint&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;decorator&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;routeæ˜¯å¸¦å‚ä¿®é¥°å™¨ï¼Œåº”è¯¥æ˜¯ä¸‰å±‚ç»“æ„ï¼Œä¸è¿‡ç”±äºæ— éœ€wrapperä¸­è¿›è¡Œç›¸å…³æ“ä½œï¼Œæ‰€ä»¥å¯ä»¥è¿™ä¹ˆå®šä¹‰ï¼Œç›¸å½“äºwrapperä»€ä¹ˆä¹Ÿæ²¡æœ‰ã€‚
ä¹Ÿå°±æ˜¯ç›¸å½“äº&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rule&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decorator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;endpoint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;option&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;endpoint&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_url_rule&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rule&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;endpoint&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;wrapper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;wrapper&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;decorator&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ¥çœ‹çœ‹routeçš„ä½¿ç”¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nd"&gt;@route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;methods&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;GET&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="c1"&gt;# do some thing&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render_template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;index.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·åœ¨è§£é‡Šå™¨åˆå§‹è¿è¡Œæ—¶ï¼Œè¯»åˆ°indexå’Œrouteä¿®é¥°å™¨æ—¶ï¼Œä¼šè¿è¡Œå¯¹åº”decoratorä¸­çš„ä»£ç ï¼Œå³è¿è¡Œadd_url_rule()æ–¹æ³•ï¼Œå³æŠŠè·¯ç”±è§„åˆ™åŠ å…¥åˆ°appçš„mapä¸­ã€‚è€Œindexåªä¼šåœ¨å®¢æˆ·ç«¯è¯·æ±‚åï¼Œè·¯ç”±è¢«åŒ¹é…åè¢«è°ƒç”¨ã€‚
æ‰€ä»¥flaskå°±è¿™æ ·ä¼˜é›…çš„å®ç°äº†åœ°å€è·¯ç”±çš„è®¾ç½®ã€‚
routeä¿®é¥°å™¨çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºåœ¨åœ¨åˆå§‹è¿è¡Œæ—¶å°±è¿è¡Œç›¸åº”çš„add_url_rule()ç­‰å†…å®¹ï¼Œæ‰€ä»¥ï¼Œå¦‚æœå½“ä½¿ç”¨å¤šä¸ªæ–‡ä»¶æ¥è®¾ç½®flaskåº”ç”¨æ—¶ï¼Œéœ€è¦æ³¨æ„åŒ…å«routeçš„viewéƒ¨åˆ†pyæ–‡ä»¶ï¼Œå¤„äºåœ¨åˆšå¼€å§‹è¢«å¼•ç”¨æˆ–å¯¼å…¥ï¼Œè¿™æ ·æ‰èƒ½è¢«è§£é‡Šå™¨è¿è¡Œã€‚ä»¥ç‹—ä¹¦çš„blueprintç»“æ„ä¸ºä¾‹ï¼Œåœ¨appæ‰€åœ¨åŒ…çš„__init__.pyä¸­,å®šä¹‰create_app()æ–¹æ³•ï¼Œå…¶ä¸­æ³¨å†Œæ¯ä¸ªblueprintæ¨¡å—ï¼Œè¿™é‡Œä¼šå¯¼å…¥å„ä¸ªæ¨¡å—åŒ…ï¼Œæ‰€ä»¥åœ¨æ¯ä¸ªæ¨¡å—åŒ…çš„__init__.pyä¸­ï¼Œéœ€è¦å¼•ç”¨è¯¥æ¨¡å—çš„view&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;.&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;views&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·ï¼Œå°±èƒ½åœ¨create_app()çš„å¯¼å…¥åŒ…æ—¶ï¼Œåˆå§‹åŒ–è·¯ç”±è®¾å®šäº†ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™
&lt;a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014318435599930270c0381a3b44db991cd6d858064ac0000"&gt;å»–é›ªå³°pythonæ•™ç¨‹-ä¿®é¥°å™¨&lt;/a&gt;&lt;/p&gt;</content><category term="Tech"></category><category term="flask"></category></entry><entry><title>Hello World</title><link href="https://bobobo80.com/2017/hello-world.html" rel="alternate"></link><published>2017-04-25T00:00:00+08:00</published><updated>2017-04-25T00:00:00+08:00</updated><author><name>bobobo80</name></author><id>tag:bobobo80.com,2017-04-25:/2017/hello-world.html</id><content type="html">&lt;p&gt;ç¬¬ä¸€ç¯‡æµ‹è¯•ã€‚è½¬ä¸ºä½¿ç”¨pelicanå†™åšå®¢ã€‚&lt;/p&gt;</content><category term="Tech"></category><category term="test"></category></entry></feed>